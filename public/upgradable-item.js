(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{"6pQk":function(t,a,e){"use strict";e.r(a);var s=e("o0o1"),i=e.n(s),r={name:"SelectUpgradableItemComponent",props:["fd_products"],data:function(){return{clickSubmit:!1,params:{}}},computed:{getProductList:function(){return this.loadTable(),this.fd_products}},methods:{loadTable:function(){$.fn.DataTable.isDataTable("#dt-product-option-list")&&(this.table.destroy(),this.table_data=[]);var t=this;setTimeout((function(){t.table=$("#dt-product-option-list").DataTable({destroy:!0,order:[[2,"asc"]],columnDefs:[{orderable:!1,className:"select-checkbox",targets:0},{targets:[1],visible:!1,searchable:!1}],select:{style:"multi",selector:"td:first-child"},language:{paginate:{previous:"<i class='mdi mdi-chevron-left'>",next:"<i class='mdi mdi-chevron-right'>"}},drawCallback:function(){$(".dataTables_paginate > .pagination").addClass("pagination-rounded")}})}),100)},selectProductForm:function(){var t=this,a=this.table.rows(".selected").data(),e=[];$.each(a,(function(t){var s=a[t][1];e.push(s)})),this.params={product_ids:e},axios.post("/product/add_addon_dessert",this.params).then((function(a){var e=a.data,s=(a.status,e.message);Swal.fire({type:"success",title:"Success",text:s,allowOutsideClick:!1}).then((function(a){$("div#modal-select-product").modal("hide"),t.$parent.fetchProductList(1)}))}))}}},n=e("KHd+");function o(t,a,e,s,i,r,n){try{var o=t[r](n),c=o.value}catch(t){return void e(t)}o.done?a(c):Promise.resolve(c).then(s,i)}function c(t){return function(){var a=this,e=arguments;return new Promise((function(s,i){var r=t.apply(a,e);function n(t){o(r,s,i,n,c,"next",t)}function c(t){o(r,s,i,n,c,"throw",t)}n(void 0)}))}}var d={components:{SelectProduct:Object(n.a)(r,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"modal-dialog modal-lg"},[e("div",{staticClass:"modal-content"},[t._m(0),t._v(" "),e("form",{attrs:{method:"post",enctype:"multipart/form-data"},on:{submit:function(a){return a.preventDefault(),t.selectProductForm(a)}}},[e("div",{staticClass:"modal-body p-4"},[e("table",{staticClass:"table table-bordered table-hover",attrs:{id:"dt-product-option-list",width:"100%"}},[t._m(1),t._v(" "),e("tbody",t._l(t.getProductList,(function(a,s){return e("tr",{key:s},[e("td"),t._v(" "),e("td",[t._v(t._s(a.product_id))]),t._v(" "),e("td",[e("span",{staticClass:"font-weight-bold text-dark"},[t._v(t._s(a.product_name))])]),t._v(" "),e("td",[e("img",{attrs:{src:"storage/"+a.image,width:"90",height:"60",alt:""}})])])})),0)])]),t._v(" "),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-secondary waves-effect",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Close")]),t._v(" "),!1===t.clickSubmit?e("button",{staticClass:"btn btn-info waves-effect waves-light",attrs:{type:"submit"}},[t._v("Save changes")]):e("button",{staticClass:"btn btn-info waves-effect waves-light",attrs:{disabled:""}},[e("span",{staticClass:"spinner-border spinner-border-sm mr-1",attrs:{role:"status","aria-hidden":"true"}}),t._v("\n                    Loading...\n                ")])])])])])}),[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"modal-header"},[a("h4",{staticClass:"modal-title"},[this._v("Select Product(s)")]),this._v(" "),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-hidden":"true"}},[this._v("×")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("thead",[a("tr",[a("td"),this._v(" "),a("td"),this._v(" "),a("td",[this._v("Product Name")]),this._v(" "),a("td",[this._v("Image")])])])}],!1,null,null,null).exports},data:function(){return{clickSetup:!1,table_data:[],params:[],fd_products:[]}},computed:{getList:function(){return this.table_data}},methods:{fetchProductList:function(t){var a=this;return c(i.a.mark((function e(){var s,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $.fn.DataTable.isDataTable("#dt-product-list")&&(a.table.destroy(),a.table_data=[]),e.next=3,axios.get("/product/fetch_addon_dessert_list/".concat(t));case 3:s=e.sent,a.table_data=s.data,r=a,setTimeout((function(){r.table=$("#dt-product-list").DataTable({destroy:!0,order:[[0,"asc"]],columnDefs:[{targets:[1],orderable:!1},{targets:[2,3],orderable:!1,width:"20%",className:"text-center"}],language:{paginate:{previous:"<i class='mdi mdi-chevron-left'>",next:"<i class='mdi mdi-chevron-right'>"}},drawCallback:function(){$(".dataTables_paginate > .pagination").addClass("pagination-rounded")}})}),100);case 7:case"end":return e.stop()}}),e)})))()},selectProduct:function(){var t=this;return c(i.a.mark((function a(){var e,s;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.clickSetup=!0,a.next=3,axios.get("/product/fetch_addon_dessert_list/0");case 3:e=a.sent,s=e.data,t.fd_products=s,$("div#modal-select-product").modal({backdrop:"static",keyboard:!1,show:!0}),t.clickSetup=!1;case 8:case"end":return a.stop()}}),a)})))()},removeProduct:function(t){var a=this;Swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",type:"warning",allowOutsideClick:!1,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, change it!"}).then((function(e){e.value&&(a.params={product_id:t},axios.put("/product/remove_addon_dessert",a.params).then((function(t){var e=t.data,s=(t.status,e.message);Swal.fire({type:"success",title:"Success",text:s}).then((function(t){a.fetchProductList(1)}))})))}))}},mounted:function(){this.fetchProductList(1)}},l=Object(n.a)(d,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"container-fluid"},[t._m(0),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},[!1===t.clickSetup?e("button",{staticClass:"btn btn-primary waves-effect waves-light float-right",on:{click:t.selectProduct}},[e("i",{staticClass:"fas fa-plus-circle"}),t._v("   Select Product")]):e("button",{staticClass:"btn btn-primary waves-effect waves-light float-right",attrs:{disabled:""}},[e("span",{staticClass:"spinner-border spinner-border-sm mr-1",attrs:{role:"status","aria-hidden":"true"}}),t._v("\n                                Loading...\n                            ")])])]),t._v(" "),e("hr"),t._v(" "),e("table",{staticClass:"table table-sm table-hover",attrs:{id:"dt-product-list",width:"100%"}},[t._m(1),t._v(" "),e("tbody",t._l(t.getList,(function(a,s){return e("tr",{key:s},[e("td",[e("span",{staticClass:"font-weight-bold text-dark"},[t._v(t._s(a.product_name))])]),t._v(" "),e("td",[e("span",{staticClass:"text-dark"},[t._v(t._s(a.description))])]),t._v(" "),e("td",[e("img",{attrs:{src:"storage/"+a.image,width:"90",height:"60"}})]),t._v(" "),e("td",[e("button",{staticClass:"btn btn-sm btn-light btn-rounded",class:"remove-button-"+a.product_id,attrs:{"data-wenk":"Edit Product"},on:{click:function(e){return t.removeProduct(a.product_id)}}},[e("i",{staticClass:"text-danger remixicon-delete-bin-2-line"})])])])})),0)])])])])]),t._v(" "),e("div",{staticClass:"modal fade",staticStyle:{display:"none"},attrs:{id:"modal-select-product",tabindex:"-1",role:"dialog","aria-labelledby":"myModalLabel","aria-hidden":"true"}},[e("select-product",{attrs:{fd_products:t.fd_products}})],1)])}),[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"page-title-box"},[a("div",{staticClass:"page-title-right"},[a("ol",{staticClass:"breadcrumb m-0"},[a("li",{staticClass:"breadcrumb-item"},[a("a",{attrs:{href:"javascript: void(0);"}},[this._v("Setup")])]),this._v(" "),a("li",{staticClass:"breadcrumb-item active"},[this._v("Upgradable Item")])])]),this._v(" "),a("h4",{staticClass:"page-title"},[this._v("Upgradable Item")])])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("thead",[a("tr",[a("th",[this._v("Product Name")]),this._v(" "),a("th",[this._v("Description")]),this._v(" "),a("th",[this._v("Image")]),this._v(" "),a("th",[this._v("Action")])])])}],!1,null,null,null);a.default=l.exports}}]);