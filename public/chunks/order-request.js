(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{GljF:function(t,e,a){"use strict";a.r(e);var s=a("o0o1"),i=a.n(s),n=a("XuX8"),r=a.n(n),o=a("jE9Z");function c(t,e,a,s,i,n,r){try{var o=t[n](r),c=o.value}catch(t){return void a(t)}o.done?e(c):Promise.resolve(c).then(s,i)}r.a.use(o.a);var l={name:"OngoingTransactionComponent",components:{},data:function(){return{table_data:[],table:{},isChecked:null,button_pickup_tag:!1,params:[],date:null,dateToday:null}},computed:{reloadOnGoingProcess:function(){return this.$root.reloadOnGoingProcess},getList:function(){return this.table_data}},methods:{encryptTicket:function(t){return btoa(t)},checkPayment:function(t){return 0!==t.tags.length},isPending:function(t){for(var e=!0,a=0;a<t.length;a++){0==t[a].pending_status&&(e=!1)}return e},priceDetail:function(t){var e=0,a=0;return t.forEach((function(t){var a=null;for(var s in t.product_prices)a=(null==t.uom_id&&""==t.uom_id||(t.product_prices[s].uom_id,t.uom_id),t.product_prices[s].stocks);0===t.canceled_status&&1===t.status&&(parseInt(t.quantity)>parseInt(a)||(e+=parseFloat(t.total_price)))})),t[0].customer_discounted_amt.forEach((function(t){a+=parseFloat(t.rider_discount)})),{totalPrice:e=parseFloat(e)-parseFloat(a)}},isCancelled:function(t){for(var e=!0,a=0;a<t.length;a++){0==t[a].canceled_status&&(e=!1)}return e},isPrepared:function(t){for(var e=!0,a=0;a<t.length;a++){0==t[a].tag_pickup_status&&(e=!1)}return e},fetchPendingOrder:function(){var t=this;axios.get("/pickup_order/fetch_pickup_transaction_list").then((function(e){t.table_data=e.data;var a=t;setTimeout((function(){a.table=$("#dt-pickup-transaction-list").DataTable({destroy:!0,order:[[3,"asc"]],columnDefs:[{targets:[0,1],orderable:!1},{targets:[3],orderable:!1},{targets:[4,5],orderable:!1,className:"text-center"},{targets:[6],orderable:!1,width:"20%",className:"text-center"}],language:{paginate:{previous:"<i class='mdi mdi-chevron-left'>",next:"<i class='mdi mdi-chevron-right'>"}},drawCallback:function(){$(".dataTables_paginate > .pagination").addClass("pagination-rounded")}})}),100)}))},tagForPickUp:function(t){var e=this;Swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",type:"warning",allowOutsideClick:!1,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, please proceed!"}).then((function(a){a.value&&(e.params={ticket_id:t},axios.post("/pickup_order/tag_for_pickup",e.params).then((function(t){var a=t.data,s=(t.status,a.message);Swal.fire({type:"success",title:"Success",text:s}).then((function(t){e.table.destroy(),e.table_data=[],e.fetchPendingOrder()}))})))}))},viewOrder:function(t){var e=this;this.params={ticket_id:t},axios.post("/order/check_order",this.params).then((function(a){var s=a.data;a.status;if("preparing"===s.order_status){var i=s.name;Swal.fire({type:"info",title:"Opsss!!",text:"Order reviewed by: "+i+"."}).then((function(t){e.fetchPendingOrder()}))}else e.$router.push({name:"view-pickup-order",params:{ticketId:e.encryptTicket(t)}})}))},viewOrderHistory:function(t,e){this.$router.push({name:"view-order-history",params:{ticketId:this.encryptTicket(t),mop:this.encryptTicket(e)}})},getServerDateTime:function(){var t,e=this;return(t=i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,axios.get("/order/server_datetime").then((function(t){e.date=new Date(t.data).toISOString(),e.dateToday=new Date(t.data).toISOString()}));case 2:case"end":return t.stop()}}),t)})),function(){var e=this,a=arguments;return new Promise((function(s,i){var n=t.apply(e,a);function r(t){c(n,s,i,r,o,"next",t)}function o(t){c(n,s,i,r,o,"throw",t)}r(void 0)}))})()},checkTime:function(t){var e=new Date(t);return{getTime:e.getTime(),getHis:e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()}}},mounted:function(){this.fetchPendingOrder()},filters:{moment:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return moment(t).format("MMMM DD, YYYY")})),momentTime:function(t){return moment(t).format("MMMM DD, YYYY, h:mm A")}},watch:{reloadOnGoingProcess:function(){this.fetchPendingOrder()}}},d=a("KHd+"),m=Object(d.a)(l,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{},[a("table",{staticClass:"table table-sm table-hover",staticStyle:{width:"100%"},attrs:{id:"dt-pickup-transaction-list"}},[t._m(0),t._v(" "),Object.keys(t.getList).length>0?a("tbody",t._l(t.getList,(function(e,s,i){return a("tr",{key:i},[a("td",[1===e[0].type?a("i",{staticClass:"remixicon-phone-line"}):3===e[0].type?a("i",{staticClass:"remixicon-computer-line"}):a("i",{staticClass:"remixicon-smartphone-line"})]),t._v(" "),a("td",[a("span",{staticClass:"font-weight-bold text-dark"},[t._v(t._s(e[0].ticket))])]),t._v(" "),a("td",[a("span",{staticClass:"font-weight-bold text-dark"},[t._v(t._s(e[0].customer_delivery_info.lastname+", "+e[0].customer_delivery_info.firstname))])]),t._v(" "),a("td",[a("span",{staticStyle:{display:"none"}},[t._v(t._s(t.checkTime(e[0].pickup_at).getTime))]),t._v(" "),"0:0:0"===t.checkTime(e[0].pickup_at).getHis?a("span",{staticClass:"font-weight-bold text-dark"},[t._v(t._s(t._f("moment")(e[0].pickup_at)))]):a("span",{staticClass:"font-weight-bold text-dark"},[t._v(t._s(t._f("momentTime")(e[0].pickup_at)))])]),t._v(" "),a("td",{attrs:{align:"center"}},[a("span",{staticClass:"font-weight-bold text-dark"},[t._v("₱ "+t._s(t._f("numberFormat")(t.priceDetail(e).totalPrice)))])]),t._v(" "),a("td",{attrs:{align:"center"}},[t.checkPayment(e[0])?a("span",{staticClass:"badge badge-light-success"},[t._v("Paid & Released")]):!0!==t.isPending(e)||0!==e[0].cancel_status||null!==e[0].customer_order_detail&&0!==e[0].customer_order_detail.cancelled_status||!1!==t.isPrepared(e)?!1!==t.isPending(e)||0!==e[0].cancel_status||null!==e[0].customer_order_detail&&0!==e[0].customer_order_detail.cancelled_status||!1!==t.isPrepared(e)?!1!==t.isPending(e)||0!==e[0].cancel_status||null!==e[0].customer_order_detail&&0!==e[0].customer_order_detail.cancelled_status||!0!==t.isPrepared(e)?a("span",{staticClass:"badge badge-light-danger"},[t._v("Cancelled Order")]):a("span",{staticClass:"badge badge-light-success"},[t._v("Ready for Pickup")]):a("span",{staticClass:"badge badge-light-primary"},[t._v("Preparing Order")]):a("span",{staticClass:"badge badge-light-info"},[t._v("Pending Order")])]),t._v(" "),a("td",{attrs:{width:"20%"}},[!0===t.isPending(e)?a("button",{staticClass:"btn btn-bordered-warning btn-sm waves-effect waves-light",on:{click:function(a){return t.viewOrder(e[0].ticket_id)}}},[t._v("\n              View\n            ")]):a("button",{staticClass:"btn btn-bordered-warning btn-sm waves-effect waves-light",on:{click:function(a){return t.viewOrderHistory(e[0].ticket_id,1)}}},[t._v("\n              View\n            ")]),t._v(" "),a("button",{staticClass:"btn btn-bordered-warning btn-sm waves-effect waves-light",attrs:{disabled:!0===t.isCancelled(e)||!0===t.isPending(e)||!0===t.isPrepared(e)},on:{click:function(e){return t.tagForPickUp(s)}}},[t._v("\n              Ready for Pick Up\n            ")])])])})),0):t._e()])])])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th"),t._v(" "),a("th",[t._v("Ticket #")]),t._v(" "),a("th",[t._v("Customer's Name")]),t._v(" "),a("th",[t._v("Date and Time for Pick Up")]),t._v(" "),a("th",[t._v("Total Amount")]),t._v(" "),a("th",[t._v("Transaction Status")]),t._v(" "),a("th",[t._v("Action")])])])}],!1,null,null,null).exports,u=(a("RiPy"),a("4HBT")),_=a("uUT0");r.a.component(u.HasError.name,u.HasError),r.a.component(u.AlertError.name,u.AlertError);var p={name:"PaymentAmountComponent",props:["orderDetails"],data:function(){return{paymentOrderForm:new u.Form({ticket_id:null,customer_id:null,total_amount:0,tender:null})}},computed:{computedChange:function(){return null===this.paymentOrderForm.tender||""===this.paymentOrderForm.tender?void 0:this.paymentOrderForm.tender-this.paymentOrderForm.total_amount}},methods:{checkPaymentForm:function(){var t=this;this.paymentOrderForm.submit("post","/pickup_payment_monitoring/payment_order",{transformRequest:[function(t,e){return Object(_.serialize)(t)}],onUploadProgress:function(t){}}).then((function(e){var a=e.data,s=(e.status,a.message);swal({title:"Success!",text:s,type:"success",allowOutsideClick:!1,buttonsStyling:!1,confirmButtonClass:"btn btn-primary"}).then(function(){this.$parent.fetchSuccessfullyPickUp(),this.paymentOrderForm.clear(),this.paymentOrderForm.reset(),$("div#payment-amount").modal("hide")}.bind(t))})).catch((function(t){var e=t.response,a=e.data,s=e.status;if(401===s)Swal.fire({type:"warning",title:"Warning",text:"Session has been expired."});else if(422===s){var i=a.message;Swal.fire({type:"warning",title:"Warning",text:i})}else Swal.fire({type:"error",title:"Error",text:"Oops, something went wrong!"})}))}},watch:{orderDetails:function(t){this.paymentOrderForm.ticket_id=t.ticket_id,this.paymentOrderForm.total_amount=t.total_amt,this.paymentOrderForm.customer_id=t.customer_id}}},v=Object(d.a)(p,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[t._m(0),t._v(" "),a("form",{attrs:{method:"post"},on:{submit:function(e){return e.preventDefault(),t.checkPaymentForm(e)}}},[a("div",{staticClass:"modal-body p-4"},[a("div",{staticClass:"alert alert-info",attrs:{role:"alert"}},[a("i",{staticClass:"mdi mdi-alert-circle-outline mr-2"}),t._v("Total Amount Payable is "),a("span",{staticClass:"font-weight-bold text-danger"},[t._v("₱ "+t._s(t.paymentOrderForm.total_amount))]),t._v(". \n                ")]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"field-1"}},[t._v("Customer Tender")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.paymentOrderForm.tender,expression:"paymentOrderForm.tender",modifiers:{number:!0}}],staticClass:"form-control",class:{"is-invalid":t.paymentOrderForm.errors.has("tender")},attrs:{type:"text",id:"field-1",autocomplete:"off"},domProps:{value:t.paymentOrderForm.tender},on:{input:function(e){e.target.composing||t.$set(t.paymentOrderForm,"tender",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),a("has-error",{attrs:{form:t.paymentOrderForm,field:"tender"}})],1)])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"field-2"}},[t._v("Change")]),t._v(" "),a("input",{staticClass:"form-control",attrs:{type:"text",id:"field-2",disabled:""},domProps:{value:t.computedChange}})])])])]),t._v(" "),t._m(1)])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-header"},[e("h4",{staticClass:"modal-title"},[this._v("Payment Details")]),this._v(" "),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-hidden":"true"}},[this._v("×")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-secondary waves-effect",attrs:{type:"button","data-dismiss":"modal"}},[this._v("Close")]),this._v(" "),e("button",{staticClass:"btn btn-info waves-effect waves-light",attrs:{type:"submit"}},[this._v("Submit")])])}],!1,null,null,null).exports;function h(t,e,a,s,i,n,r){try{var o=t[n](r),c=o.value}catch(t){return void a(t)}o.done?e(c):Promise.resolve(c).then(s,i)}var f={name:"CheckDiscountTeleComponent",props:{check_discount_tele:{type:Object,default:function(){return{}}}},data:function(){return{clickSubmit:!1,customer_discounts:[],discountsForm:{ids:[],discountIds:[],requests:[],ticket_id:null}}},methods:{checkDiscountForm:function(){var t=this;this.clickSubmit=!0,Swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",type:"warning",allowOutsideClick:!1,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, change it!"}).then((function(e){e.value?axios.post("/order/update_discount_amt",t.discountsForm).then((function(e){var a=e.data,s=(e.status,a.message);Swal.fire({type:"success",title:"Success",text:s}).then((function(e){t.$emit("closeRequestDiscount",t.discountsForm.ticket_id),t.customer_discounts=[],t.discountsForm={ids:[],discountIds:[],requests:[],ticket_id:null},t.clickSubmit=!1,$("div#check-discount-tele").modal("hide")}))})).catch((function(e){t.clickSubmit=!1;var a=e.response,s=a.data,i=a.status;if(401===i)Swal.fire({type:"warning",title:"Warning",text:"Session has been expired."});else if(422===i){var n=s.message;Swal.fire({type:"warning",title:"Warning",text:n})}else Swal.fire({type:"error",title:"Error",text:"Oops, something went wrong!"})})):t.clickSubmit=!1}))},fetchApprovedDiscount:function(t){var e,a=this;return(e=i.a.mark((function e(){var s,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,axios.get("/discount/fetch_approved_discount/".concat(t));case 2:s=e.sent,n=s.data,a.discountsForm.ids=[],a.discountsForm.discountIds=[],a.discountsForm.requests=[],a.customer_discounts=n.customer_discounts,n.customer_discounts.forEach((function(t){for(var e in t)a.discountsForm.ids.push(t[e].customer_discount.id),a.discountsForm.discountIds.push(t[e].discount_id),a.discountsForm.requests.push(t[e].status)}));case 9:case"end":return e.stop()}}),e)})),function(){var t=this,a=arguments;return new Promise((function(s,i){var n=e.apply(t,a);function r(t){h(n,s,i,r,o,"next",t)}function o(t){h(n,s,i,r,o,"throw",t)}r(void 0)}))})()},approved:function(t,e){$("button.approved_"+t).prop("disabled",!0),$("button.disapproved_"+t).prop("disabled",!1),Swal.fire({type:"success",title:"Success",text:"Discount status has been updated"});var a=this.discountsForm.ids.indexOf(t);this.discountsForm.requests.splice(a,1,1),this.countApprovedDiscount(e)},disapproved:function(t,e){$("button.approved_"+t).prop("disabled",!1),$("button.disapproved_"+t).prop("disabled",!0),Swal.fire({type:"success",title:"Success",text:"Discount status has been updated"});var a=this.discountsForm.ids.indexOf(t);this.discountsForm.requests.splice(a,1,0),this.countApprovedDiscount(e)},countApprovedDiscount:function(t){var e=this,a=0;return this.discountsForm.ids.forEach((function(s){var i=e.discountsForm.ids.indexOf(s);t==e.discountsForm.discountIds[i]&&1===e.discountsForm.requests[i]&&(a+=1)})),a}},watch:{check_discount_tele:function(t){this.discountsForm.ticket_id=t.ticket_id,this.fetchApprovedDiscount(t.ticket_id)}}};var b={name:"RemittanceMonitoringComponent",components:{PaymentAmount:v,CheckDiscountTele:Object(d.a)(f,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-dialog modal-lg"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-body"},[a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"}},[t._v("×")]),t._v(" "),a("br"),a("br"),t._v(" "),t._l(t.customer_discounts,(function(e,s){return a("div",{key:s,staticClass:"row"},[e.length>0?a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"alert alert-info",attrs:{role:"alert"}},[a("i",{staticClass:"mdi mdi-alert-circle-outline mr-2"}),t._v("Number of\n            "+t._s(e[0].discount_list.discount_name)+" :\n            "+t._s(e.length)+"\n          ")]),t._v(" "),a("div",{staticStyle:{"max-width":"95%"}},[a("div",{staticClass:"row d-flex justify-content-between mb-1 ml-2"},[a("table",{staticClass:"table table-sm table-bordered",attrs:{width:"100%"}},[a("thead",[a("tr",[a("th",[t._v("No.")]),t._v(" "),a("th",[t._v("Name")]),t._v(" "),a("th",[t._v("ID. Number")]),t._v(" "),a("th",[a("center",[t._v("Image")])],1),t._v(" "),a("th",[a("center",[t._v("Status")])],1)])]),t._v(" "),t._l(e,(function(e,s){return a("tbody",{key:"discount"+s},[a("tr",[a("td",{attrs:{width:"5%"}},[t._v(t._s(s+1)+".")]),t._v(" "),a("td",{attrs:{width:"30%"}},[t._v("\n                      "+t._s(e.customer_discount.discount_storage.name)+"\n                    ")]),t._v(" "),a("td",{attrs:{width:"30%"}},[t._v("\n                      "+t._s(e.customer_discount.discount_storage.id_number)+"\n                    ")]),t._v(" "),a("td",[a("center",[a("button",{staticClass:"btn btn-sm btn-bordered-warning waves-effect waves-light btn-rounded",attrs:{disabled:null===e.customer_discount.discount_storage.image_path},on:{click:function(a){return t.viewDiscountID(e.customer_discount.discount_storage.image_path)}}},[t._v("\n                          View Uploaded ID\n                        ")])])],1),t._v(" "),a("td",{attrs:{align:"center"}},[a("button",{staticClass:"btn btn-sm btn-success btn-rounded",class:"approved_"+e.customer_discount.id,attrs:{disabled:1===e.status,"data-wenk":"Approved"},on:{click:function(a){return t.approved(e.customer_discount.id,e.discount_id)}}},[a("i",{staticClass:"remixicon-check-line"})]),t._v(" "),a("button",{staticClass:"btn btn-sm btn-danger btn-rounded",class:"disapproved_"+e.customer_discount.id,attrs:{disabled:0===e.status,"data-wenk":"Disapproved"},on:{click:function(a){return t.disapproved(e.customer_discount.id,e.discount_id)}}},[a("i",{staticClass:"remixicon-close-line"})])])])])}))],2)])])]):t._e()])})),t._v(" "),a("div",{staticClass:"discount-list"},[t._m(0),t._v(" "),a("div",{staticStyle:{"max-width":"95%"}},[a("table",{staticClass:"table table-sm table-bordered",attrs:{width:"100%"}},[a("tbody",t._l(t.customer_discounts,(function(e,s){return a("tr",{key:"approved"+s},[e.length>0?[a("td",[t._v("\n                    Number of "+t._s(e[0].discount_list.discount_name)+" :\n                  ")]),t._v(" "),a("td",[t._v("\n                    "+t._s(t.countApprovedDiscount(e[0].discount_id))+"\n                  ")])]:t._e()],2)})),0)])])])],2),t._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary waves-effect",attrs:{type:"button","data-dismiss":"modal"}},[t._v("\n        Close\n      ")]),t._v(" "),!1===t.clickSubmit?a("button",{staticClass:"btn btn-info waves-effect waves-light",attrs:{type:"submit"},on:{click:t.checkDiscountForm}},[t._v("\n        Save\n      ")]):a("button",{staticClass:"btn btn-primary waves-effect waves-light",attrs:{type:"button",disabled:""}},[a("span",{staticClass:"spinner-border spinner-border-sm mr-1",attrs:{role:"status","aria-hidden":"true"}}),t._v("\n        Loading...\n      ")])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"alert alert-info",attrs:{role:"alert"}},[e("i",{staticClass:"mdi mdi-alert-circle-outline mr-2"}),this._v("Discount(s) List\n        ")])}],!1,null,null,null).exports},data:function(){return{table_data:[],table:{},orderDetails:{},discount_details:{},is_discounted:!0}},computed:{getList:function(){return this.table_data}},methods:{fetchSuccessfullyPickUp:function(){var t=this;axios.get("/pickup_payment_monitoring/fetch_pickup_payment").then((function(e){t.table_data=e.data;var a=t;setTimeout((function(){a.table=$("#dt-remmitance-list").removeAttr("width").DataTable({destroy:!0,order:[[3,"asc"]],scrollX:!0,columnDefs:[{targets:[0],className:"details-control",orderable:!1,data:null,defaultContent:""},{width:"3%",targets:[0,1]},{width:"10%",targets:[2]},{width:"15%",targets:[3]},{width:"10%",targets:[5],className:"text-right"},{width:"15%",targets:[4,6,7],className:"text-center"},{targets:[8,9,10],visible:!1}],language:{paginate:{previous:"<i class='mdi mdi-chevron-left'>",next:"<i class='mdi mdi-chevron-right'>"}},drawCallback:function(){$(".dataTables_paginate > .pagination").addClass("pagination-rounded")}}),$("#dt-remmitance-list tbody").on("click","td.details-control",(function(){var t,e=$(this).closest("tr"),s=a.table.row(e);s.child.isShown()?(s.child.hide(),e.removeClass("shown")):(s.child((t=s.data(),'<table cellpadding="5" cellspacing="0" border="0" style="padding-left:50px;"><tr><td><span class="font-weight-bold">Order Submitted:</span></td><td></td><td>'+t[7]+'</td></tr><tr><td><span class="font-weight-bold">Food Preparation / Time Consumed:</span></td><td><span class="text-danger">(Order Submission -> Ready for pick-up Tagging)</span></td><td>'+t[8]+'</td></tr><tr><td><span class="font-weight-bold">Released Period / Time Consumed:</span></td><td><span class="text-danger">(Amount Remitted by tenant -> Customer)</span></td><td>'+t[9]+"</td></tr></table>")).show(),e.addClass("shown"))}))}),100)}))},paymentOrder:function(t,e,a){this.orderDetails={ticket_id:t,customer_id:e,total_amt:a},$("div#payment-amount").modal({backdrop:"static",keyboard:!1,show:!0})},checkPayment:function(t){return 0!==t.tags.length},customerDetails:function(t){var e=null,a=null,s=null;for(var i in t){e="".concat(t[i].customer_delivery_info.lastname,", ").concat(t[i].customer_delivery_info.firstname),a=t[i].ticket.type,s=t[i].ticket.ticket;break}return{customerName:e,orderPlatform:a,ticket_id:s}},priceDetail:function(t){var e=0,a=0;return t.forEach((function(t){for(var a in t.product_prices)null==t.uom_id&&""==t.uom_id||(t.product_prices[a].uom_id,t.uom_id),t.product_prices[a].stocks;0===t.canceled_status&&1===t.status&&(e+=parseFloat(t.total_price))})),t[0].customer_discounted_amt.forEach((function(t){a+=parseFloat(t.rider_discount)})),{totalPrice:e=parseFloat(e)-parseFloat(a)}},orderTimeFrame:function(t){var e={timestamp:null,consumed:null},a={timestamp:null,consumed:null},s={timestamp:null,consumed:null},i={timestamp:null,consumed:null};return e.timestamp=t[0].submitted_at,a.timestamp=t[0].prepared_at?t[0].prepared_at:null,a.consumed=a.timestamp?moment.duration(moment(a.timestamp).diff(moment(e.timestamp),"seconds"),"seconds").format("h [hrs], m [min], s [secs]"):"--, --",s.timestamp=t[0].tag_pickup_at?t[0].tag_pickup_at:null,s.consumed=s.timestamp?moment.duration(moment(s.timestamp).diff(moment(e.timestamp),"seconds"),"seconds").format("h [hrs], m [min], s [secs]"):"--, --",0===t[0].tags.length?i.timestamp=null:i.timestamp=t[0].tags[0].remitted_at?t[0].tags[0].remitted_at:null,i.consumed=i.timestamp?moment.duration(moment(i.timestamp).diff(moment(s.timestamp),"seconds"),"seconds").format("h [hrs], m [min], s [secs]"):"--, --",{orderSubmitted:e,preparation:a,picking:s,released:i}},checkDiscount:function(t){this.discount_details={ticket_id:t},$("div#check-discount-tele").modal({backdrop:"static",keyboard:!1,show:!0})},closeRequestDiscount:function(){this.is_discounted=!1,this.fetchSuccessfullyPickUp()}},mounted:function(){this.fetchSuccessfullyPickUp()}},g={components:{OngoingTransaction:m,RemittanceMonitoring:Object(d.a)(b,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-sm table-hover",staticStyle:{width:"100%"},attrs:{id:"dt-remmitance-list"}},[a("thead",[a("tr",[a("th"),t._v(" "),a("th"),t._v(" "),a("th",[t._v("Ticket")]),t._v(" "),a("th",[t._v("Customer's Name")]),t._v(" "),a("th",[a("center",[t._v("Discount")])],1),t._v(" "),a("th",[t._v("Price")]),t._v(" "),a("th",[t._v("Payment Amount")]),t._v(" "),a("th",[t._v("Status")]),t._v(" "),a("th"),t._v(" "),a("th"),t._v(" "),a("th")])]),t._v(" "),a("tbody",t._l(t.getList,(function(e,s,i){return a("tr",{key:i},[a("td"),t._v(" "),a("td",[1===t.customerDetails(e).orderPlatform?a("i",{staticClass:"remixicon-phone-line"}):3===t.customerDetails(e).orderPlatform?a("i",{staticClass:"remixicon-computer-line"}):a("i",{staticClass:"remixicon-smartphone-line"})]),t._v(" "),a("td",[a("span",{staticClass:"font-weight-bold text-dark"},[t._v(t._s(t.customerDetails(e).ticket_id))])]),t._v(" "),a("td",[a("span",{staticClass:"font-weight-bold text-dark"},[t._v(t._s(t.customerDetails(e).customerName))])]),t._v(" "),a("td",{staticStyle:{"white-space":"nowrap"}},[a("button",{staticClass:"btn btn-bordered-warning btn-sm waves-effect waves-light",attrs:{disabled:0===e[0].customer_discounted_amt.length||e[0].tags.length>0},on:{click:function(a){return t.checkDiscount(e[0].ticket_id)}}},[t._v("\n              Check Discount\n            ")])]),t._v(" "),a("td",[a("span",{staticClass:"font-weight-bold text-dark"},[t._v("₱ "+t._s(t._f("numberFormat")(t.priceDetail(e).totalPrice)))])]),t._v(" "),a("td",[e[0].customer_discounted_amt.length>0&&!0===t.is_discounted?a("button",{staticClass:"btn btn-bordered-warning btn-sm waves-effect waves-light",attrs:{disabled:""}},[t._v("\n              Payment Amount\n            ")]):a("button",{staticClass:"btn btn-bordered-warning btn-sm waves-effect waves-light",attrs:{disabled:t.checkPayment(e[0])},on:{click:function(a){t.paymentOrder(s,e[0].customer_id,t.priceDetail(e).totalPrice)}}},[t._v("\n              Payment Amount\n            ")])]),t._v(" "),a("td",[t.checkPayment(e[0])?a("span",{staticClass:"badge badge-light-primary"},[t._v("Paid & Released")]):a("span",{staticClass:"badge badge-light-success"},[t._v("For Pick Up")])]),t._v(" "),a("td",[t._v("\n            "+t._s(t._f("dateTimeFormat")(t.orderTimeFrame(e).orderSubmitted.timestamp))+"\n          ")]),t._v(" "),a("td",[t._v("\n            "+t._s(t._f("dateTimeFormat")(t.orderTimeFrame(e).picking.timestamp))+" /\n            "+t._s(t.orderTimeFrame(e).picking.consumed)+"\n          ")]),t._v(" "),a("td",[t.orderTimeFrame(e).released.timestamp?a("span",[t._v("\n              "+t._s(t._f("dateTimeFormat")(t.orderTimeFrame(e).released.timestamp))+" /\n              "+t._s(t.orderTimeFrame(e).released.consumed)+"\n            ")]):a("span",[t._v("-/--/----, -:-- --")])])])})),0)])]),t._v(" "),a("div",{staticClass:"modal fade",staticStyle:{display:"none"},attrs:{id:"payment-amount",tabindex:"-1",role:"dialog","aria-labelledby":"myModalLabel","aria-hidden":"true"}},[a("payment-amount",{attrs:{orderDetails:t.orderDetails}})],1),t._v(" "),a("div",{staticClass:"modal fade",staticStyle:{display:"none"},attrs:{id:"check-discount-tele",tabindex:"-1",role:"dialog","aria-labelledby":"myModalLabel","aria-hidden":"true"}},[a("check-discount-tele",{attrs:{check_discount_tele:t.discount_details},on:{closeRequestDiscount:t.closeRequestDiscount}})],1)])}),[],!1,null,null,null).exports},data:function(){return{transaction:!0,remittanceMonitoring:!1}},methods:{tabTo:function(t){"ongoingTransaction"==t?(this.transaction=!0,this.remittanceMonitoring=!1):"remittanceMonitoring"==t?(this.transaction=!1,this.remittanceMonitoring=!0):(this.transaction=!1,this.remittanceMonitoring=!1)}}},w=Object(d.a)(g,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[t._m(0),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-12"},[a("div",{staticClass:"card-box"},[a("ul",{staticClass:"nav nav-pills navtab-bg nav-justified"},[a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link active",attrs:{href:"#onGoing-transaction","data-toggle":"tab","aria-expanded":"false"},on:{click:function(e){return t.tabTo("ongoingTransaction")}}},[t._m(1),t._v(" "),a("span",{staticClass:"d-none d-sm-inline-block"},[t._v("On Going Transaction")])])]),t._v(" "),a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",attrs:{href:"#remittance-monitoring","data-toggle":"tab","aria-expanded":"false"},on:{click:function(e){return t.tabTo("remittanceMonitoring")}}},[t._m(2),t._v(" "),a("span",{staticClass:"d-none d-sm-inline-block"},[t._v("Payment Monitoring")])])])]),t._v(" "),a("hr"),t._v(" "),a("div",{staticClass:"tab-content"},[a("div",{staticClass:"tab-pane fade show active",attrs:{id:"onGoing-transaction"}},[t.transaction?a("ongoing-transaction"):t._e()],1),t._v(" "),a("div",{staticClass:"tab-pane fade",attrs:{id:"remittance-monitoring"}},[t.remittanceMonitoring?a("remittance-monitoring"):t._e()],1)])])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("div",{staticClass:"page-title-box"},[e("div",{staticClass:"page-title-right"},[e("ol",{staticClass:"breadcrumb m-0"},[e("li",{staticClass:"breadcrumb-item"},[e("a",{attrs:{href:"javascript: void(0);"}},[this._v("Order Request")])]),this._v(" "),e("li",{staticClass:"breadcrumb-item"},[e("a",{attrs:{href:"javascript: void(0);"}},[this._v("Pick Up")])]),this._v(" "),e("li",{staticClass:"breadcrumb-item active"},[this._v("Customer Monitoring")])])]),this._v(" "),e("h4",{staticClass:"page-title"},[this._v("Customer Monitoring")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"d-inline-block d-sm-none"},[e("i",{staticClass:"fas fa-home"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"d-inline-block d-sm-none"},[e("i",{staticClass:"fas fa-cog"})])}],!1,null,null,null);e.default=w.exports},KBPt:function(t,e,a){"use strict";a.r(e);var s=a("XuX8"),i=a.n(s),n=a("4HBT"),r=a("uUT0");i.a.component(n.HasError.name,n.HasError),i.a.component(n.AlertError.name,n.AlertError);var o={name:"ContainerTypeComponent",props:["productItem"],data:function(){return{clickSubmit:!1,table_data:{},containerForm:new n.Form({ticket_id:null,container_ids:[],container_quantities:[]})}},computed:{getList:function(){return this.table_data}},methods:{fetchContainerType:function(){var t=this;$("input.chk_").prop("checked",!1),$("input.quantity_").val(""),$("input.quantity_").prop("disabled",!0),axios.get("/container/fetch_active_container_type").then((function(e){t.table_data=e.data;var a=t;setTimeout((function(){a.table=$("#dt-listContainer").DataTable({destroy:!0,order:[[0,"asc"]],columnDefs:[{targets:[0],orderable:!1,className:"text-center"},{targets:[1,2],orderable:!1,width:"45%"}],language:{paginate:{previous:"<i class='mdi mdi-chevron-left'>",next:"<i class='mdi mdi-chevron-right'>"}},drawCallback:function(){$(".dataTables_paginate > .pagination").addClass("pagination-rounded")}})}),100)}))},selectChkbox:function(t){if($("input#chk_"+t).is(":checked")){$("input.chk_"+t).prop("checked",!0),$("input.quantity_"+t).prop("disabled",!1),$("input.quantity_"+t).val("1");var e=$("span.container_"+t).text(),a=$("input.quantity_"+t).val(),s=this.containerForm.container_ids,i=this.containerForm.container_quantities;if(s.indexOf(e)>-1){var n=s.indexOf(e);i.splice(n,1,a)}else this.containerForm.container_ids.push(e),this.containerForm.container_quantities.push(a)}else{$("input.chk_"+t).prop("checked",!1),$("input.quantity_"+t).prop("disabled",!0),$("input.quantity_"+t).val("");e=$("span.container_"+t).text(),a=$("input.quantity_"+t).val(),s=this.containerForm.container_ids,i=this.containerForm.container_quantities;if(s.indexOf(e)>-1){n=s.indexOf(e);s.splice(n,1),""===a&&0===parseInt(a)||i.splice(n,1)}}},containerQty:function(t){var e=$("input.quantity_"+t).val(),a=$("span.container_"+t).text();if(""!==e&&0!==parseInt(e)){var s=this.containerForm.container_ids,i=this.containerForm.container_quantities;if(s.indexOf(a)>-1){var n=s.indexOf(a);i.splice(n,1,e)}else this.containerForm.container_ids.push(a),this.containerForm.container_quantities.push(e)}else{$("input.quantity_"+t).val("1");s=this.containerForm.container_ids,i=this.containerForm.container_quantities;if(s.indexOf(a)>-1){n=s.indexOf(a);i.splice(n,1,"1")}else this.containerForm.container_ids.push(a),this.containerForm.container_quantities.push("1")}},checkContainerForm:function(){var t=this;this.clickSubmit=!0,0===this.containerForm.container_ids.length||0===this.containerForm.container_quantities?(this.clickSubmit=!1,0===this.containerForm.container_ids.length&&Swal.fire({type:"warning",title:"Warning",text:"Please choose at least one container type!"}).then((function(t){})),0===this.containerForm.container_quantities&&Swal.fire({type:"warning",title:"Warning",text:"Container Quantity is required!"}).then((function(t){}))):this.containerForm.submit("post","/order/tag_for_pickup",{transformRequest:[function(t,e){return Object(r.serialize)(t)}],onUploadProgress:function(t){}}).then((function(e){var a=e.data,s=(e.status,a.message);if(t.clickSubmit=!1,"success"===s){var i=a.change,n=a.no_tenants;Swal.fire({type:"success",title:"Success",allowOutsideClick:!1,text:"Customer Order has been tagged for pick up!"}).then((function(e){t.$parent.table.destroy(),t.$parent.table_data=[],"00.00"==i||"0.00"==i?n>1?Swal.fire({type:"info",title:"Information",text:"Your the last tenant who Tag for Pick up"}).then((function(e){t.$parent.fetchPendingOrder(),t.containerForm.clear(),t.containerForm.reset(),$("div#container_type").modal("hide")})):(t.$parent.fetchPendingOrder(),t.containerForm.clear(),t.containerForm.reset(),$("div#container_type").modal("hide")):Swal.fire({type:"info",title:"Information",text:"Please prepare for customer change of ₱ "+i}).then((function(e){t.$parent.fetchPendingOrder(),t.containerForm.clear(),t.containerForm.reset(),$("div#container_type").modal("hide")}))}))}else Swal.fire({type:"success",title:"Success",text:s}).then((function(e){t.$parent.fetchPendingOrder(),t.containerForm.clear(),t.containerForm.reset(),$("div#container_type").modal("hide")}))})).catch((function(e){t.clickSubmit=!1;var a=e.response,s=a.data,i=a.status;if(401===i)Swal.fire({type:"warning",title:"Warning",text:"Session has been expired."});else if(422===i){var n=s.message;Swal.fire({type:"warning",title:"Warning",text:n})}else Swal.fire({type:"error",title:"Error",text:"Oops, something went wrong!"})}))}},watch:{productItem:function(t){this.containerForm.ticket_id=t.ticket_id,this.fetchContainerType()}}},c=a("KHd+"),l=Object(c.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-dialog modal-lg"},[a("div",{staticClass:"modal-content"},[t._m(0),t._v(" "),a("form",{attrs:{method:"post"},on:{submit:function(e){return e.preventDefault(),t.checkContainerForm(e)}}},[a("div",{staticClass:"modal-body p-4"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-sm table-bordered table-hover",attrs:{id:"dt-listContainer",width:"100%"}},[t._m(1),t._v(" "),a("tbody",t._l(t.getList,(function(e,s){return a("tr",{key:s},[a("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"chk_",class:"chk_"+e.id,attrs:{name:"chkId[]",type:"checkbox"},domProps:{value:e.id}}),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"container_",class:"container_"+e.id},[t._v(t._s(e.id))]),t._v(" "),a("td",[a("div",{staticClass:"custom-control custom-checkbox"},[a("input",{staticClass:"custom-control-input chk chk_",attrs:{type:"checkbox",id:"chk_"+e.id},on:{change:function(a){return t.selectChkbox(e.id)}}}),t._v(" "),a("label",{staticClass:"custom-control-label",attrs:{for:"chk_"+e.id}})])]),t._v(" "),a("td",[t._v(t._s(e.container_type))]),t._v(" "),a("td",[a("input",{staticClass:"form-control quantity_",class:"quantity_"+e.id,attrs:{type:"number",size:"2",min:"0",id:e.id,disabled:""},on:{keyup:function(a){return t.containerQty(e.id)},change:function(a){return t.containerQty(e.id)}}})])])})),0)])])])])]),t._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary waves-effect",attrs:{type:"button","data-dismiss":"modal"}},[t._v("\n          Close\n        ")]),t._v(" "),!1===t.clickSubmit?a("button",{staticClass:"btn btn-info waves-effect waves-light",attrs:{type:"submit"}},[t._v("\n          Submit\n        ")]):a("button",{staticClass:"btn btn-primary waves-effect waves-light",attrs:{type:"button",disabled:""}},[a("span",{staticClass:"spinner-border spinner-border-sm mr-1",attrs:{role:"status","aria-hidden":"true"}}),t._v("\n          Loading...\n        ")])])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-header"},[e("h4",{staticClass:"modal-title"},[this._v("Number of Bag")]),this._v(" "),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-hidden":"true"}},[this._v("\n        ×\n      ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th"),this._v(" "),e("th",[this._v("Container Type")]),this._v(" "),e("th",[this._v("Quantity")])])])}],!1,null,null,null).exports,d=a("jE9Z");i.a.use(d.a);var m={name:"OngoingTransactionComponent",data:function(){return{table_data:[],table:{},isChecked:null,button_pickup_tag:!1,params:{},date:null,dateToday:null,orderDetails:{},ticket:null,productItem:{}}},components:{ContainerType:l},computed:{reloadOnGoingProcess:function(){return this.$root.reloadOnGoingProcess},getList:function(){return this.table_data}},methods:{tfpElectronic:function(t,e){var a=this;Swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",type:"warning",allowOutsideClick:!1,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, please proceed!"}).then((function(e){e.value&&(a.params={ticket_id:t},axios.post("/order/tfp_electronic",a.params).then((function(t){var e=t.data,s=(t.status,e.message);if("success"===s){var i=e.change,n=e.no_tenants;Swal.fire({type:"success",title:"Success",allowOutsideClick:!1,text:"Customer Order has been tagged for pick up!"}).then((function(t){a.table.destroy(),a.table_data=[],"00.00"==i||"0.00"==i?n>1?Swal.fire({type:"info",title:"Information",text:"Your the last tenant who Tag for Pick up"}).then((function(t){a.fetchPendingOrder()})):a.fetchPendingOrder():Swal.fire({type:"info",title:"Information",text:"Please prepare for customer change of ₱ "+i}).then((function(t){a.fetchPendingOrder()}))}))}else Swal.fire({type:"success",title:"Success",text:s}).then((function(t){a.fetchPendingOrder()}))})))}))},encryptTicket:function(t){return btoa(t)},isPending:function(t){for(var e=!0,a=0;a<t.length;a++){0==t[a].pending_status&&(e=!1)}return e},isCancelled:function(t){for(var e=!0,a=0;a<t.length;a++){0==t[a].canceled_status&&(e=!1)}return e},isPrepared:function(t){for(var e=!0,a=0;a<t.length;a++){0==t[a].tag_status&&(e=!1)}return e},fetchPendingOrder:function(){var t=this;$.fn.DataTable.isDataTable("#dt-transaction-list")&&(this.table.destroy(),this.table_data=[]),axios.get("/order/fetch_transaction_list").then((function(e){t.table_data=e.data;var a=t;setTimeout((function(){a.table=$("#dt-transaction-list").DataTable({destroy:!0,order:[[3,"asc"]],columnDefs:[{targets:[0,1],orderable:!1},{targets:[4],orderable:!1,className:"text-center"},{targets:[5],orderable:!1,width:"20%",className:"text-center"}],language:{paginate:{previous:"<i class='mdi mdi-chevron-left'>",next:"<i class='mdi mdi-chevron-right'>"}},drawCallback:function(){$(".dataTables_paginate > .pagination").addClass("pagination-rounded")}})}),100)}))},tagForPickUp:function(t,e){this.productItem={ticket_id:t};var a=this;$("#dt-transaction-list").on("click","button.tagForPickUp",(function(){$(this).parents("tr").hasClass("selected")||(a.table.$("tr.selected").removeClass("selected"),$(this).parents("tr").addClass("selected"))})),$("div#container_type").modal({backdrop:"static",keyboard:!1,show:!0})},viewOrder:function(t){var e=this;this.params={ticket_id:t},axios.post("/order/check_order",this.params).then((function(a){var s=a.data;a.status;if("preparing"===s.order_status){var i=s.name;Swal.fire({type:"info",title:"Opsss!!",text:"Order reviewed by: "+i+"."}).then((function(t){e.fetchPendingOrder()}))}else e.$router.push({name:"view-order",params:{ticketId:e.encryptTicket(t)}})}))},viewOrderHistory:function(t,e){this.$router.push({name:"view-order-history",params:{ticketId:this.encryptTicket(t),mop:this.encryptTicket(e)}})},getServerDateTime:function(){var t=this;axios.get("/order/server_datetime").then((function(e){t.date=new Date(e.data).toISOString(),t.dateToday=new Date(e.data).toISOString()}))},checkTime:function(t){var e=new Date(t);return{getTime:e.getTime(),getHis:e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()}}},mounted:function(){this.fetchPendingOrder()},filters:{moment:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return moment(t).format("MMMM DD, YYYY")})),momentTime:function(t){return moment(t).format("MMMM DD, YYYY, h:mm A")}},watch:{reloadOnGoingProcess:function(){this.fetchPendingOrder()}}},u=Object(c.a)(m,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-sm table-hover",attrs:{id:"dt-transaction-list"}},[t._m(0),t._v(" "),Object.keys(t.getList).length>0?a("tbody",t._l(t.getList,(function(e,s,i){return a("tr",{key:i},[a("td",[1===e[0].type?a("i",{staticClass:"remixicon-phone-line"}):3===e[0].type?a("i",{staticClass:"remixicon-computer-line"}):a("i",{staticClass:"remixicon-smartphone-line"})]),t._v(" "),a("td",[a("span",{staticClass:"font-weight-bold text-dark"},[t._v(t._s(e[0].ticket))])]),t._v(" "),a("td",[a("span",{staticClass:"font-weight-bold text-dark"},[t._v(t._s(e[0].customer_delivery_info.lastname+", "+e[0].customer_delivery_info.firstname))])]),t._v(" "),a("td",[a("span",{staticStyle:{display:"none"}},[t._v(t._s(t.checkTime(e[0].pickup_at).getTime))]),t._v(" "),"0:0:0"===t.checkTime(e[0].pickup_at).getHis?a("span",{staticClass:"font-weight-bold text-dark"},[t._v(t._s(t._f("moment")(e[0].pickup_at)))]):a("span",{staticClass:"font-weight-bold text-dark"},[t._v(t._s(t._f("momentTime")(e[0].pickup_at)))])]),t._v(" "),a("td",[!0!==t.isPending(e)||0!==e[0].cancel_status||null!==e[0].customer_order_detail&&0!==e[0].customer_order_detail.cancelled_status||!1!==t.isPrepared(e)?!1!==t.isPending(e)||0!==e[0].cancel_status||null!==e[0].customer_order_detail&&0!==e[0].customer_order_detail.cancelled_status||!1!==t.isPrepared(e)?(!1!==t.isPending(e)||0!==e[0].cancel_status||null!==e[0].customer_order_detail&&0!==e[0].customer_order_detail.cancelled_status||!0!==t.isPrepared(e)||0!==e[0].tags.length)&&(!1!==t.isPending(e)||0!==e[0].cancel_status||null!==e[0].customer_order_detail&&0!==e[0].customer_order_detail.cancelled_status||!0!==t.isPrepared(e)||0!==e[0].tags[0].trans_status||0!==e[0].tags[0].delevered_status)?!1!==t.isPending(e)||0!==e[0].cancel_status||null!==e[0].customer_order_detail&&0!==e[0].customer_order_detail.cancelled_status||!0!==t.isPrepared(e)||1!==e[0].tags[0].trans_status||0!==e[0].tags[0].delevered_status||0!==e[0].tags[0].complete_status?!1!==t.isPending(e)||0!==e[0].cancel_status||null!==e[0].customer_order_detail&&0!==e[0].customer_order_detail.cancelled_status||!0!==t.isPrepared(e)||1!==e[0].tags[0].trans_status||1!==e[0].tags[0].delevered_status||0!==e[0].tags[0].complete_status?!1!==t.isPending(e)||0!==e[0].cancel_status||null!==e[0].customer_order_detail&&0!==e[0].customer_order_detail.cancelled_status||!0!==t.isPrepared(e)||1!==e[0].tags[0].trans_status||1!==e[0].tags[0].delevered_status||1!==e[0].tags[0].complete_status?a("span",{staticClass:"badge badge-danger"},[t._v("Cancelled Order")]):a("span",{staticClass:"badge badge-purple"},[t._v("Remitted")]):a("span",{staticClass:"badge badge-pink"},[t._v("Delivered")]):a("span",{staticClass:"badge badge-pink"},[t._v("In Transit")]):a("span",{staticClass:"badge badge-success"},[t._v("For Pick Up")]):a("span",{staticClass:"badge badge-primary"},[t._v("Preparing Order")]):a("span",{staticClass:"badge badge-info"},[t._v("Pending Order")])]),t._v(" "),a("td",{attrs:{align:"center"}},[!1===t.isPending(e)&&(null===e[0].customer_order_detail||0===e[0].customer_order_detail.cancelled_status)&&!0===t.isPrepared(e)&&e[0].tags.length>0&&1===e[0].tags[0].trans_status&&0===e[0].tags[0].delevered_status&&0===e[0].tags[0].complete_status||!1===t.isPending(e)&&(null===e[0].customer_order_detail||0===e[0].customer_order_detail.cancelled_status)&&!0===t.isPrepared(e)&&e[0].tags.length>0&&1===e[0].tags[0].trans_status&&1===e[0].tags[0].delevered_status&&0===e[0].tags[0].complete_status||!1===t.isPending(e)&&(null===e[0].customer_order_detail||0===e[0].customer_order_detail.cancelled_status)&&!0===t.isPrepared(e)&&e[0].tags.length>0&&1===e[0].tags[0].trans_status&&1===e[0].tags[0].delevered_status&&1===e[0].tags[0].complete_status?a("button",{staticClass:"btn btn-bordered-warning btn-sm waves-effect waves-light",on:{click:function(a){return t.viewOrderHistory(e[0].ticket_id,0)}}},[t._v("\n              View\n            ")]):a("button",{staticClass:"btn btn-bordered-warning btn-sm waves-effect waves-light",on:{click:function(a){return t.viewOrder(e[0].ticket_id)}}},[t._v("\n              View\n            ")]),t._v(" "),3===e[0].locate_tenant.global_cat_id?a("button",{staticClass:"btn tagForPickUp btn-bordered-warning btn-sm waves-effect waves-light",attrs:{disabled:!0===t.isCancelled(e)||!0===t.isPending(e)||!0===t.isPrepared(e)},on:{click:function(a){return t.tfpElectronic(s,e[0].customer_id)}}},[t._v("\n              Tag for Pick Up\n            ")]):a("button",{staticClass:"btn tagForPickUp btn-bordered-warning btn-sm waves-effect waves-light",attrs:{disabled:!0===t.isCancelled(e)||!0===t.isPending(e)||!0===t.isPrepared(e)},on:{click:function(a){return t.tagForPickUp(s,e[0].customer_id)}}},[t._v("\n              Tag for Pick Up\n            ")])])])})),0):t._e()]),t._v(" "),a("div",{staticClass:"modal fade",staticStyle:{display:"none"},attrs:{id:"container_type",tabindex:"-1",role:"dialog","aria-labelledby":"myModalLabel","aria-hidden":"true"}},[a("container-type",{attrs:{productItem:t.productItem}})],1)])])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th"),t._v(" "),a("th",[t._v("Ticket #")]),t._v(" "),a("th",[t._v("Customer's Name")]),t._v(" "),a("th",[t._v("Date and Time for Delivery")]),t._v(" "),a("th",[t._v("Transaction Status")]),t._v(" "),a("th",[t._v("Action")])])])}],!1,null,null,null).exports,_=a("o0o1"),p=a.n(_);i.a.component(n.HasError.name,n.HasError),i.a.component(n.AlertError.name,n.AlertError);var v={name:"EditCustomerBillComponent",props:["orderDetails","vehicle_list"],data:function(){return{no_rider:null,customerBillForm:new n.Form({grandTotal:0,tag_riders_id:null,ticket_id:null,delivery_charge:0,amount:0,change:0,discounted_amt:0})}},computed:{computedTotalPrice:function(){return parseFloat(this.customerBillForm.grandTotal)-parseFloat(this.customerBillForm.discounted_amt)}},methods:{fetchCustomerBill:function(t){var e=this;axios.post("/order/fetch_customer_bill",t).then((function(t){var a=t.data;e.customerBillForm.delivery_charge=parseFloat(a.delivery_charge),e.customerBillForm.amount=1*parseFloat(a.amount),e.customerBillForm.change=a.change,e.customerBillForm.discounted_amt=e.calculateDiscountedAmt(a.discounted_amount),e.customerGrandTotal(a.grand_total)}))},calculateDiscountedAmt:function(t){var e=0;return t.forEach((function(t){e+=1*parseFloat(t.discount)})),e},customerGrandTotal:function(t){var e=0;t.forEach((function(t){e+=parseFloat(t.total_price)})),this.customerBillForm.grandTotal=e+parseInt(this.customerBillForm.delivery_charge)},checkCustomerBillForm:function(){var t=this;this.customerBillForm.submit("post","/order/update_customer_bill",{transformRequest:[function(t,e){return Object(r.serialize)(t)}],onUploadProgress:function(t){}}).then((function(e){var a=e.data,s=(e.status,a.message);if("true"===a.last_tenant){var i=a.change;swal({title:"Success!",text:s,type:"success",allowOutsideClick:!1,buttonsStyling:!1,confirmButtonClass:"btn btn-primary"}).then(function(){var t=this;"00.00"==i||"0.00"==i||"0"==i?(this.$parent.tagForInTransit(this.customerBillForm.ticket_id,this.customerBillForm.tag_riders_id),this.customerBillForm.clear(),this.customerBillForm.reset(),$("div#modal-update-bill").modal("hide")):Swal.fire({type:"info",title:"Information",text:"Please prepare for customer change of ₱ "+i}).then((function(e){t.$parent.tagForInTransit(t.customerBillForm.ticket_id,t.customerBillForm.tag_riders_id),t.customerBillForm.clear(),t.customerBillForm.reset(),$("div#modal-update-bill").modal("hide")}))}.bind(t))}else swal({title:"Success!",text:s,type:"success",allowOutsideClick:!1,buttonsStyling:!1,confirmButtonClass:"btn btn-primary"}).then(function(){this.$parent.tagForInTransit(this.customerBillForm.ticket_id,this.customerBillForm.tag_riders_id),this.customerBillForm.clear(),this.customerBillForm.reset(),$("div#modal-update-bill").modal("hide")}.bind(t))})).catch((function(e){t.clickSubmit=!1;var a=e.response,s=a.data,i=a.status;if(401===i)Swal.fire({type:"warning",title:"Warning",text:"Session has been expired."});else if(422===i){var n=s.message;Swal.fire({type:"warning",title:"Warning",text:n})}else Swal.fire({type:"error",title:"Error",text:"Oops, something went wrong!"})}))}},watch:{orderDetails:function(t){this.customerBillForm.ticket_id=t.ticket_id,this.customerBillForm.tag_riders_id=t.tag_riders_id,this.no_rider=t.no_rider,this.fetchCustomerBill(t)}}},h={name:"ViewRiderDetailComponent",props:["riderDetails"],data:function(){return{firstname:null,address:null}},watch:{firstname:function(){console.log(this),alert("asd")}}};function f(t,e,a,s,i,n,r){try{var o=t[n](r),c=o.value}catch(t){return void a(t)}o.done?e(c):Promise.resolve(c).then(s,i)}function b(t){return'<table cellpadding="5" cellspacing="0" border="0" style="padding-left:50px;"><tr><td><span class="font-weight-bold">Order Submitted:</span></td><td><span class="text-danger">(Submitted Order by Tenant)</span></td><td>'+t[9]+'</td></tr><tr><td><span class="font-weight-bold">Food Preparation / Time Consumed:</span></td><td><span class="text-danger">(Order Submission -> For Pick-up Tagging)</span></td><td>'+t[10]+'</td></tr><tr><td><span class="font-weight-bold">Picking Assignment / Time Consumed:</span></td><td><span class="text-danger">(For Pick-up Tagging -> Rider To Setup)</span></td><td>'+t[11]+'</td></tr><tr><td><span class="font-weight-bold">Order Claiming / Time Consumed:</span></td><td><span class="text-danger">(Rider To Setup -> In Transit Taggging by Tenant)</span></td><td>'+t[12]+"</td></tr></table>"}var g={name:"ForPickUpComponent",components:{EditCustomerBill:Object(c.a)(v,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-dialog modal-lg"},[a("div",{staticClass:"modal-content"},[t._m(0),t._v(" "),a("form",{staticClass:"form-horizontal",attrs:{role:"form",method:"post",enctype:"multipart/form-data"},on:{submit:function(e){return e.preventDefault(),t.checkCustomerBillForm(e)}}},[a("div",{staticClass:"modal-body p-4"},[a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-bordered",attrs:{width:"100%"}},[t._m(1),t._v(" "),a("tbody",t._l(t.vehicle_list,(function(e,s){return a("tr",{key:s},[a("td",{attrs:{width:"75%"}},[t._v(t._s(e.vehicle.transpo_name))]),t._v(" "),a("td",{attrs:{align:"right"}},[t._v(t._s(e.count))])])})),0)])]),t._v(" "),a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-bordered",attrs:{width:"100%"}},[t._m(2),t._v(" "),a("tbody",[a("tr",[a("td",{attrs:{width:"75%"}},[t._v("Grand Total")]),t._v(" "),a("td",{attrs:{align:"right"}},[t._v("\n                  ₱ "+t._s(t._f("numberFormat")(t.computedTotalPrice))+"\n                ")])]),t._v(" "),a("tr",[a("td",[t._v("New Rider's Fee")]),t._v(" "),a("td",{attrs:{align:"right"}},[t._v("\n                  ₱ "+t._s(t._f("numberFormat")(t.customerBillForm.delivery_charge))+"\n                ")])]),t._v(" "),a("tr",[a("td",[t._v("Discounted Amount")]),t._v(" "),a("td",{attrs:{align:"right"}},[t._v("\n                  ₱ "+t._s(t._f("numberFormat")(t.customerBillForm.discounted_amt))+"\n                ")])]),t._v(" "),a("tr",[a("td",[t._v("Customer Tender")]),t._v(" "),a("td",{attrs:{align:"right"}},[t._v("\n                  ₱ "+t._s(t._f("numberFormat")(t.customerBillForm.amount))+"\n                ")])]),t._v(" "),a("tr",[a("td",[t._v("Change")]),t._v(" "),a("td",{attrs:{align:"right"}},[t._v("\n                  ₱ "+t._s(t._f("numberFormat")(t.customerBillForm.change))+"\n                ")])])])])])]),t._v(" "),t._m(3)])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-header"},[e("h4",{staticClass:"modal-title"},[this._v("Update Customer Tender")]),this._v(" "),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-hidden":"true"}},[this._v("\n        ×\n      ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",[this._v("Vehicle Type")]),this._v(" "),e("th",[this._v("No. of Rider")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",{attrs:{colspan:"2"}},[this._v("Order Summary")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-secondary waves-effect",attrs:{type:"button","data-dismiss":"modal"}},[this._v("\n          Close\n        ")]),this._v(" "),e("button",{staticClass:"btn btn-info waves-effect waves-light",attrs:{type:"submit"}},[this._v("\n          Ok\n        ")])])}],!1,null,null,null).exports,ViewRiderDetail:Object(c.a)(h,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-dialog modal-lg"},[a("div",{staticClass:"modal-content"},[t._m(0),t._v(" "),a("div",{staticClass:"modal-body p-4"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("ul",{staticClass:"nav nav-tabs"},t._l(t.riderDetails.riders_details,(function(e,s){return a("li",{key:s,staticClass:"nav-item"},[a("a",{staticClass:"nav-link",class:0===s?"active":"",attrs:{href:"#rider_"+s,"data-toggle":"tab","aria-expanded":"false"}},[t._m(1,!0),t._v(" "),a("span",{staticClass:"d-none d-sm-inline-block"},0===s?[t._v("Main Rider")]:[t._v("Support Rider")])])])})),0),t._v(" "),a("div",{staticClass:"tab-content"},t._l(t.riderDetails.riders_details,(function(e,s){return a("div",{key:s,staticClass:"tab-pane fade",class:0===s?"show active":"",attrs:{id:"rider_"+s}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("h4",[t._v("Rider's Information")]),t._v(" "),a("p",[t._v("Rider's Picture")]),t._v(" "),a("img",{attrs:{src:t.$root.riderAccess+""+e.rider_detail.r_picture,width:"130",height:"150",alt:"Rider's Picture"}})]),t._v(" "),a("div",{staticClass:"col-md-6"},[a("h4",[t._v("Rider's Motorcycle Information")]),t._v(" "),a("p",[t._v("Rider's Motorcycle Picture")]),t._v(" "),a("img",{attrs:{src:t.$root.riderAccess+""+e.rider_detail.rm_picture,width:"130",height:"150",alt:"Rider's Motorcycle Picture"}})])]),t._v(" "),a("hr"),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[t._v("Firstname")]),t._v(" "),a("input",{staticClass:"form-control",attrs:{type:"text",readonly:""},domProps:{value:e.rider_detail.r_firstname}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[t._v("Lastname")]),t._v(" "),a("input",{staticClass:"form-control",attrs:{type:"text",readonly:""},domProps:{value:e.rider_detail.r_lastname}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[t._v("Gender")]),t._v(" "),a("input",{staticClass:"form-control",attrs:{type:"text",readonly:""},domProps:{value:e.rider_detail.r_gender}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[t._v("Mobile No.")]),t._v(" "),a("input",{staticClass:"form-control",attrs:{type:"text",readonly:""},domProps:{value:e.rider_detail.r_mobile}})])]),t._v(" "),a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[t._v("Brand")]),t._v(" "),a("input",{staticClass:"form-control",attrs:{type:"text",readonly:""},domProps:{value:e.rider_detail.rm_brand}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[t._v("Model")]),t._v(" "),a("input",{staticClass:"form-control",attrs:{type:"text",readonly:""},domProps:{value:e.rider_detail.rm_model}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[t._v("Color")]),t._v(" "),a("input",{staticClass:"form-control",attrs:{type:"text",readonly:""},domProps:{value:e.rider_detail.rm_color}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[t._v("Plate Number")]),t._v(" "),a("input",{staticClass:"form-control",attrs:{type:"text",readonly:""},domProps:{value:e.rider_detail.rm_plate_num}})])])])])})),0)])])]),t._v(" "),t._m(2)])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-header"},[e("h4",{staticClass:"modal-title"},[this._v("View Rider Details")]),this._v(" "),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-hidden":"true"}},[this._v("\n        ×\n      ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"d-inline-block d-sm-none"},[e("i",{staticClass:"fas fa-motorcycle"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-secondary waves-effect",attrs:{type:"button","data-dismiss":"modal"}},[this._v("\n        Close\n      ")])])}],!1,null,null,null).exports},data:function(){return{table_data:[],table:{},infos:{},rider_infos:{},vehicle_list:[]}},computed:{getList:function(){return this.table_data}},methods:{fetchForPickingList:function(){var t=this;axios.get("/pickup/fetch_for_pickup_list").then((function(e){t.table_data=e.data;var a=t;setTimeout((function(){a.table=$("#dt-pickup-list").DataTable({destroy:!0,order:[[3,"asc"]],columnDefs:[{targets:[0],className:"details-control",orderable:!1,data:null,defaultContent:""},{targets:[8],className:"text-center",orderable:!1,width:"15%"},{targets:[9,10,11,12],visible:!1}],language:{paginate:{previous:"<i class='mdi mdi-chevron-left'>",next:"<i class='mdi mdi-chevron-right'>"}},drawCallback:function(){$(".dataTables_paginate > .pagination").addClass("pagination-rounded")}}),$("#dt-pickup-list tbody").on("click","td.details-control",(function(){var t=$(this).closest("tr"),e=a.table.row(t);e.child.isShown()?(e.child.hide(),t.removeClass("shown")):(e.child(b(e.data())).show(),t.addClass("shown"))}))}),100)}))},customerDetails:function(t){var e=null,a=null,s=null,i=null,n=null,r=null;for(var o in t){var c=t[o].customer_delivery_info.complete_address+",";null!=t[o].customer_delivery_info.complete_address&&""!=t[o].customer_delivery_info.complete_address||(c=""),e="".concat(t[o].customer_delivery_info.lastname,", ").concat(t[o].customer_delivery_info.firstname),n=t[o].ticket.type,a=t[o].customer_delivery_info.mobile_number,s=t[o].customer_delivery_info.telephone_number,i="".concat(c," ").concat(t[o].customer_delivery_info.street_purok,", ").concat(t[o].customer_delivery_info.barangay.brgy_name,", ").concat(t[o].customer_delivery_info.barangay.town.town_name,", ").concat(t[o].customer_delivery_info.barangay.town.prov_name),r=t[o].ticket.ticket;break}return this.customerName=e,{customerName:e,mobileNo:a,telephoneNo:s,address:i,orderPlatform:n,ticket_id:r}},riderDetail:function(t){return{riderName:"".concat(t.rider_detail.r_lastname,", ").concat(t.rider_detail.r_firstname)}},priceDetail:function(t){var e=0;return t.forEach((function(t){0===t.canceled_status&&1===t.status&&(parseInt(t.qty)>parseInt(t.quantity)||(e+=parseFloat(t.total_price)))})),{totalPrice:e}},orderTimeFrame:function(t){var e={timestamp:null,consumed:null},a={timestamp:null,consumed:null},s={timestamp:null,consumed:null},i={timestamp:null,consumed:null};return e.timestamp=t[0].prepared_at,a.timestamp=t[0].tag_status_at?t[0].tag_status_at:null,a.consumed=a.timestamp?moment.duration(moment(a.timestamp).diff(moment(e.timestamp),"seconds"),"seconds").format("h [hrs], m [min], s [secs]"):"--, --",s.timestamp=t[0].r_setup_stat_at?t[0].r_setup_stat_at:null,s.consumed=s.timestamp?moment.duration(moment(s.timestamp).diff(moment(a.timestamp),"seconds"),"seconds").format("h [hrs], m [min], s [secs]"):"--, --",i.timestamp=t[0].trans_at?t[0].trans_at:null,i.consumed=i.timestamp?moment.duration(moment(i.timestamp).diff(moment(s.timestamp),"seconds"),"seconds").format("h [hrs], m [min], s [secs]"):"--, --",{orderSubmitted:e,preparation:a,picking:s,intransit:i}},tagForInTransit:function(t,e){var a=this;Swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",type:"warning",allowOutsideClick:!1,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, please proceed!"}).then((function(s){s.value&&(a.params={ticket_id:t,id:e},axios.post("/pickup/tag_for_in_transit",a.params).then((function(t){var e=t.data,s=(t.status,e.message);Swal.fire({type:"success",title:"Success",text:s}).then((function(t){a.table.clear().destroy(),a.table_data=[],a.fetchForPickingList();var e=a;$("#dt-pickup-list tbody").on("click","td.details-control",(function(){var t=$(this).closest("tr"),a=e.table.row(t);a.child.isShown()?(a.child.hide(),t.removeClass("shown")):(a.child(b(a.data())).show(),t.addClass("shown"))}))}))})))}))},updateCustomerTender:function(t,e,a){var s,i=this;return(s=p.a.mark((function s(){var n,r;return p.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return i.infos={ticket_id:t,tag_riders_id:e,no_rider:a},s.next=3,axios.get("vehicle/count_rider/".concat(t));case 3:n=s.sent,r=n.data,i.vehicle_list=r,$("div#modal-update-bill").modal({backdrop:"static",keyboard:!1,show:!0});case 7:case"end":return s.stop()}}),s)})),function(){var t=this,e=arguments;return new Promise((function(a,i){var n=s.apply(t,e);function r(t){f(n,a,i,r,o,"next",t)}function o(t){f(n,a,i,r,o,"throw",t)}r(void 0)}))})()},viewRidersInfo:function(t){this.rider_infos={riders_details:t},$("div#modal-rider-detail").modal({backdrop:"static",keyboard:!1,show:!0})}},mounted:function(){this.fetchForPickingList()}},w=Object(c.a)(g,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-sm table-hover",attrs:{id:"dt-pickup-list"}},[t._m(0),t._v(" "),a("tbody",t._l(t.getList,(function(e,s,i){return a("tr",{key:i},[a("td"),t._v(" "),a("td",[1===t.customerDetails(e).orderPlatform?a("i",{staticClass:"remixicon-phone-line"}):3===t.customerDetails(e).orderPlatform?a("i",{staticClass:"remixicon-computer-line"}):a("i",{staticClass:"remixicon-smartphone-line"})]),t._v(" "),a("td",[a("a",{attrs:{href:"javascript:void(0);"},on:{click:function(a){return t.viewRidersInfo(e[0].tag_riders)}}},[a("i",{staticClass:"fa fa-eye",attrs:{title:"View Rider's Info"}})])]),t._v(" "),e[0].tag_riders.length>1?a("td",[a("select",{staticClass:"custom-select"},t._l(e[0].tag_riders,(function(e,s){return a("option",{key:s,attrs:{value:""}},[t._v(t._s(t.riderDetail(e).riderName))])})),0)]):a("td",[a("span",{staticClass:"font-weight-bold text-dark"},[t._v(t._s(t.riderDetail(e[0].tag_riders[0]).riderName))])]),t._v(" "),e[0].tag_riders.length>1?a("td",[a("select",{staticClass:"custom-select"},t._l(e[0].tag_riders,(function(e,s){return a("option",{key:s,attrs:{value:""}},[t._v(t._s(e.rider_detail.vehicle.transpo_name))])})),0)]):a("td",[a("span",{staticClass:"font-weight-bold text-dark"},[t._v(t._s(e[0].tag_riders[0].rider_detail.vehicle.transpo_name))])]),t._v(" "),a("td",[a("span",{staticClass:"font-weight-bold text-dark"},[t._v(t._s(t.customerDetails(e).ticket_id))])]),t._v(" "),a("td",[a("span",{staticClass:"font-weight-bold text-dark"},[t._v(t._s(t.customerDetails(e).customerName))])]),t._v(" "),a("td",[a("span",{staticClass:"font-weight-bold text-dark"},[t._v(t._s(t.customerDetails(e).address))])]),t._v(" "),a("td",[0===e[0].trans_status&&0!==e[0].tag_status&&e[0].tag_riders.length>1&&1===e[0].customer_order_detail.last_tenant?a("button",{staticClass:"btn btn-bordered-warning btn-sm waves-effect waves-light btn-block",on:{click:function(a){return t.updateCustomerTender(s,e[0].tag_riders_id,e[0].tag_riders.length)}}},[t._v("\n              Tag for In Transit\n            ")]):0===e[0].trans_status&&0!==e[0].tag_status?a("button",{staticClass:"btn btn-bordered-warning btn-sm waves-effect waves-light btn-block",on:{click:function(a){return t.tagForInTransit(s,e[0].tag_riders_id)}}},[t._v("\n              Tag for In Transit\n            ")]):a("button",{staticClass:"btn  btn-bordered-warning btn-sm waves-effect waves-light btn-block",attrs:{disabled:""}},[t._v("\n              In Transit\n            ")])]),t._v(" "),a("td",[t._v("\n            "+t._s(t._f("dateTimeFormat")(t.orderTimeFrame(e).orderSubmitted.timestamp))+"\n          ")]),t._v(" "),a("td",[t._v("\n            "+t._s(t._f("dateTimeFormat")(t.orderTimeFrame(e).preparation.timestamp))+"\n            / "+t._s(t.orderTimeFrame(e).preparation.consumed)+"\n          ")]),t._v(" "),a("td",[t._v("\n            "+t._s(t._f("dateTimeFormat")(t.orderTimeFrame(e).picking.timestamp))+" /\n            "+t._s(t.orderTimeFrame(e).picking.consumed)+"\n          ")]),t._v(" "),a("td",[t.orderTimeFrame(e).intransit.timestamp?a("span",[t._v("\n              "+t._s(t._f("dateTimeFormat")(t.orderTimeFrame(e).intransit.timestamp))+"\n              / "+t._s(t.orderTimeFrame(e).intransit.consumed)+"\n            ")]):a("span",[t._v("-/--/----, -:-- --")])])])})),0)])]),t._v(" "),a("div",{staticClass:"modal fade",staticStyle:{display:"none"},attrs:{id:"modal-update-bill",tabindex:"-1",role:"dialog","aria-labelledby":"myModalLabel","aria-hidden":"true"}},[a("edit-customer-bill",{attrs:{orderDetails:t.infos,vehicle_list:t.vehicle_list}})],1),t._v(" "),a("div",{staticClass:"modal fade",staticStyle:{display:"none"},attrs:{id:"modal-rider-detail",tabindex:"-1",role:"dialog","aria-labelledby":"myModalLabel","aria-hidden":"true"}},[a("view-rider-detail",{attrs:{riderDetails:t.rider_infos}})],1)])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th"),t._v(" "),a("th"),t._v(" "),a("th"),t._v(" "),a("th",[t._v("Rider's Name")]),t._v(" "),a("th",[t._v("Vehicle Type")]),t._v(" "),a("th",[t._v("Ticket #")]),t._v(" "),a("th",[t._v("Customer's Name")]),t._v(" "),a("th",[t._v("Location/Destination")]),t._v(" "),a("th",[t._v("Action")]),t._v(" "),a("th"),t._v(" "),a("th"),t._v(" "),a("th"),t._v(" "),a("th")])])}],!1,null,null,null).exports;a("RiPy");i.a.component(n.HasError.name,n.HasError),i.a.component(n.AlertError.name,n.AlertError);var y={name:"RemitAmountComponent",props:["orderDetails"],data:function(){return{remittanceForm:new n.Form({ticket_id:null,rider_id:null,id:null,total_amount:0,total_remitted:0,change:0,amount_remitted:null,dateToday:null})}},methods:{checkRemittanceForm:function(){var t=this;this.remittanceForm.submit("post","/rider_accountability/tag_for_successfully_delivered",{transformRequest:[function(t,e){return Object(r.serialize)(t)}],onUploadProgress:function(t){}}).then((function(e){var a=e.data,s=(e.status,a.message);swal({title:"Success!",text:s,type:"success",allowOutsideClick:!1,buttonsStyling:!1,confirmButtonClass:"btn btn-primary"}).then(function(){this.$parent.fetchDeliveredOrderList(this.remittanceForm.dateToday),this.remittanceForm.clear(),this.remittanceForm.reset(),$("div#remit-amount").modal("hide")}.bind(t))})).catch((function(t){var e=t.response,a=e.data,s=e.status;if(401===s)Swal.fire({type:"warning",title:"Warning",text:"Session has been expired."});else if(422===s){var i=a.message;Swal.fire({type:"warning",title:"Warning",text:i})}else Swal.fire({type:"error",title:"Error",text:"Oops, something went wrong!"})}))}},watch:{orderDetails:function(t){var e=0;this.remittanceForm.ticket_id=t.ticket_id,this.remittanceForm.rider_id=t.rider_id,this.remittanceForm.id=t.id,this.remittanceForm.total_amount=parseFloat(t.total_amt),this.remittanceForm.change=parseFloat(t.change),this.remittanceForm.dateToday=t.dateToday,e=parseFloat(t.total_amt)+parseFloat(t.change),this.remittanceForm.total_remitted=1*e.toFixed(2)}}};function C(t,e,a,s,i,n,r){try{var o=t[n](r),c=o.value}catch(t){return void a(t)}o.done?e(c):Promise.resolve(c).then(s,i)}var k={name:"RidersAccountabilityComponent",components:{RemitAmount:Object(c.a)(y,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[t._m(0),t._v(" "),a("form",{attrs:{method:"post"},on:{submit:function(e){return e.preventDefault(),t.checkRemittanceForm(e)}}},[a("div",{staticClass:"modal-body p-4"},[a("table",{staticClass:"table table-sm table-bordered",attrs:{width:"100%"}},[a("tr",[t._m(1),t._v(" "),a("td",{attrs:{align:"right"}},[t._v("\n              ₱ "+t._s(t._f("numberFormat")(t.remittanceForm.total_amount))+"\n            ")])]),t._v(" "),a("tr",[t._m(2),t._v(" "),a("td",{attrs:{align:"right"}},[t._v("\n              ₱ "+t._s(t._f("numberFormat")(t.remittanceForm.change))+"\n            ")])]),t._v(" "),a("tr",[t._m(3),t._v(" "),a("td",{attrs:{align:"right"}},[a("span",{staticClass:"font-weight-bold text-danger"},[t._v("₱ "+t._s(t._f("numberFormat")(t.remittanceForm.total_remitted)))])])])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"field-1"}},[t._v("Amount Remitted")]),t._v(" "),a("span",{staticClass:"text-danger"},[t._v("*")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.remittanceForm.amount_remitted,expression:"remittanceForm.amount_remitted",modifiers:{number:!0}}],staticClass:"form-control",class:{"is-invalid":t.remittanceForm.errors.has("amount_remitted")},attrs:{type:"text",id:"field-1",autocomplete:"off"},domProps:{value:t.remittanceForm.amount_remitted},on:{input:function(e){e.target.composing||t.$set(t.remittanceForm,"amount_remitted",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),a("has-error",{attrs:{form:t.remittanceForm,field:"amount_remitted"}})],1)])])]),t._v(" "),t._m(4)])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-header"},[e("h4",{staticClass:"modal-title"},[this._v("Remittance Details")]),this._v(" "),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-hidden":"true"}},[this._v("\n        ×\n      ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",{attrs:{width:"75%"}},[e("span",{staticClass:"font-weight-bold"},[this._v("Price")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",{attrs:{width:"75%"}},[e("span",{staticClass:"font-weight-bold"},[this._v("Change Given")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",{attrs:{width:"75%"}},[e("span",{staticClass:"font-weight-bold"},[this._v("Total Rider's Accountability")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-secondary waves-effect",attrs:{type:"button","data-dismiss":"modal"}},[this._v("\n          Close\n        ")]),this._v(" "),e("button",{staticClass:"btn btn-info waves-effect waves-light",attrs:{type:"submit"}},[this._v("\n          Submit\n        ")])])}],!1,null,null,null).exports},data:function(){return{table_data:{},table:{},orderDetails:{},deliverySchedules:[],dateToday:null}},computed:{getList:function(){return this.table_data}},methods:{fetchServerDate:function(){var t,e=this;return(t=p.a.mark((function t(){var a,s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,axios.get("/rider_accountability/server_date");case 2:a=t.sent,s=a.data,e.deliverySchedules=s.deliverySchedules,e.dateToday=s.deliverySchedules[0].date;case 6:case"end":return t.stop()}}),t)})),function(){var e=this,a=arguments;return new Promise((function(s,i){var n=t.apply(e,a);function r(t){C(n,s,i,r,o,"next",t)}function o(t){C(n,s,i,r,o,"throw",t)}r(void 0)}))})()},fetchDeliveredOrderList:function(t){var e=this;$.fn.DataTable.isDataTable("#dt-delivered-list")&&(this.table.destroy(),this.table_data=[]),axios.get("/rider_accountability/fetch_delivered_order_list/".concat(t)).then((function(t){e.table_data=t.data;var a=e;setTimeout((function(){a.table=$("#dt-delivered-list").removeAttr("width").DataTable({destroy:!0,order:[[3,"asc"]],columnDefs:[{targets:[0],className:"details-control",orderable:!1,data:null,defaultContent:""},{targets:[5,6,7],orderable:!1},{targets:[9],className:"text-center",orderable:!1,width:"20%"},{targets:[10,11,12,13,14,15],visible:!1}],language:{paginate:{previous:"<i class='mdi mdi-chevron-left'>",next:"<i class='mdi mdi-chevron-right'>"}},drawCallback:function(){$(".dataTables_paginate > .pagination").addClass("pagination-rounded")}}),$("#dt-delivered-list tbody").on("click","td.details-control",(function(){var t,e=$(this).closest("tr"),s=a.table.row(e);s.child.isShown()?(s.child.hide(),e.removeClass("shown")):(s.child((t=s.data(),'<table cellpadding="5" cellspacing="0" border="0" style="padding-left:50px;"><tr><td><span class="font-weight-bold">Order Submitted:</span></td><td><span class="text-danger">(Submitted Order by Tenant)</span></td><td>'+t[10]+'</td></tr><tr><td><span class="font-weight-bold">Food Preparation / Time Consumed:</span></td><td><span class="text-danger">(Order Submission -> For Pick-up Tagging)</span></td><td>'+t[11]+'</td></tr><tr><td><span class="font-weight-bold">Picking Assignment / Time Consumed:</span></td><td><span class="text-danger">(For Pick-up Tagging -> Rider To Setup)</span></td><td>'+t[12]+'</td></tr><tr><td><span class="font-weight-bold">Order Claiming / Time Consumed:</span></td><td><span class="text-danger">(Rider To Setup -> In Transit Taggging by Tenant)</span></td><td>'+t[13]+'</td></tr><tr><td><span class="font-weight-bold">Delivery Period / Time Consumed:</span></td><td><span class="text-danger">(In Transit Taggging by Tenant -> Customer)</span></td><td>'+t[14]+'</td></tr><tr><td><span class="font-weight-bold">Completed Period / Time Consumed:</span></td><td><span class="text-danger">(Remitted Amount by Rider -> Tagging Succesfully Remitted by Tenant)</span></td><td>'+t[15]+"</td></tr></table>")).show(),e.addClass("shown"))}))}),100)}))},tagForSuccessfullyDelivered:function(t,e,a,s,i){this.orderDetails={rider_id:t,ticket_id:e,id:a,total_amt:s,change:i,dateToday:this.dateToday},$("div#remit-amount").modal({backdrop:"static",keyboard:!1,show:!0})},customerDetails:function(t){var e=null,a=null,s=null,i=null,n=null,r=null;for(var o in t){e="".concat(t[o].customer_delivery_info.lastname,", ").concat(t[o].customer_delivery_info.firstname),n=t[o].ticket.type,a=t[o].customer_delivery_info.mobile_number,s=t[o].customer_delivery_info.telephone_number,i="".concat(t[o].customer_delivery_info.complete_address,", ").concat(t[o].customer_delivery_info.street_purok,", ").concat(t[o].customer_delivery_info.barangay.brgy_name,", ").concat(t[o].customer_delivery_info.barangay.town.town_name,", ").concat(t[o].customer_delivery_info.barangay.town.prov_name),r=t[o].ticket.ticket;break}return this.customerName=e,{customerName:e,mobileNo:a,telephoneNo:s,address:i,orderPlatform:n,ticket_id:r}},riderDetail:function(t){var e=null;for(var a in t){e="".concat(t[a].rider_detail.r_lastname,", ").concat(t[a].rider_detail.r_firstname);break}return{riderName:e}},priceDetail:function(t){var e=0,a=0;return t.forEach((function(t){for(var a in t.product_prices)null==t.uom_id&&""==t.uom_id||(t.product_prices[a].uom_id,t.uom_id),t.product_prices[a].stocks;0===t.canceled_status&&1===t.status&&(e+=parseFloat(t.total_price))})),t[0].customer_discounted_amt.forEach((function(t){a+=parseFloat(t.rider_discount)})),{totalPrice:e=parseFloat(e)-parseFloat(a)}},orderTimeFrame:function(t){var e={timestamp:null,consumed:null},a={timestamp:null,consumed:null},s={timestamp:null,consumed:null},i={timestamp:null,consumed:null},n={timestamp:null,consumed:null},r={timestamp:null,consumed:null};return e.timestamp=t[0].prepared_at,a.timestamp=t[0].tag_status_at?t[0].tag_status_at:null,a.consumed=a.timestamp?moment.duration(moment(a.timestamp).diff(moment(e.timestamp),"seconds"),"seconds").format("h [hrs], m [min], s [secs]"):"--, --",s.timestamp=t[0].r_setup_stat_at?t[0].r_setup_stat_at:null,s.consumed=s.timestamp?moment.duration(moment(s.timestamp).diff(moment(a.timestamp),"seconds"),"seconds").format("h [hrs], m [min], s [secs]"):"--, --",i.timestamp=t[0].trans_at?t[0].trans_at:null,i.consumed=i.timestamp?moment.duration(moment(i.timestamp).diff(moment(s.timestamp),"seconds"),"seconds").format("h [hrs], m [min], s [secs]"):"--, --",n.timestamp=t[0].delevered_at?t[0].delevered_at:null,n.consumed=n.timestamp?moment.duration(moment(n.timestamp).diff(moment(i.timestamp),"seconds"),"seconds").format("h [hrs], m [min], s [secs]"):"--, --",r.timestamp=t[0].completed_at?t[0].completed_at:null,r.consumed=r.timestamp?moment.duration(moment(r.timestamp).diff(moment(n.timestamp),"seconds"),"seconds").format("h [hrs], m [min], s [secs]"):"--, --",{orderSubmitted:e,preparation:a,picking:s,intransit:i,delivered:n,completed:r}}},mounted:function(){this.fetchServerDate()},filters:{moment:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return moment(t).format("MMM DD, YYYY")}))},watch:{dateToday:function(){this.fetchDeliveredOrderList(this.dateToday)}}};function F(t){return'<table cellpadding="5" cellspacing="0" border="0" style="padding-left:50px;"><tr><td><span class="font-weight-bold">Order Submitted:</span></td><td></td><td>'+t[11]+'</td></tr><tr><td><span class="font-weight-bold">Food Preparation / Time Consumed:</span></td><td><span class="text-danger">(Order Submission -> For Pick-up Tagging)</span></td><td>'+t[12]+'</td></tr><tr><td><span class="font-weight-bold">Picking Assignment / Time Consumed:</span></td><td><span class="text-danger">(For Pick-up Tagging -> Rider To Setup)</span></td><td>'+t[13]+'</td></tr><tr><td><span class="font-weight-bold">Order Claiming / Time Consumed:</span></td><td><span class="text-danger">(Rider To Setup -> In Transit Taggging by Tenant)</span></td><td>'+t[14]+'</td></tr><tr><td><span class="font-weight-bold">Delivery Period / Time Consumed:</span></td><td><span class="text-danger">(In Transit Taggging by Tenant -> Customer)</span></td><td>'+t[15]+'</td></tr><tr><td><span class="font-weight-bold">Completed Period / Time Consumed:</span></td><td><span class="text-danger">(Remitted Amount by Rider -> Tagging Succesfully Remitted by Tenant)</span></td><td>'+t[16]+"</td></tr></table>"}var T={name:"RemittanceMonitoringComponent",data:function(){return{table_data:[],table:{}}},computed:{getList:function(){return this.table_data}},methods:{ridersFee:function(t){console.log(t);var e,a=0,s=0;return e=t.customer_bill.delivery_charge,1===t.customer_delivery_info.barangay.town.delivery_charge.length?a=t.customer_delivery_info.barangay.town.delivery_charge[0].fuel_amt:(t.customer_delivery_info.barangay.town.delivery_charge.forEach((function(e){e.brgy_id===t.customer_delivery_info.barangay.brgy_id&&e.town_id===t.customer_delivery_info.barangay.town_id&&(s++,a=e.fuel_amt)})),0===s&&(a=t.customer_delivery_info.barangay.town.delivery_charge.fuel_amt)),{fuel_amt:a,delivery_charge:e}},fetchSuccessfullyDelivedOrder:function(){var t=this;axios.get("/remittance_monitoring/fetch_successfully_deliver_order").then((function(e){t.table_data=e.data;var a=t;setTimeout((function(){a.table=$("#dt-remmitance-list").removeAttr("width").DataTable({destroy:!0,order:[[3,"asc"]],scrollX:!0,columnDefs:[{targets:[0],className:"details-control",orderable:!1,data:null,defaultContent:""},{targets:[11,12,13,14,15,16],visible:!1}],language:{paginate:{previous:"<i class='mdi mdi-chevron-left'>",next:"<i class='mdi mdi-chevron-right'>"}},drawCallback:function(){$(".dataTables_paginate > .pagination").addClass("pagination-rounded")}}),$("#dt-remmitance-list tbody").on("click","td.details-control",(function(){var t=$(this).closest("tr"),e=a.table.row(t);e.child.isShown()?(e.child.hide(),t.removeClass("shown")):(e.child(F(e.data())).show(),t.addClass("shown"))}))}),100)}))},collectRefund:function(t,e,a,s,i,n){var r=this;Swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",type:"warning",allowOutsideClick:!1,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, please proceed!"}).then((function(o){o.value&&(r.params={rider_id:t,ticket_id:e,tenant_id:a,amt_receivable:s,sales:i,expense_account:n},axios.post("/remittance_monitoring/collect_refund",r.params).then((function(t){var e=t.data,a=(t.status,e.message);Swal.fire({type:"success",title:"Success",text:a}).then((function(t){r.table.clear().destroy(),r.table_data=[],r.fetchSuccessfullyDelivedOrder();var e=r;$("#dt-remmitance-list").on("click","td.details-control",(function(){var t=$(this).closest("tr"),a=e.table.row(t);a.child.isShown()?(a.child.hide(),t.removeClass("shown")):(a.child(F(a.data())).show(),t.addClass("shown"))}))}))})))}))},customerDetails:function(t){var e,a,s,i,n,r,o="";return null!==t.customer_delivery_info&&(o=null==t.customer_delivery_info.complete_address||""==t.customer_delivery_info.complete_address?"":t.customer_delivery_info.complete_address+","),e="".concat(t.customer_delivery_info.lastname,", ").concat(t.customer_delivery_info.firstname),n=t.ticket.type,a=t.customer_delivery_info.mobile_number,s=t.customer_delivery_info.telephone_number,i="".concat(o," ").concat(t.customer_delivery_info.street_purok,", ").concat(t.customer_delivery_info.barangay.brgy_name,", ").concat(t.customer_delivery_info.barangay.town.town_name,", ").concat(t.customer_delivery_info.barangay.town.prov_name),r=t.ticket.ticket,this.customerName=e,{customerName:e,mobileNo:a,telephoneNo:s,address:i,orderPlatform:n,ticket_id:r}},riderDetail:function(t){return{riderName:"".concat(t.rider_detail.r_lastname,", ").concat(t.rider_detail.r_firstname)}},priceDetail:function(t){var e=0,a=0;return t.forEach((function(t){var a=null;for(var s in t.product_prices)a=(null==t.uom_id&&""==t.uom_id||(t.product_prices[s].uom_id,t.uom_id),t.product_prices[s].stocks);0===t.canceled_status&&1===t.status&&(parseInt(t.quantity)>parseInt(a)||(e+=parseFloat(t.total_price)))})),t.customer_discounted_amt.forEach((function(t){a+=parseFloat(t.rider_discount)})),{totalPrice:e=parseFloat(e)-parseFloat(a)}},orderTimeFrame:function(t){var e={timestamp:null,consumed:null},a={timestamp:null,consumed:null},s={timestamp:null,consumed:null},i={timestamp:null,consumed:null},n={timestamp:null,consumed:null},r={timestamp:null,consumed:null};return e.timestamp=t.prepared_at,a.timestamp=t.tag_status_at?t.tag_status_at:null,a.consumed=a.timestamp?moment.duration(moment(a.timestamp).diff(moment(e.timestamp),"seconds"),"seconds").format("h [hrs], m [min], s [secs]"):"--, --",s.timestamp=t.r_setup_stat_at?t.r_setup_stat_at:null,s.consumed=s.timestamp?moment.duration(moment(s.timestamp).diff(moment(a.timestamp),"seconds"),"seconds").format("h [hrs], m [min], s [secs]"):"--, --",i.timestamp=t.trans_at?t.trans_at:null,i.consumed=i.timestamp?moment.duration(moment(i.timestamp).diff(moment(s.timestamp),"seconds"),"seconds").format("h [hrs], m [min], s [secs]"):"--, --",n.timestamp=t.delevered_at?t.delevered_at:null,n.consumed=n.timestamp?moment.duration(moment(n.timestamp).diff(moment(i.timestamp),"seconds"),"seconds").format("h [hrs], m [min], s [secs]"):"--, --",r.timestamp=t.completed_at?t.completed_at:null,r.consumed=r.timestamp?moment.duration(moment(r.timestamp).diff(moment(n.timestamp),"seconds"),"seconds").format("h [hrs], m [min], s [secs]"):"--, --",{orderSubmitted:e,preparation:a,picking:s,intransit:i,delivered:n,completed:r}}},mounted:function(){this.fetchSuccessfullyDelivedOrder()}};function x(t){return'<table cellpadding="5" cellspacing="0" border="0" style="padding-left:50px;"><tr><td><span class="font-weight-bold">Order Submitted:</span></td><td></td><td>'+t[10]+'</td></tr><tr><td><span class="font-weight-bold">Food Preparation / Time Consumed:</span></td><td><span class="text-danger">(Order Submission -> For Pick-up Tagging)</span></td><td>'+t[11]+'</td></tr><tr><td><span class="font-weight-bold">Picking Assignment / Time Consumed:</span></td><td><span class="text-danger">(For Pick-up Tagging -> Rider To Setup)</span></td><td>'+t[12]+'</td></tr><tr><td><span class="font-weight-bold">Order Claiming / Time Consumed:</span></td><td><span class="text-danger">(Rider To Setup -> In Transit Taggging by Tenant)</span></td><td>'+t[13]+'</td></tr><tr><td><span class="font-weight-bold">Delivery Period / Time Consumed:</span></td><td><span class="text-danger">(In Transit Taggging by Tenant -> Customer)</span></td><td>'+t[14]+'</td></tr><tr><td><span class="font-weight-bold">Completed Period / Time Consumed:</span></td><td><span class="text-danger">(Remitted Amount by Rider -> Tagging Succesfully Remitted by Tenant)</span></td><td>'+t[15]+"</td></tr></table>"}var S={name:"UnsettledBalanceComponent",data:function(){return{table_data:[],table:{}}},computed:{getList:function(){return this.table_data}},methods:{fetchRemittanceBalance:function(){var t=this;axios.get("/unsettled_balance/fetch_remittance_balance").then((function(e){t.table_data=e.data;var a=t;setTimeout((function(){a.table=$("#dt-unsettled-list").removeAttr("width").DataTable({destroy:!0,order:[[3,"asc"]],scrollX:!0,columnDefs:[{targets:[0],className:"details-control",orderable:!1,data:null,defaultContent:""},{targets:[10,11,12,13,14,15],visible:!1}],language:{paginate:{previous:"<i class='mdi mdi-chevron-left'>",next:"<i class='mdi mdi-chevron-right'>"}},drawCallback:function(){$(".dataTables_paginate > .pagination").addClass("pagination-rounded")}}),$("#dt-unsettled-list tbody").on("click","td.details-control",(function(){var t=$(this).closest("tr"),e=a.table.row(t);e.child.isShown()?(e.child.hide(),t.removeClass("shown")):(e.child(x(e.data())).show(),t.addClass("shown"))}))}),100)}))},collectRefund:function(t,e,a,s,i,n){var r=this;Swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",type:"warning",allowOutsideClick:!1,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, please proceed!"}).then((function(o){o.value&&(r.params={rider_id:t,ticket_id:e,tenant_id:a,amt_receivable:s,sales:i,expense_account:n},axios.post("/remittance_monitoring/collect_refund",r.params).then((function(t){var e=t.data,a=(t.status,e.message);Swal.fire({type:"success",title:"Success",text:a}).then((function(t){r.table.clear().destroy(),r.table_data=[],r.fetchRemittanceBalance();var e=r;$("#dt-unsettled-list").on("click","td.details-control",(function(){var t=$(this).closest("tr"),a=e.table.row(t);a.child.isShown()?(a.child.hide(),t.removeClass("shown")):(a.child(x(a.data())).show(),t.addClass("shown"))}))}))})))}))},customerDetails:function(t){var e=null,a=null,s=null,i=null,n=null,r=null;for(var o in t){e="".concat(t[o].customer_delivery_info.lastname,", ").concat(t[o].customer_delivery_info.firstname),n=t[o].ticket.type,a=t[o].customer_delivery_info.mobile_number,s=t[o].customer_delivery_info.telephone_number,i="".concat(t[o].customer_delivery_info.complete_address,", ").concat(t[o].customer_delivery_info.street_purok,", ").concat(t[o].customer_delivery_info.barangay.brgy_name,", ").concat(t[o].customer_delivery_info.barangay.town.town_name,", ").concat(t[o].customer_delivery_info.barangay.town.prov_name),r=t[o].ticket.ticket;break}return this.customerName=e,{customerName:e,mobileNo:a,telephoneNo:s,address:i,orderPlatform:n,ticket_id:r}},riderDetail:function(t){var e=null;for(var a in t){e="".concat(t[a].rider_detail.r_lastname,", ").concat(t[a].rider_detail.r_firstname);break}return{riderName:e}},priceDetail:function(t){var e=0;return t.forEach((function(t){e+=parseFloat(t.total_price)})),{totalPrice:e}},orderTimeFrame:function(t){var e={timestamp:null,consumed:null},a={timestamp:null,consumed:null},s={timestamp:null,consumed:null},i={timestamp:null,consumed:null},n={timestamp:null,consumed:null},r={timestamp:null,consumed:null};return e.timestamp=t[0].prepared_at,a.timestamp=t[0].tag_status_at?t[0].tag_status_at:null,a.consumed=a.timestamp?moment.duration(moment(a.timestamp).diff(moment(e.timestamp),"seconds"),"seconds").format("h [hrs], m [min], s [secs]"):"--, --",s.timestamp=t[0].r_setup_stat_at?t[0].r_setup_stat_at:null,s.consumed=s.timestamp?moment.duration(moment(s.timestamp).diff(moment(a.timestamp),"seconds"),"seconds").format("h [hrs], m [min], s [secs]"):"--, --",i.timestamp=t[0].trans_at?t[0].trans_at:null,i.consumed=i.timestamp?moment.duration(moment(i.timestamp).diff(moment(s.timestamp),"seconds"),"seconds").format("h [hrs], m [min], s [secs]"):"--, --",n.timestamp=t[0].delevered_at?t[0].delevered_at:null,n.consumed=n.timestamp?moment.duration(moment(n.timestamp).diff(moment(i.timestamp),"seconds"),"seconds").format("h [hrs], m [min], s [secs]"):"--, --",r.timestamp=t[0].completed_at?t[0].completed_at:null,r.consumed=r.timestamp?moment.duration(moment(r.timestamp).diff(moment(n.timestamp),"seconds"),"seconds").format("h [hrs], m [min], s [secs]"):"--, --",{orderSubmitted:e,preparation:a,picking:s,intransit:i,delivered:n,completed:r}}},mounted:function(){this.fetchRemittanceBalance()}},P={components:{OngoingTransaction:u,ForPickup:w,RidersAccountability:Object(c.a)(k,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"table-responsive"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col"}),t._v(" "),a("div",{staticClass:"col-md-3 col-sm-6 mb-1"},[a("div",{staticClass:"d-flex"},[a("p",{staticStyle:{width:"79px"}},[t._v("Filter Date:")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.dateToday,expression:"dateToday"}],staticClass:"form-control form-control-sm pr-0",staticStyle:{width:"69%"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.dateToday=e.target.multiple?a:a[0]}}},t._l(t.deliverySchedules,(function(e,s){return a("option",{key:s,domProps:{value:e.date}},[t._v(t._s(t._f("moment")(e.date)))])})),0)])])]),t._v(" "),a("table",{staticClass:"table table-sm table-hover",staticStyle:{width:"100%"},attrs:{id:"dt-delivered-list"}},[t._m(0),t._v(" "),a("tbody",t._l(t.getList,(function(e,s,i){return a("tr",{key:i},[a("td",{staticStyle:{"white-space":"nowrap"}}),t._v(" "),a("td",{staticStyle:{"white-space":"nowrap"}},[1===t.customerDetails(e).orderPlatform?a("i",{staticClass:"remixicon-phone-line"}):3===t.customerDetails(e).orderPlatform?a("i",{staticClass:"remixicon-computer-line"}):a("i",{staticClass:"remixicon-smartphone-line"})]),t._v(" "),a("td",{staticStyle:{"white-space":"nowrap"}},[a("span",{staticClass:"font-weight-bold text-dark"},[t._v(t._s(t.riderDetail(e).riderName))])]),t._v(" "),a("td",{staticStyle:{"white-space":"nowrap"}},[a("span",{staticClass:"font-weight-bold text-dark"},[t._v(t._s(t.customerDetails(e).ticket_id))])]),t._v(" "),a("td",{staticStyle:{"white-space":"nowrap"}},[a("span",{staticClass:"font-weight-bold text-dark"},[t._v(t._s(t.customerDetails(e).customerName))])]),t._v(" "),a("td",{staticStyle:{"white-space":"nowrap"}},[a("span",{staticClass:"font-weight-bold text-dark"},[t._v("₱ "+t._s(t._f("numberFormat")(t.priceDetail(e).totalPrice)))])]),t._v(" "),a("td",[a("span",{staticClass:"font-weight-bold text-dark"},[t._v("₱\n              "+t._s(t._f("numberFormat")(e[0].customer_order_detail.change)))])]),t._v(" "),a("td",{staticStyle:{"white-space":"nowrap"}},[a("span",{staticClass:"font-weight-bold text-dark"},[t._v("₱\n              "+t._s(t._f("numberFormat")(t.priceDetail(e).totalPrice+e[0].customer_order_detail.change)))])]),t._v(" "),a("td",{staticStyle:{"white-space":"nowrap"}},[1===e[0].cancelled_status?a("span",{staticClass:"badge badge-light-danger"},[t._v("Cancelled Order")]):t._e()]),t._v(" "),a("td",{staticStyle:{"white-space":"nowrap"}},[0===e[0].complete_status?a("button",{staticClass:"btn btn-bordered-warning btn-sm waves-effect waves-light btn-block",on:{click:function(a){t.tagForSuccessfullyDelivered(e[0].rider_id,s,e[0].tag_riders_id,t.priceDetail(e).totalPrice,e[0].customer_order_detail.change)}}},[a("span",{staticStyle:{"font-size":"12px"}},[t._v("Tag for Successfully Delivered")])]):a("button",{staticClass:"btn  btn-bordered-warning btn-sm waves-effect waves-light btn-block",attrs:{disabled:""}},[a("span",{staticStyle:{"font-size":"12px"}},[t._v("Successfully Delivered")])])]),t._v(" "),a("td",[t._v("\n            "+t._s(t._f("dateTimeFormat")(t.orderTimeFrame(e).orderSubmitted.timestamp))+"\n          ")]),t._v(" "),a("td",[t._v("\n            "+t._s(t._f("dateTimeFormat")(t.orderTimeFrame(e).preparation.timestamp))+"\n            / "+t._s(t.orderTimeFrame(e).preparation.consumed)+"\n          ")]),t._v(" "),a("td",[t._v("\n            "+t._s(t._f("dateTimeFormat")(t.orderTimeFrame(e).picking.timestamp))+" /\n            "+t._s(t.orderTimeFrame(e).picking.consumed)+"\n          ")]),t._v(" "),a("td",[t._v("\n            "+t._s(t._f("dateTimeFormat")(t.orderTimeFrame(e).intransit.timestamp))+" /\n            "+t._s(t.orderTimeFrame(e).intransit.consumed)+"\n          ")]),t._v(" "),a("td",[t._v("\n            "+t._s(t._f("dateTimeFormat")(t.orderTimeFrame(e).delivered.timestamp))+" /\n            "+t._s(t.orderTimeFrame(e).delivered.consumed)+"\n          ")]),t._v(" "),a("td",[t.orderTimeFrame(e).completed.timestamp?a("span",[t._v("\n              "+t._s(t._f("dateTimeFormat")(t.orderTimeFrame(e).completed.timestamp))+"\n              / "+t._s(t.orderTimeFrame(e).completed.consumed)+"\n            ")]):a("span",[t._v("-/--/----, -:-- --")])])])})),0)])]),t._v(" "),a("div",{staticClass:"modal fade",staticStyle:{display:"none"},attrs:{id:"remit-amount",tabindex:"-1",role:"dialog","aria-labelledby":"myModalLabel","aria-hidden":"true"}},[a("remit-amount",{attrs:{orderDetails:t.orderDetails}})],1)])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticStyle:{"white-space":"nowrap"}}),t._v(" "),a("th",{staticStyle:{"white-space":"nowrap"}}),t._v(" "),a("th",{staticStyle:{"white-space":"nowrap"}},[t._v("Rider's Name")]),t._v(" "),a("th",{staticStyle:{"white-space":"nowrap"}},[t._v("Ticket #")]),t._v(" "),a("th",{staticStyle:{"white-space":"nowrap"}},[t._v("Customer's Name")]),t._v(" "),a("th",{staticStyle:{"white-space":"nowrap"}},[t._v("Price")]),t._v(" "),a("th",{staticStyle:{"white-space":"nowrap"}},[t._v("Change Given")]),t._v(" "),a("th",{staticStyle:{"white-space":"nowrap"}},[t._v("Total Remitted")]),t._v(" "),a("th",{staticStyle:{"white-space":"nowrap"}},[t._v("Transaction Status")]),t._v(" "),a("th",{staticStyle:{"white-space":"nowrap"}},[t._v("Action")]),t._v(" "),a("th",{staticStyle:{"white-space":"nowrap"}}),t._v(" "),a("th",{staticStyle:{"white-space":"nowrap"}}),t._v(" "),a("th",{staticStyle:{"white-space":"nowrap"}}),t._v(" "),a("th",{staticStyle:{"white-space":"nowrap"}}),t._v(" "),a("th",{staticStyle:{"white-space":"nowrap"}}),t._v(" "),a("th",{staticStyle:{"white-space":"nowrap"}})])])}],!1,null,null,null).exports,RemittanceMonitoring:Object(c.a)(T,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-sm table-hover",staticStyle:{width:"100%"},attrs:{id:"dt-remmitance-list"}},[t._m(0),t._v(" "),a("tbody",t._l(t.getList,(function(e,s,i){return a("tr",{key:i},[a("td",{staticStyle:{"white-space":"nowrap"}}),t._v(" "),a("td",{staticStyle:{"white-space":"nowrap"}},[1===t.customerDetails(e).orderPlatform?a("i",{staticClass:"remixicon-phone-line"}):3===t.customerDetails(e).orderPlatform?a("i",{staticClass:"remixicon-computer-line"}):a("i",{staticClass:"remixicon-smartphone-line"})]),t._v(" "),a("td",{staticStyle:{"white-space":"nowrap"}},[a("span",{staticClass:"font-weight-bold text-dark"},[t._v(t._s(t.riderDetail(e).riderName))])]),t._v(" "),a("td",{staticStyle:{"white-space":"nowrap"}},[a("span",{staticClass:"font-weight-bold text-dark"},[t._v(t._s(t.customerDetails(e).ticket_id))])]),t._v(" "),a("td",{staticStyle:{"white-space":"nowrap"}},[a("span",{staticClass:"font-weight-bold text-dark"},[t._v(t._s(t.customerDetails(e).customerName))])]),t._v(" "),a("td",{staticStyle:{"white-space":"nowrap"}},[a("span",{staticClass:"font-weight-bold text-dark"},[t._v("₱\n\t\t\t\t\t\t\t"+t._s(t._f("numberFormat")(e.remittance_amt)))])]),t._v(" "),a("td",{staticStyle:{"white-space":"nowrap"}},[a("span",{staticClass:"font-weight-bold text-dark"},[t._v("₱\n\t\t\t\t\t\t\t"+t._s(t._f("numberFormat")(e.remittance_amt)))])]),t._v(" "),a("td",{staticStyle:{"white-space":"nowrap"}},[a("span",{staticClass:"font-weight-bold text-dark"},[t._v("(₱ "+t._s(t._f("numberFormat")(0))+")")])]),t._v(" "),a("td",{staticStyle:{"white-space":"nowrap"}},[a("span",{staticClass:"font-weight-bold text-dark"},[t._v("(₱ "+t._s(t._f("numberFormat")(0))+")")])]),t._v(" "),a("td",{staticStyle:{"white-space":"nowrap"}},[a("span",{staticClass:"font-weight-bold text-dark"},[t._v(t._s(t.customerDetails(e).address))])]),t._v(" "),a("td",{staticStyle:{"white-space":"nowrap"}},[a("span",{staticClass:"font-weight-bold text-dark"},[t._v("₱\n\t\t\t\t\t\t\t"+t._s(e.customer_bill.delivery_charge))])]),t._v(" "),a("td",{staticStyle:{"white-space":"nowrap"}},[t._v("\n\t\t\t\t\t\t"+t._s(t._f("dateTimeFormat")(t.orderTimeFrame(e).orderSubmitted.timestamp))+"\n\t\t\t\t\t")]),t._v(" "),a("td",{staticStyle:{"white-space":"nowrap"}},[t._v("\n\t\t\t\t\t\t"+t._s(t._f("dateTimeFormat")(t.orderTimeFrame(e).preparation.timestamp))+"\n\t\t\t\t\t\t/ "+t._s(t.orderTimeFrame(e).preparation.consumed)+"\n\t\t\t\t\t")]),t._v(" "),a("td",{staticStyle:{"white-space":"nowrap"}},[t._v("\n\t\t\t\t\t\t"+t._s(t._f("dateTimeFormat")(t.orderTimeFrame(e).picking.timestamp))+"\n\t\t\t\t\t\t/\n\t\t\t\t\t\t"+t._s(t.orderTimeFrame(e).picking.consumed)+"\n\t\t\t\t\t")]),t._v(" "),a("td",{staticStyle:{"white-space":"nowrap"}},[t._v("\n\t\t\t\t\t\t"+t._s(t._f("dateTimeFormat")(t.orderTimeFrame(e).intransit.timestamp))+"\n\t\t\t\t\t\t/\n\t\t\t\t\t\t"+t._s(t.orderTimeFrame(e).intransit.consumed)+"\n\t\t\t\t\t")]),t._v(" "),a("td",{staticStyle:{"white-space":"nowrap"}},[t._v("\n\t\t\t\t\t\t"+t._s(t._f("dateTimeFormat")(t.orderTimeFrame(e).delivered.timestamp))+"\n\t\t\t\t\t\t/\n\t\t\t\t\t\t"+t._s(t.orderTimeFrame(e).delivered.consumed)+"\n\t\t\t\t\t")]),t._v(" "),a("td",{staticStyle:{"white-space":"nowrap"}},[t._v("\n\t\t\t\t\t\t"+t._s(t._f("dateTimeFormat")(t.orderTimeFrame(e).completed.timestamp))+"\n\t\t\t\t\t\t/\n\t\t\t\t\t\t"+t._s(t.orderTimeFrame(e).completed.consumed)+"\n\t\t\t\t\t")])])})),0)])])])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticStyle:{"white-space":"nowrap"}}),t._v(" "),a("th",{staticStyle:{"white-space":"nowrap"}}),t._v(" "),a("th",{staticStyle:{"white-space":"nowrap"}},[t._v("Rider's Name")]),t._v(" "),a("th",{staticStyle:{"white-space":"nowrap"}},[t._v("Ticket")]),t._v(" "),a("th",{staticStyle:{"white-space":"nowrap"}},[t._v("Customer's Name")]),t._v(" "),a("th",{staticStyle:{"white-space":"nowrap"}},[t._v("Price")]),t._v(" "),a("th",{staticStyle:{"white-space":"nowrap"}},[t._v("Remitted Amount")]),t._v(" "),a("th",{staticStyle:{"white-space":"nowrap"}},[t._v("\n\t\t\t\t\t\t(Short)/Over Amount\n\t\t\t\t\t")]),t._v(" "),a("th",{staticStyle:{"white-space":"nowrap"}},[t._v("\n\t\t\t\t\t\t(Collected)/Refunded Amount\n\t\t\t\t\t")]),t._v(" "),a("th",{staticStyle:{"white-space":"nowrap"}},[t._v("\n\t\t\t\t\t\tLocation/Destination\n\t\t\t\t\t")]),t._v(" "),a("th",{staticStyle:{"white-space":"nowrap"}},[t._v("Rider's Fee")]),t._v(" "),a("th",{staticStyle:{"white-space":"nowrap"}}),t._v(" "),a("th",{staticStyle:{"white-space":"nowrap"}}),t._v(" "),a("th",{staticStyle:{"white-space":"nowrap"}}),t._v(" "),a("th",{staticStyle:{"white-space":"nowrap"}}),t._v(" "),a("th",{staticStyle:{"white-space":"nowrap"}}),t._v(" "),a("th",{staticStyle:{"white-space":"nowrap"}})])])}],!1,null,null,null).exports,UnsettledBalance:Object(c.a)(S,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-sm table-hover",attrs:{id:"dt-unsettled-list"}},[t._m(0),t._v(" "),a("tbody",t._l(t.getList,(function(e,s,i){return a("tr",{key:i},[a("td",{staticStyle:{"white-space":"nowrap"}}),t._v(" "),a("td",{staticStyle:{"white-space":"nowrap"}},[1===t.customerDetails(e).orderPlatform?a("i",{staticClass:"remixicon-phone-line"}):3===t.customerDetails(e).orderPlatform?a("i",{staticClass:"remixicon-computer-line"}):a("i",{staticClass:"remixicon-smartphone-line"})]),t._v(" "),a("td",{staticStyle:{"white-space":"nowrap"}},[a("span",{staticClass:"text-dark"},[t._v(t._s(t.riderDetail(e).riderName))])]),t._v(" "),a("td",{staticStyle:{"white-space":"nowrap"}},[a("span",{staticClass:"text-dark"},[t._v(t._s(t.customerDetails(e).ticket_id))])]),t._v(" "),a("td",{staticStyle:{"white-space":"nowrap"}},[a("span",{staticClass:"text-dark"},[t._v(t._s(t.customerDetails(e).customerName))])]),t._v(" "),a("td",{staticStyle:{"white-space":"nowrap"}},[a("span",{staticClass:"text-dark"},[t._v("₱ "+t._s(t._f("numberFormat")(e[0].remittance_detail.amt_receivable)))])]),t._v(" "),a("td",{staticStyle:{"white-space":"nowrap"}},[a("span",{staticClass:"text-dark"},[t._v("₱ "+t._s(t._f("numberFormat")(e[0].remittance_detail.remitted_amount)))])]),t._v(" "),a("td",{staticStyle:{"white-space":"nowrap"}},["short"===e[0].remittance_detail.expense_account&&0===e[0].remittance_detail.status?a("span",{staticClass:"text-dark"},[t._v("(₱ "+t._s(t._f("numberFormat")(e[0].remittance_detail.balance))+")")]):"short"===e[0].remittance_detail.expense_account&&1===e[0].remittance_detail.status?a("span",{staticClass:"text-dark"},[t._v("₱ "+t._s(t._f("numberFormat")(e[0].remittance_detail.balance)))]):"over"===e[0].remittance_detail.expense_account&&0===e[0].remittance_detail.status?a("span",{staticClass:"text-dark"},[t._v("₱ "+t._s(t._f("numberFormat")(-1*e[0].remittance_detail.balance)))]):("over"===e[0].remittance_detail.expense_account&&e[0].remittance_detail.status,a("span",{staticClass:"text-dark"},[t._v("₱ "+t._s(t._f("numberFormat")(e[0].remittance_detail.balance)))]))]),t._v(" "),a("td",{staticStyle:{"white-space":"nowrap"}},["short"===e[0].remittance_detail.expense_account&&1===e[0].remittance_detail.status?a("span",{staticClass:"text-dark"},[t._v("(₱ "+t._s(t._f("numberFormat")(e[0].remittance_detail.collected_refunded_amt))+")")]):"over"===e[0].remittance_detail.expense_account&&1===e[0].remittance_detail.status?a("span",{staticClass:"text-dark"},[t._v("₱ "+t._s(t._f("numberFormat")(-1*e[0].remittance_detail.collected_refunded_amt)))]):a("span",{staticClass:"text-dark"},[t._v("₱ "+t._s(t._f("numberFormat")(e[0].remittance_detail.collected_refunded_amt)))])]),t._v(" "),a("td",["short"===e[0].remittance_detail.expense_account&&0===e[0].remittance_detail.status?a("button",{staticClass:"btn btn-bordered-warning btn-sm waves-effect waves-light",on:{click:function(a){return t.collectRefund(e[0].rider_id,s,e[0].remittance_detail.tenant_id,e[0].remittance_detail.amt_receivable,e[0].remittance_detail.balance,e[0].remittance_detail.expense_account)}}},[t._v("Collect")]):"over"===e[0].remittance_detail.expense_account&&0===e[0].remittance_detail.status?a("button",{staticClass:"btn btn-bordered-warning btn-sm waves-effect waves-light",on:{click:function(a){return t.collectRefund(e[0].rider_id,s,e[0].remittance_detail.tenant_id,e[0].remittance_detail.amt_receivable,e[0].remittance_detail.balance,e[0].remittance_detail.expense_account)}}},[t._v("Refund")]):"short"===e[0].remittance_detail.expense_account&&1===e[0].remittance_detail.status?a("span",{staticClass:"text-dark"},[t._v("Collected")]):"over"===e[0].remittance_detail.expense_account&&1===e[0].remittance_detail.status?a("span",{staticClass:"text-dark"},[t._v("Refunded")]):t._e()]),t._v(" "),a("td",{staticStyle:{"white-space":"nowrap"}},[t._v(t._s(t._f("dateTimeFormat")(t.orderTimeFrame(e).orderSubmitted.timestamp)))]),t._v(" "),a("td",{staticStyle:{"white-space":"nowrap"}},[t._v(t._s(t._f("dateTimeFormat")(t.orderTimeFrame(e).preparation.timestamp))+" / "+t._s(t.orderTimeFrame(e).preparation.consumed))]),t._v(" "),a("td",{staticStyle:{"white-space":"nowrap"}},[t._v(t._s(t._f("dateTimeFormat")(t.orderTimeFrame(e).picking.timestamp))+" / "+t._s(t.orderTimeFrame(e).picking.consumed))]),t._v(" "),a("td",{staticStyle:{"white-space":"nowrap"}},[t._v(t._s(t._f("dateTimeFormat")(t.orderTimeFrame(e).intransit.timestamp))+" / "+t._s(t.orderTimeFrame(e).intransit.consumed))]),t._v(" "),a("td",{staticStyle:{"white-space":"nowrap"}},[t._v(t._s(t._f("dateTimeFormat")(t.orderTimeFrame(e).delivered.timestamp))+" / "+t._s(t.orderTimeFrame(e).delivered.consumed))]),t._v(" "),a("td",{staticStyle:{"white-space":"nowrap"}},[t._v(t._s(t._f("dateTimeFormat")(t.orderTimeFrame(e).completed.timestamp))+" / "+t._s(t.orderTimeFrame(e).completed.consumed))])])})),0)])])])}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticStyle:{"white-space":"nowrap"}}),t._v(" "),a("th",{staticStyle:{"white-space":"nowrap"}}),t._v(" "),a("th",{staticStyle:{"white-space":"nowrap"}},[t._v("Rider's Name")]),t._v(" "),a("th",{staticStyle:{"white-space":"nowrap"}},[t._v("Ticket")]),t._v(" "),a("th",{staticStyle:{"white-space":"nowrap"}},[t._v("Customer's Name")]),t._v(" "),a("th",{staticStyle:{"white-space":"nowrap"}},[t._v("Price")]),t._v(" "),a("th",{staticStyle:{"white-space":"nowrap"}},[t._v("Remitted Amount")]),t._v(" "),a("th",{staticStyle:{"white-space":"nowrap"}},[t._v("(Short)/Over Amount")]),t._v(" "),a("th",{staticStyle:{"white-space":"nowrap"}},[t._v("(Collected)/Refunded Amount")]),t._v(" "),a("th",{staticStyle:{"white-space":"nowrap"}},[t._v("Action")]),t._v(" "),a("th",{staticStyle:{"white-space":"nowrap"}}),t._v(" "),a("th",{staticStyle:{"white-space":"nowrap"}}),t._v(" "),a("th",{staticStyle:{"white-space":"nowrap"}}),t._v(" "),a("th",{staticStyle:{"white-space":"nowrap"}}),t._v(" "),a("th",{staticStyle:{"white-space":"nowrap"}}),t._v(" "),a("th",{staticStyle:{"white-space":"nowrap"}})])])}],!1,null,null,null).exports},data:function(){return{transaction:!0,forPickUpComponent:!1,ridersAccountabilityComponent:!1,remittanceMonitoringComponent:!1,unsettledBalanceComponent:!1}},methods:{tabTo:function(t){"ongoingTransaction"==t?(this.transaction=!0,this.forPickUpComponent=!1,this.ridersAccountabilityComponent=!1,this.remittanceMonitoringComponent=!1,this.unsettledBalanceComponent=!1):"forPickUpComponent"==t?(this.transaction=!1,this.forPickUpComponent=!0,this.ridersAccountabilityComponent=!1,this.remittanceMonitoringComponent=!1,this.unsettledBalanceComponent=!1):"ridersAccountabilityComponent"==t?(this.transaction=!1,this.forPickUpComponent=!1,this.ridersAccountabilityComponent=!0,this.remittanceMonitoringComponent=!1,this.unsettledBalanceComponent=!1):"remittanceMonitoringComponent"==t?(this.transaction=!1,this.forPickUpComponent=!1,this.ridersAccountabilityComponent=!1,this.remittanceMonitoringComponent=!0,this.unsettledBalanceComponent=!1):(this.transaction=!1,this.forPickUpComponent=!1,this.ridersAccountabilityComponent=!1,this.remittanceMonitoringComponent=!1,this.unsettledBalanceComponent=!0)}}},D=Object(c.a)(P,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[t._m(0),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-12"},[a("div",{staticClass:"card-box"},[a("ul",{staticClass:"nav nav-pills navtab-bg nav-justified"},[a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link active",attrs:{href:"#onGoing-transaction","data-toggle":"tab","aria-expanded":"false"},on:{click:function(e){return t.tabTo("ongoingTransaction")}}},[t._m(1),t._v(" "),a("span",{staticClass:"d-none d-sm-inline-block"},[t._v("On Going Transaction")])])]),t._v(" "),a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",attrs:{href:"#for-pickup","data-toggle":"tab","aria-expanded":"true"},on:{click:function(e){return t.tabTo("forPickUpComponent")}}},[t._m(2),t._v(" "),a("span",{staticClass:"d-none d-sm-inline-block"},[t._v("For Pick Up")])])]),t._v(" "),a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",attrs:{href:"#riders-accountability","data-toggle":"tab","aria-expanded":"false"},on:{click:function(e){return t.tabTo("ridersAccountabilityComponent")}}},[t._m(3),t._v(" "),a("span",{staticClass:"d-none d-sm-inline-block"},[t._v("Rider's Accountability")])])]),t._v(" "),a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",attrs:{href:"#remittance-monitoring","data-toggle":"tab","aria-expanded":"false"},on:{click:function(e){return t.tabTo("remittanceMonitoringComponent")}}},[t._m(4),t._v(" "),a("span",{staticClass:"d-none d-sm-inline-block"},[t._v("Remittance Monitoring")])])]),t._v(" "),a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",attrs:{href:"#unsettled-balance","data-toggle":"tab","aria-expanded":"false"},on:{click:function(e){return t.tabTo("unsettledBalanceComponent")}}},[t._m(5),t._v(" "),a("span",{staticClass:"d-none d-sm-inline-block"},[t._v("Unsettled Balance")])])])]),t._v(" "),a("hr"),t._v(" "),a("div",{staticClass:"tab-content"},[a("div",{staticClass:"tab-pane fade show active",attrs:{id:"onGoing-transaction"}},[t.transaction?a("ongoing-transaction"):t._e()],1),t._v(" "),a("div",{staticClass:"tab-pane fade",attrs:{id:"for-pickup"}},[t.forPickUpComponent?a("for-pickup"):t._e()],1),t._v(" "),a("div",{staticClass:"tab-pane fade",attrs:{id:"riders-accountability"}},[t.ridersAccountabilityComponent?a("riders-accountability"):t._e()],1),t._v(" "),a("div",{staticClass:"tab-pane fade",attrs:{id:"remittance-monitoring"}},[t.remittanceMonitoringComponent?a("remittance-monitoring"):t._e()],1),t._v(" "),a("div",{staticClass:"tab-pane fade",attrs:{id:"unsettled-balance"}},[t.unsettledBalanceComponent?a("unsettled-balance"):t._e()],1)])])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("div",{staticClass:"page-title-box"},[e("div",{staticClass:"page-title-right"},[e("ol",{staticClass:"breadcrumb m-0"},[e("li",{staticClass:"breadcrumb-item"},[e("a",{attrs:{href:"javascript: void(0);"}},[this._v("Order Request")])]),this._v(" "),e("li",{staticClass:"breadcrumb-item"},[e("a",{attrs:{href:"javascript: void(0);"}},[this._v("Delivery")])]),this._v(" "),e("li",{staticClass:"breadcrumb-item active"},[this._v("Customer Monitoring")])])]),this._v(" "),e("h4",{staticClass:"page-title"},[this._v("Customer Monitoring")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"d-inline-block d-sm-none"},[e("i",{staticClass:"fas fa-home"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"d-inline-block d-sm-none"},[e("i",{staticClass:"far fa-user"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"d-inline-block d-sm-none"},[e("i",{staticClass:"far fa-envelope"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"d-inline-block d-sm-none"},[e("i",{staticClass:"fas fa-cog"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"d-inline-block d-sm-none"},[e("i",{staticClass:"fas fa-cog"})])}],!1,null,null,null);e.default=D.exports}}]);