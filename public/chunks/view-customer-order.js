(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{L47E:function(t,e,i){(t.exports=i("I1BE")(!1)).push([t.i,".custom-container-fluid{max-width:100%}button.spanHover:hover{color:#fff}",""])},MdMr:function(t,e,i){var a=i("L47E");"string"==typeof a&&(a=[[t.i,a,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};i("aET+")(a,s);a.locals&&(t.exports=a.locals)},XNhd:function(t,e,i){"use strict";var a=i("MdMr");i.n(a).a},zVzH:function(t,e,i){"use strict";i.r(e);var a=i("o0o1"),s=i.n(a),r=i("XuX8"),n=i.n(r),o=i("Fec6"),c=i("57pY"),d=i("lVNd"),l=i("BV55"),u=i("4HBT"),_=(i("uUT0"),i("hZsf"));i("01VR");function m(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var i=[],a=!0,s=!1,r=void 0;try{for(var n,o=t[Symbol.iterator]();!(a=(n=o.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){s=!0,r=t}finally{try{a||null==o.return||o.return()}finally{if(s)throw r}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return p(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return p(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,a=new Array(e);i<e;i++)a[i]=t[i];return a}function v(t,e,i,a,s,r,n){try{var o=t[r](n),c=o.value}catch(t){return void i(t)}o.done?e(c):Promise.resolve(c).then(a,s)}function h(t){return function(){var e=this,i=arguments;return new Promise((function(a,s){var r=t.apply(e,i);function n(t){v(r,a,s,n,o,"next",t)}function o(t){v(r,a,s,n,o,"throw",t)}n(void 0)}))}}n.a.component(u.HasError.name,u.HasError),n.a.component(u.AlertError.name,u.AlertError);var f={props:{ticketId:{type:String,required:!0}},components:{AddOrder:o.a,datetime:_.Datetime,timePicker:_.Datetime,RequestDiscountTele:c.a,EditUnitPrice:d.a,ProductDetailsModal:l.a},data:function(){return{recipient:null,recipient_address:null,recipient_numbers:[],recipient_phone:null,recepient_landmark:null,addItemOrderForm:this.newAddForm(),editItemOrderForm:{},foodProductDetails:{},modalMode:"Add",customerOrders:[],otherTenantOrder:[],customerName:null,isChecked:null,product_id:null,order_id:null,productItem:[],CQProductItem:[],orderDetails:[],params:{},inventory:[],changeQuantity_ids:[],returnButton:!0,totalPrice:0,otherTotalPrice:0,delivery_fee:0,tender:0,customer_tender:0,change:0,mop:1,productIds:[],qtyIds:[],deliverySchedule:{date:null,time:null},isClickDate:!0,isClickTime:!0,clickSubmit:!1,dateTimePlus:null,dateTimeEnd:null,getTimePickup:null,timeCount:0,cancelled_ticket:!1,product_details:{},discount_details:{},discount_list:[],discountForm:{discount_ids:[],no_approve:[],discount:[]},discountList:[],stocks_uom_ids:[],deliverySchedules:[],other_discounted_amt:[],is_discounted:!0,tenant_discount:0,unit_details:{},additional_charge:0}},computed:{computedTotalPrice:function(){var t=0;if(this.discountForm.discount.length>0)for(var e=0;e<this.discountForm.discount.length;e++)t+=parseFloat(this.discountForm.discount[e]);return parseFloat(this.totalPrice)+parseFloat(this.otherTotalPrice)+parseFloat(this.delivery_fee)+parseFloat(this.additional_charge)-(parseFloat(t)+parseFloat(this.tenant_discount))},computedChange:function(){var t=0,e=0;if(this.discountForm.discount.length>0)for(var i=0;i<this.discountForm.discount.length;i++)t+=parseFloat(this.discountForm.discount[i]);return e=parseFloat(this.tender)+(parseFloat(t)+parseFloat(this.tenant_discount))-(parseFloat(this.totalPrice)+parseFloat(this.otherTotalPrice)+parseFloat(this.delivery_fee)+parseFloat(this.additional_charge)),Number.isNaN(e)&&(e=0),this.change=e,e},customerDiscount:function(){var t=null,e=0;for(var i in this.customerOrders){t=this.customerOrders[i];break}for(var a in this.discount_list)this.countApproved(t[0].customer_discount,this.discount_list[a].id)>0&&e++;return 0===t[0].customer_discounted_amt.length&&e!==this.discountForm.discount.length}},beforeRouteLeave:function(t,e,i){this.cancelled_ticket?i():Swal.fire({title:"Do you really want to leave?",text:"You have unsaved changes!",type:"warning",allowOutsideClick:!1,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"OK"}).then((function(t){t.value?i():i(!1)}))},methods:{recipientDetails:function(t){this.recipient=t.recipient.name;var e="";null!==t.recipient_address.complete_address&&(e="".concat(t.recipient_address.complete_address,", ")),this.recipient_address="".concat(e).concat(t.recipient_address.street_purok,", ").concat(t.recipient_address.barangay.brgy_name,", ").concat(t.recipient_address.barangay.town.town_name,", ").concat(t.recipient_address.barangay.town.prov_name),this.recipient_numbers=t.recipient_numbers,this.recipient_phone="N/A",null!==t.recipient_phones&&(this.recipient_phone=t.recipient_phones),this.recipient_landmark=t.recipient_address.land_mark},retrieveCustomerOrders:function(){var t=this;return h(s.a.mark((function e(){var i,a,r,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,axios.get("/order/customer/".concat(t.ticketId));case 2:i=e.sent,a=i.data,t.customerOrders=a.tenant_order,t.otherTenantOrder=a.other_tenant_order,t.other_discounted_amt=a.other_discounted_amt,t.discount_list=a.discount_list,t.deliverySchedules=a.deliverySchedules,t.customerTender(a.tenant_order),t.calculateInventory(a.tenant_order),t.calculateDiscount(a.tenant_order),t.getTenantPrice(a.other_tenant_order),t.recipientDetails(a.recipient),e.t0=s.a.keys(a.tenant_order);case 15:if((e.t1=e.t0()).done){e.next=22;break}return r=e.t1.value,t.deliverySchedule.date=a.tenant_order[r][0].pickup_at.split(" ")[0],t.deliverySchedule.time="00:00:00"==a.tenant_order[r][0].pickup_at.split(" ")[1]?null:a.tenant_order[r][0].pickup_at.split(" ")[1],e.abrupt("break",22);case 22:e.t2=s.a.keys(a.tenant_order);case 23:if((e.t3=e.t2()).done){e.next=29;break}return n=e.t3.value,null!==a.tenant_order[n][0].customer_order_detail&&(t.additional_charge=parseFloat(a.tenant_order[n][0].customer_order_detail.additional_charge)),e.abrupt("break",29);case 29:0===t.customerOrders.length&&location.replace("/pickup_order");case 30:case"end":return e.stop()}}),e)})))()},getTenantPrice:function(t){var e=0;for(var i in t){var a=0;for(var s in t[i])0===t[i][s].canceled_status&&1===t[i][s].status&&(a+=parseFloat(t[i][s].total_price));e+=parseFloat(a)}this.otherTotalPrice=e},customerDetails:function(t){var e=null,i=null,a=null,s=null,r=null,n=null,o=null,c=null,d=null;for(var l in t){var u=t[l].customer_delivery_info.complete_address+",";null!=t[l].customer_delivery_info.complete_address&&""!=t[l].customer_delivery_info.complete_address||(u=""),e="".concat(t[l].customer_delivery_info.lastname,", ").concat(t[l].customer_delivery_info.firstname),o=t[l].praduct.tenant.tenant,n=t[l].ticket.type,i=t[l].customer_delivery_info.mobile_number,a=t[l].customer_delivery_info.telephone_number,s=null===t[l].customer_delivery_info.barangay?"".concat(t[l].ticket.app_user.barangay.brgy_name,", ").concat(t[l].ticket.app_user.barangay.town_name,", ").concat(t[l].ticket.app_user.barangay.prov_name):"".concat(u," ").concat(t[l].customer_delivery_info.street_purok,", ").concat(t[l].customer_delivery_info.barangay.brgy_name,", ").concat(t[l].customer_delivery_info.barangay.town.town_name,", ").concat(t[l].customer_delivery_info.barangay.town.prov_name),r=t[l].submitted_at,c=t[l].ticket.ticket,d=t[l].customer_delivery_info.land_mark;break}return this.customerName=e,{customerName:e,mobileNo:i,telephoneNo:a,address:s,dateOrdered:r,orderPlatform:n,tenantName:o,date:null,time:null,ticket_id:c,land_mark:d}},customerTender:function(t){var e=0;for(var i in t){e=parseFloat(t[i][0].customer_tender.amount);break}this.tender=e},calculateInventory:function(t){this.inventory=[],this.changeQuantity_ids=[],this.stocks_uom_ids=[],this.productIds=[],this.qtyIds=[];var e=0;for(var i in t)for(var a=0;a<t[i].length;a++){0===t[i][a].canceled_status&&(this.productIds.push(t[i][a].product_id),this.qtyIds.push(t[i][a].quantity));var s=null;for(var r in t[i][a].product_prices)null==t[i][a].uom_id&&""==t[i][a].uom_id||t[i][a].product_prices[r].uom_id!=t[i][a].uom_id||(s=t[i][a].product_prices[r].stocks),null==t[i][a].uom_id&&(s=t[i][a].product_prices[r].stocks);""!=s&&null!=s&&0!=s&&(e=parseInt(s)-parseInt(t[i][a].quantity),this.inventory.push(e),this.changeQuantity_ids.push(t[i][a].product_id),this.stocks_uom_ids.push(t[i][a].uom_id))}},itemStatus:function(t){var e=!1;for(var i in t)if(0===t[i].status&&1===t[i].canceled_status)e=!1;else{if(0===t[i].status){e=!0;break}if("0"===t[i].quantity&&0===t[i].canceled_status){e=!0;break}if(1===t[i].status)e=!1;else{if(parseInt(t[i].qty)>parseInt(t[i].quantity)){e=!0;break}e=!1}}return e},disabledItem:function(t,e){t=parseInt(t),e=parseInt(e);return!!isNaN(e)||!(t>e)},orderSummary:function(t){var e,i,a,s="",r="",n=0,o=0,c=0;return s=null===t[0].order_remarks?"":t[0].order_remarks.remarks,r=null===t[0].customer_order_remarks?"":t[0].customer_order_remarks.instructions,e=t[0].customer_delivery_info.barangay.town.delivery_charge.charge_amt,i=parseFloat(t[0].customer_delivery_info.barangay.town.delivery_charge.customer_to_pay)-parseFloat(t[0].customer_delivery_info.barangay.town.delivery_charge.charge_amt),a=t[0].locate_tenant.additional_charge,t.forEach((function(t){var e=null;for(var i in t.product_prices)e=(null==t.uom_id&&""==t.uom_id||(t.product_prices[i].uom_id,t.uom_id),t.product_prices[i].stocks);0===t.canceled_status&&1===t.status&&(parseInt(t.quantity)>parseInt(e)||(c+=parseFloat(t.total_price),o+=parseInt(t.quantity),n++))})),this.totalPrice=c,{customerRemarks:s,customerOrderRemarks:r,totalItems:n,totalQuantity:o,totalPrice:c,minimumOrder:i,delivery_charge:e,additional_charge:a}},otherDetails:function(t){var e,i,a=0,s=0;return e=t[0].praduct.tenant.tenant,i=t[0].praduct.tenant.tenant_id,t.forEach((function(t){0===t.canceled_status&&1===t.status&&(a+=parseFloat(t.total_price))})),this.other_discounted_amt.length>0&&this.other_discounted_amt.forEach((function(t){t.tenant_id===i&&(s+=parseFloat(t.discount))})),{tenantName:e,totalPrice:a-=s}},cancelItem:function(t){var e=this;this.params={id:t},Swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",type:"warning",allowOutsideClick:!1,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, change it!"}).then((function(t){t.value&&axios.put("/order/cancel_item",e.params).then((function(t){var i=t.data,a=(t.status,i.message);Swal.fire({type:"success",title:"Success",text:a}).then((function(t){e.retrieveCustomerOrders()}))}))}))},cancelTicket:function(t){var e=this;this.params={ticket_id:t},Swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",type:"warning",allowOutsideClick:!1,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, change it!"}).then((function(t){t.value&&axios.put("/order/cancel_ticket",e.params).then((function(t){var e=t.data,i=(t.status,e.message);Swal.fire({type:"success",title:"Success",text:i}).then((function(t){location.replace("/pickup_order")}))}))}))},isCancelled:function(t){for(var e=!0,i=0;i<t.length;i++){0==t[i].canceled_status&&(e=!1)}return this.cancelled_ticket=e,e},isTagged:function(t){for(var e=!0,i=0;i<t.length;i++){0==t[i].tag_status&&(e=!1)}return e},isPreparing:function(t){for(var e=!0,i=0;i<t.length;i++){1==t[i].pending_status&&(e=!1)}return e},dateCheck:function(t){var e=new Date(moment(t[0].pickup_at).format("YYYY-MM-DD")),i=new Date(moment(this.dateToday).format("YYYY-MM-DD"));return e.getTime()>i.getTime()},updateItemServe:function(t,e){Swal.fire({title:"Input available quantity:",type:"question",input:"number",showCancelButton:!0,confirmButtonText:"Submit",showLoaderOnConfirm:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",allowOutsideClick:!1}).then(function(e){var i=this;!0!==$.isNumeric(e.value)&&""!==e.value||Swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",type:"warning",allowOutsideClick:!1,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, change it!"}).then((function(a){a.value&&(i.params={id:t,item_qty:e.value},axios.put("/order/update_product_availability",i.params).then((function(t){var e=t.data,a=(t.status,e.message);Swal.fire({type:"success",title:"Success",text:a}).then((function(t){i.retrieveCustomerOrders()}))})))}))}.bind(this))},checkAvailability:function(t,e,i,a){var s=this;a.target.checked?this.isChecked=1:this.isChecked=0,0==this.isChecked?Swal.fire({title:"Input available quantity:",type:"question",input:"number",showCancelButton:!0,confirmButtonText:"Submit",showLoaderOnConfirm:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",allowOutsideClick:!1}).then(function(a){var s=this;1==$.isNumeric(a.value)?Swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",type:"warning",allowOutsideClick:!1,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, change it!"}).then((function(r){r.value?(s.params={id:e,prod_id:i,status:s.isChecked,item_qty:a.value},axios.put("/order/update_product_availability",s.params).then((function(t){var e=t.data,i=(t.status,e.message);Swal.fire({type:"success",title:"Success",text:i}).then((function(t){s.retrieveCustomerOrders()}))}))):1==s.isChecked?$("input#"+t).prop("checked",!1):$("input#"+t).prop("checked",!0)})):1==this.isChecked?$("input#"+t).prop("checked",!1):$("input#"+t).prop("checked",!0)}.bind(this)):Swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",type:"warning",allowOutsideClick:!1,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, change it!"}).then((function(a){a.value?(s.params={id:e,prod_id:i,status:s.isChecked,item_qty:""},axios.put("/order/update_product_availability",s.params).then((function(t){var e=t.data,i=(t.status,e.message);Swal.fire({type:"success",title:"Success",text:i}).then((function(t){s.retrieveCustomerOrders()}))}))):1==s.isChecked?$("input#"+t).prop("checked",!1):$("input#"+t).prop("checked",!0)}))},changeQuantity:function(t,e,i,a){this.order_id=t,this.product_id=e,this.CQProductItem=[{product_id:e,order_id:t,product_price_id:i,total_price:a}],$("div#change-quantity").modal({backdrop:"static",keyboard:!1,show:!0})},changeItem:function(t,e,i,a,s){this.productItem=[{product_id:e,order_id:t,price:i,quantity:a,stocks:s,productIds:this.productIds,qtyIds:this.qtyIds}],$("div#change-item").modal({backdrop:"static",keyboard:!1,show:!0})},addItem:function(t,e){for(var i=[],a=[],s=0;s<e.length;s++)i.push(e[s].product_id),a.push(e[s].canceled_status);this.orderDetails=[{ticket:t,productIds:i,cancelled_status:a,mop:e[0].mop,icoos:e[0].icoos,pickup_at:e[0].pickup_at}],$("div#add-order").modal({backdrop:"static",keyboard:!1,show:!0})},submitOrder:function(t){var e=this;this.clickSubmit=!0,Swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",type:"warning",allowOutsideClick:!1,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, submit it!"}).then((function(i){i.value&&(e.params={ticket_id:t,inventory:e.inventory,changeQuantity_ids:e.changeQuantity_ids,stocks_uom_ids:e.stocks_uom_ids,tender:e.tender,change:e.change,additional_charge:e.additional_charge,datePickUp:e.deliverySchedule.date,timePickUp:e.deliverySchedule.time,discount_details:e.discountForm},axios.put("/order/update_for_preparing",e.params).then((function(t){var i=t.data;t.status;e.clickSubmit=!1;var a=i.message;if("failure"===a){var s=i.tenant;Swal.fire({type:"warning",title:"Warning",text:"Reviewed by "+s+". Please wait until it finished!"}).then((function(t){e.retrieveCustomerOrders()}))}else Swal.fire({type:"success",title:"Success",text:a}).then((function(t){location.replace("/pickup_order")}))})))}))},returnHome:function(){this.returnButton=!1},firstEntry:function(t){var e=this;this.params={ticket_id:t},axios.post("/order/first_entry",this.params).then((function(t){var i=t.data;t.status;if("failure"===i.message){var a=i.tenant;Swal.fire({type:"warning",title:"Warning",text:"Reviewed by "+a+". Please wait until it finished!"}).then((function(t){e.retrieveCustomerOrders()}))}}))},closeFoodProductDetail:function(){$("#foodProductDetail").modal("hide"),this.addItemOrderForm=this.newAddForm()},newAddForm:function(){return{productId:null,uomId:null,quantity:1,price:null,suggestions:{},cFlavor:{flavorId:null,price:null},cDrink:{uomId:null,productId:null,price:null},cSide:{uomId:null,productId:null,price:null},cFry:{uomId:null,productId:null,price:null},cSize:{uomId:null,price:null},aSides:[],aDrinks:[],aDesserts:[]}},viewProductDetails:function(t,e,i,a,r){var n=this;return h(s.a.mark((function o(){var c,d,l,u,_,p,v,h,f,g;return s.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return i.target,n.modalMode="Edit",s.next=4,axios.get("/product/details/".concat(e,"?orderId=").concat(t));case 4:for(c=s.sent,d=c.data,l=d.productDetails,u=d.productSubs,n.foodProductDetails=l,_={},p=0,v=Object.entries(u.suggestions);p<v.length;p++)h=m(v[p],2),f=h[0],g=h[1],_[f]={product_suggestion_id:g[0].product_suggestion_id,addon_price:g[0].addon_price};n.editItemOrderForm={order_id:t,productId:null,uomId:null,quantity:a,price:null,suggestions:_,cDrink:{uomId:u.drinks_choices.length?u.drinks_choices[0].uom_id:null,productId:u.drinks_choices.length?u.drinks_choices[0].choice_id:null,price:u.drinks_choices.length?u.drinks_choices[0].addon_price:null},cSide:{uomId:u.sides_choices.length?u.sides_choices[0].uom_id:null,productId:u.sides_choices.length?u.sides_choices[0].choice_id:null,price:u.sides_choices.length?u.sides_choices[0].addon_price:null},cFry:{uomId:u.fries_choices.length?u.fries_choices[0].uom_id:null,productId:u.fries_choices.length?u.fries_choices[0].choice_id:null,price:u.fries_choices.length?u.fries_choices[0].addon_price:null},cSize:{uomId:u.sizes_choices.length?u.sizes_choices[0].uom_id:null,price:u.sizes_choices.length?parseFloat(u.sizes_choices[0].product_price):null},aDrinks:u.drinks_addons.map((function(t){return{uomId:t.uom_id,productId:t.addon_id,price:t.addon_price}})),aSides:u.sides_addons.map((function(t){return{uomId:t.uom_id,productId:t.addon_id,price:t.addon_price}})),aDesserts:u.desserts_addons.map((function(t){return{uomId:t.uom_id,productId:t.addon_id,price:t.addon_price}}))},n.$set(n.foodProductDetails,"quantity",0),n.$set(n.foodProductDetails,"order_id",t),n.$set(n.foodProductDetails,"uom_id",r),$("#updateFoodProductDetail").modal("show");case 15:case"end":return s.stop()}}),o)})))()},addProduct:function(t){var e=this;return h(s.a.mark((function i(){var a,r,n,o,c,d,l,u;return s.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=t.productId,r=t.ticket_id,n=t.icoos,o=t.pickup_at,c=t.mop,d=t.uom_id,e.modalMode="Add",i.next=4,axios.get("/product/details/".concat(a));case 4:l=i.sent,u=l.data,e.foodProductDetails=u.productDetails,e.$set(e.addItemOrderForm,"ticket_id",r),e.$set(e.addItemOrderForm,"icoos",n),e.$set(e.addItemOrderForm,"pickup_at",o),e.$set(e.addItemOrderForm,"mop",c),e.addItemOrderForm.uomId=d,e.$set(e.foodProductDetails,"quantity",0),e.$set(e.foodProductDetails,"uom_id",d),$("#addFoodProductDetail").modal("show");case 15:case"end":return i.stop()}}),i)})))()},productDetails:function(t){var e=null,i=null,a=null,s=0;for(var r in t.product_prices)null!=t.uom_id?t.product_prices[r].uom_id==t.uom_id&&(e=t.product_prices[r].id,i=t.product_prices[r].unit_measure.unit_measure,a=t.product_prices[r].stocks,s=t.product_prices[r].available):(e=t.product_prices[r].id,i=null,a=t.product_prices[r].stocks,s=t.product_prices[r].available);return{id:e,unit_measure:i,stocks:a,available:s}},requestDiscount:function(t,e){var i=this;return h(s.a.mark((function e(){var a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.discount_details={ticket_id:t},e.next=3,axios.get("/discount/discount_lists");case 3:a=e.sent,r=a.data,i.discountList=r,$("div#request-discount-tele").modal({backdrop:"static",keyboard:!1,show:!0});case 7:case"end":return e.stop()}}),e)})))()},pendingDiscount:function(t,e){var i=0;for(var a in t)i+=1;return e.length>0&&(i=0),i},countApproved:function(t,e){var i=0;return t.forEach((function(t){1===t.status&&t.discount_id===e&&(i+=1)})),i},discount:function(t,e,i){var a,s=$("input#discount_"+t).val(),r=$("input#no_approved_"+t).val();if(s>parseFloat(this.totalPrice)/parseFloat(e)*(i/100)&&null!==i&&null!==e)return $("input#discount_"+t).val(""),void Swal.fire({type:"warning",title:"Warning",text:"Discount must not be greater than total amout purchase!"});if(""!=s&&parseFloat(s)>0)if((a=this.discountForm.discount_ids).indexOf(t)>-1){var n=a.indexOf(t);this.discountForm.discount.splice(n,1,parseFloat(s))}else this.discountForm.discount_ids.push(t),this.discountForm.no_approve.push(r),this.discountForm.discount.push(s);else if($("input#discount_"+t).val(""),(a=this.discountForm.discount_ids).indexOf(t)>-1){n=a.indexOf(t);this.discountForm.discount_ids.splice(n,1),this.discountForm.no_approve.splice(n,1),this.discountForm.discount.splice(n,1)}},discount_type:function(t){var e=null;for(var i in this.discount_list)if(this.discount_list[i].id===t){e=this.discount_list[i].discount_name;break}return e},calculateDiscount:function(t){var e=0;if(!0===this.is_discounted)for(var i in t){if(t[i][0].customer_discounted_amt.length>0)t[i][0].customer_discounted_amt.forEach((function(t){e+=parseFloat(t.discount)}))}this.tenant_discount=e},closeRequestDiscount:function(){this.is_discounted=!1,this.retrieveCustomerOrders()},editProductPrice:function(t,e,i){this.unit_details={id:t,quantity:e,price_per_gram:i},$("div#edit-unit-price").modal({backdrop:"static",keyboard:!1,show:!0})},closeEditUnitPrice:function(){this.retrieveCustomerOrders()},checkNumber:function(){parseFloat(this.additional_charge)<0&&(this.additional_charge=0)}},filters:{moment:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return moment(t).format("MMM DD, YYYY")})),momentTime:function(t){return moment(t).format("h:mm A")}},mounted:function(){this.retrieveCustomerOrders()},watch:{"deliverySchedule.time":function(t){var e=this,i={from_time:this.deliverySchedules[1].time_from,to_time:this.deliverySchedules[1].time_to,order_time:t};axios.post("/order/check_time",i).then((function(t){var i=t.data;t.status;if(i.validate){var a=i.message;Swal.fire({type:"warning",title:"Opsss ...",text:a}).then((function(t){for(var i in e.customerOrders){e.deliverySchedule.time="00:00:00"==e.customerOrders[i][0].pickup_at.split(" ")[1]?null:e.customerOrders[i][0].pickup_at.split(" ")[1];break}}))}else Swal.close()}))}}},g=(i("XNhd"),i("KHd+")),b=Object(g.a)(f,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"custom-container-fluid"},[t._m(0),t._v(" "),i("div",{staticClass:"row"},[i("div",{staticClass:"col-lg-12"},[i("div",{staticClass:"card-box"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-lg-6"},[i("h4",{staticClass:"header-title"},[t._v("Orders of "+t._s(t.customerName))])]),t._v(" "),i("div",{staticClass:"col-lg-6"},[t.returnButton?i("router-link",{staticClass:"btn btn-sm btn-bordered-warning waves-effect waves-light float-right",attrs:{to:{name:"pickup-order"}}},[i("i",{staticClass:"remixicon-arrow-left-circle-line"}),t._v(" Back\n            ")]):i("button",{staticClass:"btn btn-sm btn-bordered-warning waves-effect waves-light float-right",attrs:{disabled:""}},[i("i",{staticClass:"remixicon-arrow-left-circle-line"}),t._v(" Back\n            ")])],1)]),t._v(" "),i("hr"),t._v(" "),i("div",{staticClass:"row"},[i("div",{staticClass:"col-lg-12"},[i("table",{staticClass:"table table-bordered",attrs:{width:"100%"}},[t._m(1),t._v(" "),i("tbody",t._l(t.customerOrders,(function(e,a,s){return i("tr",{key:s},[i("td",[i("div",{staticClass:"row"},[i("div",{staticClass:"col-md-12"},[t._m(2,!0),t._v(" "),i("div",{staticClass:"tab-content"},[i("div",{staticClass:"tab-pane fade show active",attrs:{id:"recipient"}},[i("table",{staticClass:"table table-sm"},[i("tbody",[i("tr",[i("td",{staticClass:"font-weight-normal"},[t._v("\n                                    Customer Recipient:\n                                    "),i("i",[t._v(t._s(t.customerDetails(e).customerName))])])]),t._v(" "),i("tr",[i("td",{staticClass:"font-weight-normal"},[t._v("\n                                    Mobile No:\n                                    "),i("i",[t._v(t._s(t.customerDetails(e).mobileNo))])])]),t._v(" "),i("tr",[i("td",{staticClass:"font-weight-normal"},[t._v("\n                                    Telephone No:\n                                    "),i("i",[null!==t.customerDetails(e).telephoneNo?i("span",[t._v(t._s(t.customerDetails(e).telephoneNo))]):i("span",[t._v("N/A")])])])]),t._v(" "),i("tr",[i("td",{staticClass:"font-weight-normal"},[t._v("\n                                    Address:\n                                    "),i("i",[t._v(t._s(t.customerDetails(e).address))])])]),t._v(" "),i("tr",[i("td",{staticClass:"font-weight-normal"},[t._v("\n                                    Nearest Landmark:\n                                    "),i("i",[t._v(t._s(t.customerDetails(e).land_mark))])])])])])]),t._v(" "),i("div",{staticClass:"tab-pane fade",attrs:{id:"customer1"}},[i("table",{staticClass:"table table-sm"},[i("tbody",[i("tr",[i("td",{staticClass:"font-weight-normal"},[t._v("\n                                    Customer Name:\n                                    "),i("i",[t._v(t._s(t.recipient))])])]),t._v(" "),i("tr",[i("td",{staticClass:"font-weight-normal"},[t._v("\n                                    Mobile No:\n                                    "),t._l(t.recipient_numbers,(function(e,a){return i("ul",{key:a},[1===e.in_use?i("li",[t._v("\n                                        "+t._s(e.mobile_number)+"\n                                        "),i("span",{staticClass:"badge badge-success"},[t._v("Primary")])]):t._e()])}))],2)]),t._v(" "),i("tr",[i("td",{staticClass:"font-weight-normal"},[t._v("\n                                    Telephone No:\n                                    "),i("i",[t._v("\n                                      "+t._s(t.recipient_phone)+"\n                                    ")])])]),t._v(" "),i("tr",[i("td",{staticClass:"font-weight-normal"},[t._v("\n                                    Address:\n                                    "),i("i",[t._v(t._s(t.recipient_address))])])]),t._v(" "),i("tr",[i("td",{staticClass:"font-weight-normal"},[t._v("\n                                    Nearest Landmark:\n                                    "),i("i",[t._v(t._s(t.recipient_landmark))])])])])])])])])]),t._v(" "),i("div",{staticClass:"row"},[i("div",{staticClass:"col-md-12"},[i("table",{staticClass:"table table-sm"},[i("tbody",[i("tr",[i("td",{staticClass:"font-weight-normal"},[t._v("\n                                Ticket ID:\n                                "),i("i",[t._v(t._s(t.customerDetails(e).ticket_id))])])]),t._v(" "),i("tr",[i("td",{staticClass:"font-weight-normal"},[t._v("\n                                Date Order:\n                                "),i("i",[t._v(t._s(t._f("dateTimeFormat")(t.customerDetails(e).dateOrdered)))])])]),t._v(" "),i("tr",[1===t.customerDetails(e).orderPlatform?i("td",{staticClass:"font-weight-normal"},[t._v("\n                                Order From:\n                                "),i("i",{staticClass:"remixicon-phone-line"}),t._v(" "),i("i",[t._v("Tele-Ordering")])]):3===t.customerDetails(e).orderPlatform?i("td",{staticClass:"font-weight-normal"},[t._v("\n                                Order From:\n                                "),i("i",{staticClass:"remixicon-computer-line"}),t._v(" "),i("i",[t._v("Web Application")])]):i("td",{staticClass:"font-weight-normal"},[t._v("\n                                Order From:\n                                "),i("i",{staticClass:"remixicon-smartphone-line"}),t._v(" "),i("i",[t._v("Mobile Application")])])])])])])]),t._v(" "),i("div",{staticClass:"row"},[i("div",{staticClass:"col-md-12"},[i("button",{staticClass:"btn btn-block btn-sm btn-bordered-warning waves-effect waves-light",attrs:{type:"button",disabled:null!==e[0].customer_order_detail&&1===e[0].customer_order_detail.cancelled_status||t.dateCheck(e)||0===e[0].discount.length},on:{click:function(i){return t.requestDiscount(e[0].ticket_id,e[0].ticket.type)}}},[t._v("\n                          Request Discount\n                          "),i("span",{staticClass:"badge badge-danger rounded-circle"},[t._v(t._s(t.pendingDiscount(e[0].discount,e[0].customer_discount)))])]),t._v(" "),i("button",{staticClass:"btn btn-block btn-sm btn-bordered-warning waves-effect waves-light",attrs:{type:"button",disabled:null!==e[0].customer_order_detail&&1===e[0].customer_order_detail.cancelled_status||t.dateCheck(e)},on:{click:function(e){return t.cancelTicket(a)}}},[t._v("\n                          Cancel Ticket\n                        ")]),t._v(" "),i("button",{staticClass:"btn btn-block btn-sm btn-bordered-warning waves-effect waves-light mt-1",attrs:{type:"button",disabled:null!==e[0].customer_order_detail&&1===e[0].customer_order_detail.cancelled_status||t.dateCheck(e)},on:{click:function(i){return t.addItem(a,e)}}},[t._v("\n                          Add Order\n                        ")])])]),t._v(" "),i("div",{staticClass:"row"},[i("div",{staticClass:"col-md-12"},[i("hr"),t._v(" "),i("div",{staticClass:"form-group"},[i("label",{attrs:{for:""}},[t._v("Schedule Date")]),t._v(" "),i("button",{staticClass:"btn spanHover badge",class:t.isClickDate?"badge-warning":"badge-success",staticStyle:{cursor:"pointer"},attrs:{disabled:t.isCancelled(e)||t.dateCheck(e)},on:{click:function(e){t.isClickDate=!1}}},[i("i",{staticClass:"remixicon-quill-pen-line"}),t._v(" edit\n                          ")]),t._v(" "),i("select",{directives:[{name:"model",rawName:"v-model",value:t.deliverySchedule.date,expression:"deliverySchedule.date"}],staticClass:"form-control",attrs:{disabled:t.isClickDate},on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.deliverySchedule,"date",e.target.multiple?i:i[0])}}},t._l(t.deliverySchedules,(function(e,a){return i("option",{key:a,domProps:{value:e.date}},[t._v(t._s(t._f("moment")(e.date)))])})),0)]),t._v(" "),i("div",{staticClass:"form-group"},[i("label",{attrs:{for:""}},[t._v("Schedule Time")]),t._v(" "),i("button",{staticClass:"btn spanHover badge",class:t.isClickTime?"badge-warning":"badge-success",staticStyle:{cursor:"pointer"},attrs:{disabled:t.isCancelled(e)||t.dateCheck(e)},on:{click:function(e){t.isClickTime=!1}}},[i("i",{staticClass:"remixicon-quill-pen-line"}),t._v(" edit\n                          ")]),t._v(" "),t.isClickTime?i("input",{staticClass:"form-control",attrs:{type:null===t.deliverySchedule.time?"text":"time",disabled:""},domProps:{value:null===t.deliverySchedule.time?"ASAP":t.deliverySchedule.time}}):i("input",{directives:[{name:"model",rawName:"v-model",value:t.deliverySchedule.time,expression:"deliverySchedule.time"}],staticClass:"form-control",attrs:{type:"time",min:t.deliverySchedule.time,max:t.deliverySchedules[0].time_to},domProps:{value:t.deliverySchedule.time},on:{input:function(e){e.target.composing||t.$set(t.deliverySchedule,"time",e.target.value)}}})])])])]),t._v(" "),i("td",[i("div",{staticClass:"row"},[i("div",{staticClass:"col-md-12"},[i("div",{staticStyle:{}},[i("table",{staticClass:"table table-sm table-hover"},[i("thead",[i("tr",[i("th",[i("center",[t._v("Image")])],1),t._v(" "),i("th",{staticStyle:{"white-space":"nowrap"}},[t._v("\n                                  Product Name\n                                ")]),t._v(" "),i("th",{staticStyle:{"white-space":"nowrap"},attrs:{align:"right"}},[t._v("\n                                  Unit Price\n                                ")]),t._v(" "),i("th",[t._v("Qty.")]),t._v(" "),i("th",{staticStyle:{"white-space":"nowrap"},attrs:{align:"right"}},[t._v("\n                                  Total Price\n                                ")]),t._v(" "),i("th",[t._v("Availability")]),t._v(" "),i("th",{staticStyle:{"white-space":"nowrap"}},[t._v("\n                                  Item Served\n                                ")]),t._v(" "),i("th",[t._v("Status")]),t._v(" "),i("th",{staticStyle:{"font-size":"10px"}},[i("center",[t._v("Out of Stock")])],1),t._v(" "),i("th",[t._v("Action")])])]),t._v(" "),i("tbody",t._l(e,(function(a,s){return i("tr",{key:s},[i("td",{attrs:{align:"center"}},[0===a.canceled_status?[i("a",{staticClass:"font-weight-light text-dark",staticStyle:{cursor:"pointer"},attrs:{href:"javascript:void(0)"},on:{click:function(e){return t.viewProductDetails(a.id,a.product_id,e,a.quantity,a.uom_id)}}},[i("img",{staticClass:"rounded-circle",attrs:{height:"36",width:"40",src:"/storage/"+a.image,alt:a.product_name,loading:"lazy"}})])]:[i("img",{staticClass:"rounded-circle",attrs:{height:"36",width:"40",src:"/storage/"+a.image,alt:a.product_name,loading:"lazy"}})]],2),t._v(" "),i("td",[0===a.canceled_status?[i("a",{staticClass:"font-weight-light text-dark",staticStyle:{cursor:"pointer"},attrs:{href:"javascript:void(0)"},on:{click:function(e){return t.viewProductDetails(a.id,a.product_id,e,a.quantity,a.uom_id)}}},[null!==t.productDetails(a).unit_measure?i("dt",{staticStyle:{"font-size":"12px"}},[t._v("\n                                        "+t._s(t.productDetails(a).unit_measure+" "+a.product_name)+"\n                                      ")]):i("dt",{staticStyle:{"font-size":"12px"}},[t._v("\n                                        "+t._s(a.product_name)+"\n                                      ")]),t._v(" "),a.product_suggestion.length>0?i("dd",{staticStyle:{"font-size":"10px"}},t._l(a.product_suggestion,(function(e,a){return i("div",{key:"suggestion"+a},[i("span",[t._v("+\n                                            "),i("span",{staticClass:"text-danger"},[t._v(t._s(e.suggestion.suggestion)+"\n                                              :")]),t._v("\n                                            "+t._s(e.item_suggested.description))]),t._v(" "),"0.00"!==e.addon_price?i("span",{staticClass:"float-right"},[t._v("₱ "+t._s(e.addon_price))]):t._e()])})),0):t._e(),t._v(" "),t._l(a.product_choices,(function(e,a){return i("dd",{key:"choice"+a,staticStyle:{"font-size":"10px"}},[i("div",[null!=e.product_details?i("span",[t._v("+\n                                            "),null!==e.uom_id?i("span",[t._v(t._s(e.unit_measure.unit_measure)+" ")]):t._e(),t._v(t._s(e.product_details.product_name))]):t._e(),t._v(" "),"0.00"!==e.addon_price?i("span",{staticClass:"float-right"},[t._v("₱ "+t._s(e.addon_price))]):t._e()])])})),t._v(" "),t._l(a.product_addons,(function(e,a){return i("dd",{key:"addon"+a,staticStyle:{"font-size":"10px"}},[i("div",[null!=e.product_details?i("span",[t._v("+\n                                            "),null!==e.uom_id?i("span",[t._v(t._s(e.unit_measure.unit_measure)+" ")]):t._e(),t._v(t._s(e.product_details.product_name))]):t._e(),t._v(" "),"0.00"!==e.addon_price?i("span",{staticClass:"float-right"},[t._v("₱ "+t._s(e.addon_price))]):t._e()])])}))],2)]:[null!==t.productDetails(a).unit_measure?i("dt",{staticStyle:{"font-size":"12px"}},[t._v("\n                                      "+t._s(t.productDetails(a).unit_measure+" "+a.product_name)+"\n                                    ")]):i("dt",{staticStyle:{"font-size":"12px"}},[t._v("\n                                      "+t._s(a.product_name)+"\n                                    ")]),t._v(" "),a.product_suggestion.length>0?i("dd",{staticStyle:{"font-size":"10px"}},t._l(a.product_suggestion,(function(e,a){return i("div",{key:"suggestion"+a},[i("span",[t._v("+\n                                          "),i("span",{staticClass:"text-danger"},[t._v(t._s(e.suggestion.suggestion)+"\n                                            :")]),t._v("\n                                          "+t._s(e.item_suggested.description))]),t._v(" "),"0.00"!==e.addon_price?i("span",{staticClass:"float-right"},[t._v("₱ "+t._s(e.addon_price))]):t._e()])})),0):t._e(),t._v(" "),t._l(a.product_choices,(function(e,a){return i("dd",{key:"choice"+a,staticStyle:{"font-size":"10px"}},[i("div",[null!=e.product_details?i("span",[t._v("+\n                                          "),null!==e.uom_id?i("span",[t._v(t._s(e.unit_measure.unit_measure)+" ")]):t._e(),t._v(t._s(e.product_details.product_name))]):t._e(),t._v(" "),"0.00"!==e.addon_price?i("span",{staticClass:"float-right"},[t._v("₱ "+t._s(e.addon_price))]):t._e()])])})),t._v(" "),t._l(a.product_addons,(function(e,a){return i("dd",{key:"addon"+a,staticStyle:{"font-size":"10px"}},[i("div",[null!=e.product_details?i("span",[t._v("+\n                                          "),null!==e.uom_id?i("span",[t._v(t._s(e.unit_measure.unit_measure)+" ")]):t._e(),t._v(t._s(e.product_details.product_name))]):t._e(),t._v(" "),"0.00"!==e.addon_price?i("span",{staticClass:"float-right"},[t._v("₱ "+t._s(e.addon_price))]):t._e()])])}))]],2),t._v(" "),i("td",{staticStyle:{"white-space":"nowrap"}},[1===a.no_specific_price&&0===a.canceled_status?[i("div",{class:"edit-product-price-"+a.id},[i("span",{staticClass:"text-dark"},[t._v("₱\n                                        "+t._s(t._f("numberFormat")(parseFloat(a.product_price))))]),t._v(" "),a.measurement>0?i("span",[t._v("\n                                        ("+t._s(a.measurement+" grams")+")\n                                      ")]):t._e(),t._v(" "),i("span",{staticStyle:{cursor:"pointer"},on:{click:function(e){return t.editProductPrice(a.id,a.quantity,a.price_per_gram)}}},[i("i",{staticClass:"remixicon-pencil-line text-primary"})])]),t._v(" "),i("div",{class:"update-product-price-"+a.id,staticStyle:{display:"none"}},[i("input",{staticClass:"text-right",class:"product_price_"+a.id,attrs:{type:"text",size:"2"},domProps:{value:a.product_price},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.updateProductPrice(a.id)}}}),t._v(" "),i("span",{staticStyle:{cursor:"pointer"},on:{click:function(e){return t.updateProductPrice(a.id)}}},[t._v("\n                                         "),i("i",{staticClass:"remixicon-save-2-line text-primary"})])])]:i("span",{class:{"text-dark":0===a.canceled_status}},[t._v("₱\n                                    "+t._s(t._f("numberFormat")(parseFloat(a.product_price))))])],2),t._v(" "),i("td",[t._v(t._s(a.quantity))]),t._v(" "),i("td",[t._v("\n                                  ₱\n                                  "+t._s(t._f("numberFormat")(parseFloat(a.total_price)))+"\n                                ")]),t._v(" "),i("td",{attrs:{align:"center"}},[i("div",{staticClass:"custom-control custom-switch"},[i("input",{staticClass:"custom-control-input",attrs:{type:"checkbox",id:"onoffswitch"+s,disabled:""},domProps:{checked:1===a.status&&1===t.productDetails(a).available&&t.disabledItem(a.quantity,t.productDetails(a).stocks)}}),t._v(" "),i("label",{staticClass:"custom-control-label",attrs:{for:"onoffswitch"+s}})])]),t._v(" "),i("td",{attrs:{align:"center"}},[null===t.productDetails(a).stocks?i("span",{staticClass:"badge badge-light-success",staticStyle:{"font-size":"9px"}},[t._v("no limit")]):t._e(),t._v(" "),0===t.productDetails(a).stocks?i("span",{staticClass:"badge badge-light-danger",staticStyle:{"font-size":"9px"}},[t._v("out of stock")]):i("span",[t._v(t._s(t.productDetails(a).stocks))]),t._v("\n                                  |\n                                  "),i("button",{staticClass:"btn spanHover badge badge-warning",staticStyle:{cursor:"pointer","font-size":"9px"},attrs:{disabled:1===a.canceled_status||1===a.tag_status||0===a.pending_status||t.dateCheck(e)},on:{click:function(e){t.updateItemServe(t.productDetails(a).id)}}},[t._v("\n                                    edit\n                                  ")])]),t._v(" "),i("td",[1===a.canceled_status?i("span",{staticClass:"badge badge-light-danger",staticStyle:{"font-size":"9px"}},[t._v("Cancelled")]):t._e()]),t._v(" "),i("td",{attrs:{align:"center"}},[0===a.icoos?i("span",{staticClass:"badge badge-light-danger",staticStyle:{"font-size":"9px"}},[t._v("Remove")]):i("span",{staticClass:"badge badge-light-danger",staticStyle:{"font-size":"9px"}},[t._v("Cancel Ticket")])]),t._v(" "),i("td",{staticStyle:{"white-space":"nowrap"},attrs:{align:"center"}},[i("button",{staticClass:"btn btn-block btn-sm btn-bordered-warning waves-effect waves-light",attrs:{type:"button",disabled:1===a.canceled_status||1===a.tag_status||0===a.pending_status||t.dateCheck(e)},on:{click:function(e){return t.cancelItem(a.id)}}},[t._v("\n                                    Cancel Item\n                                  ")])])])})),0)])])])]),t._v(" "),i("div",{staticClass:"row"},[i("div",{staticClass:"col-md-5"},[i("div",{staticClass:"form-group"},[i("label",{attrs:{for:"text-1"}},[t._v("Unfound Items")]),t._v(" "),i("textarea",{staticClass:"form-control",attrs:{name:"",id:"text-1",cols:"30",rows:"3",readonly:""},domProps:{value:t.orderSummary(e).customerRemarks}})]),t._v(" "),i("div",{staticClass:"form-group"},[i("label",{attrs:{for:"text-2"}},[t._v("Special Instructions")]),t._v(" "),i("textarea",{staticClass:"form-control",attrs:{name:"",id:"text-2",cols:"30",rows:"3",readonly:""},domProps:{value:t.orderSummary(e).customerOrderRemarks}})])]),t._v(" "),i("div",{staticClass:"col-md-7"},[i("table",{staticClass:"table table-sm",attrs:{width:"100%"}},[i("thead",[i("tr",[i("th",{staticClass:"font-weight-bold",attrs:{colspan:"2"}},[t._v("\n                                "+t._s(t.customerDetails(e).tenantName)+" Order\n                                Summary\n                              ")])])]),t._v(" "),i("tbody",[i("tr",[i("td",{attrs:{width:"75%"}},[t._v("No of Item:")]),t._v(" "),i("td",{attrs:{align:"right",width:"25%"}},[t._v("\n                                "+t._s(t.orderSummary(e).totalItems)+"\n                              ")])]),t._v(" "),i("tr",[i("td",[t._v("Total Quantity:")]),t._v(" "),i("td",{attrs:{align:"right"}},[t._v("\n                                "+t._s(t.orderSummary(e).totalQuantity)+"\n                              ")])]),t._v(" "),i("tr",[i("td",[t._v("\n                                "+t._s(t.customerDetails(e).tenantName)+" Total\n                                Amt. Purchase:\n                                "),i("br"),t._v(" "),0===t.orderSummary(e).totalPrice?i("span",{staticClass:"badge badge-danger"},[t._v("Cancelled")]):t._e()]),t._v(" "),i("td",{attrs:{align:"right"}},[t._v("\n                                ₱\n                                "+t._s(t._f("numberFormat")(t.orderSummary(e).totalPrice))+"\n                              ")])])])]),t._v(" "),Object.keys(t.otherTenantOrder).length>0?i("table",{staticClass:"table table-sm",attrs:{width:"100%"}},[i("tbody",t._l(t.otherTenantOrder,(function(e,a){return i("tr",{key:a},[i("td",{attrs:{width:"75%"}},[t._v("\n                                "+t._s(t.otherDetails(e).tenantName)+" Total Amt.\n                                Purchase:\n                                "),0===t.otherDetails(e).totalPrice?i("span",{staticClass:"badge badge-danger"},[t._v("Cancelled")]):t._e()]),t._v(" "),i("td",{attrs:{align:"right"}},[t._v("\n                                ₱\n                                "+t._s(t._f("numberFormat")(t.otherDetails(e).totalPrice))+"\n                              ")])])})),0)]):t._e(),t._v(" "),i("table",{staticClass:"table table-sm",attrs:{width:"100%"}},[i("tbody",[e[0].customer_discounted_amt.length>0&&!0===t.is_discounted?t._l(e[0].customer_discounted_amt,(function(e,a){return i("tr",{key:"view_discounted_amt"+a},[i("td",{attrs:{width:"75%"}},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-md-8"},[i("p",{staticClass:"text-danger"},[t._v("\n                                        "+t._s(t.discount_type(e.discount_id))+"\n                                        Discount :\n                                      ")])]),t._v(" "),i("div",{staticClass:"col-md-4"},[i("p",[t._v("\n                                        "+t._s(e.no_approved)+"\n                                      ")])])])]),t._v(" "),i("td",{attrs:{align:"right"}},[t._v("\n                                  ₱ "+t._s(t._f("numberFormat")(e.discount))+"\n                                ")])])})):t._l(t.discount_list,(function(a,s){return i("tr",{key:"discountList_"+s},[t.countApproved(e[0].customer_discount,a.id)>0?[i("td",{attrs:{width:"75%"}},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-md-8"},[i("p",{staticClass:"text-danger"},[t._v("\n                                          "+t._s(a.discount_name)+" Discount :\n                                        ")])]),t._v(" "),i("div",{staticClass:"col-md-4"},[i("p",[t._v("\n                                          "+t._s(t.countApproved(e[0].customer_discount,a.id))+"\n                                        ")])])])]),t._v(" "),i("td",[i("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{type:"text",id:"no_approved_"+a.id},domProps:{value:t.countApproved(e[0].customer_discount,a.id)}}),t._v(" "),i("input",{staticClass:"form-control text-right",staticStyle:{"border-color":"#f1556c"},attrs:{type:"text",id:"discount_"+a.id},on:{keyup:function(e){return t.discount(a.id,a.vat,a.discount_percent)}}})])]:t._e()],2)})),t._v(" "),1===t.orderSummary(e).additional_charge?i("tr",[i("td",{attrs:{width:"75%"}},[t._v("Additional Charge")]),t._v(" "),i("td",{attrs:{align:"right"}},[i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.additional_charge,expression:"additional_charge",modifiers:{number:!0}}],staticClass:"form-control text-right",attrs:{type:"text"},domProps:{value:t.additional_charge},on:{keyup:t.checkNumber,input:function(e){e.target.composing||(t.additional_charge=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})])]):t._e(),t._v(" "),i("tr",[t._m(3,!0),t._v(" "),i("td",{attrs:{align:"right"}},[i("span",{staticClass:"text-danger"},[t._v("₱\n                                  "+t._s(t._f("numberFormat")(t.computedTotalPrice)))])])]),t._v(" "),i("tr",[i("td",[t._v("\n                                Customer Tender\n                                "),t.computedTotalPrice>t.tender?i("span",{staticClass:"float-right"},[i("i",{staticClass:"text-danger"},[t._v("Insufficient Amount")])]):t._e()]),t._v(" "),i("td",{attrs:{align:"right"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.tender,expression:"tender"}],staticClass:"form-control text-right",attrs:{type:"text",disabled:t.isCancelled(e)||t.dateCheck(e)},domProps:{value:t.tender},on:{"~keyup":function(e){return t.firstEntry(a)},input:function(e){e.target.composing||(t.tender=e.target.value)}}})])]),t._v(" "),i("tr",[i("td",[t._v("Customer Change")]),t._v(" "),i("td",{attrs:{align:"right"}},[t._v("\n                                ₱ "+t._s(t._f("numberFormat")(t.computedChange))+"\n                              ")])])],2)]),t._v(" "),!1===t.clickSubmit?i("button",{staticClass:"btn btn-block btn-bordered-warning waves-effect waves-light width-lg",attrs:{disabled:null!==e[0].customer_order_detail&&1===e[0].customer_order_detail.cancelled_status||t.isCancelled(e)||t.computedTotalPrice>t.tender||t.itemStatus(e)||t.dateCheck(e)||e[0].discount.length>0&&0===e[0].customer_discount.length||t.customerDiscount},on:{click:function(e){return t.submitOrder(a)}}},[t._v("\n                          Submit Order\n                        ")]):i("button",{staticClass:"btn btn-block btn-bordered-warning waves-effect waves-light width-lg",attrs:{type:"button",disabled:""}},[i("span",{staticClass:"spinner-border spinner-border-sm mr-1",attrs:{role:"status","aria-hidden":"true"}}),t._v("\n                          Submitting...\n                        ")])])])])])})),0)])])])])])]),t._v(" "),i("div",{staticClass:"modal fade",staticStyle:{display:"none"},attrs:{id:"add-order",tabindex:"-1",role:"dialog","aria-labelledby":"myModalLabel","aria-hidden":"true"}},[i("add-order",{attrs:{orderDetails:t.orderDetails},on:{"return-home":t.returnHome,addProduct:t.addProduct}})],1),t._v(" "),i("div",{staticClass:"modal fade",staticStyle:{display:"none"},attrs:{id:"request-discount-tele",tabindex:"-1",role:"dialog","aria-labelledby":"myModalLabel","aria-hidden":"true"}},[i("request-discount-tele",{attrs:{request_discount_tele:t.discount_details,discountList:t.discountList},on:{closeRequestDiscount:t.closeRequestDiscount}})],1),t._v(" "),i("div",{staticClass:"modal fade",staticStyle:{display:"none"},attrs:{id:"addFoodProductDetail",tabindex:"-1",role:"dialog","aria-labelledby":"myModalLabel","aria-hidden":"true"}},[i("ProductDetailsModal",{attrs:{mode:t.modalMode,addItemOrderForm:t.addItemOrderForm,editItemOrderForm:t.editItemOrderForm,foodProductDetails:t.foodProductDetails},on:{closeFoodProductDetail:t.closeFoodProductDetail}})],1),t._v(" "),i("div",{staticClass:"modal fade",staticStyle:{display:"none"},attrs:{id:"updateFoodProductDetail",tabindex:"-1",role:"dialog","aria-labelledby":"myModalLabel","aria-hidden":"true"}},[i("ProductDetailsModal",{attrs:{mode:t.modalMode,addItemOrderForm:t.addItemOrderForm,editItemOrderForm:t.editItemOrderForm,foodProductDetails:t.foodProductDetails},on:{closeFoodProductDetail:t.closeFoodProductDetail}})],1),t._v(" "),i("div",{staticClass:"modal fade",staticStyle:{display:"none"},attrs:{id:"edit-unit-price",tabindex:"-1",role:"dialog","aria-labelledby":"myModalLabel","aria-hidden":"true"}},[i("edit-unit-price",{attrs:{unit_details:t.unit_details},on:{closeEditUnitPrice:t.closeEditUnitPrice}})],1),t._v(" "),i("div",{staticClass:"modal fade",staticStyle:{display:"none"},attrs:{id:"view_ids",tabindex:"-1",role:"dialog","aria-labelledby":"myModalLabel","aria-hidden":"true"}},[i("div",{staticClass:"modal-dialog modal-lg"},[i("div",{staticClass:"modal-content"},[i("div",{staticClass:"modal-body"},[i("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"}},[t._v("×")]),t._v(" "),i("br"),i("br"),t._v(" "),i("center",[i("img",{attrs:{id:"customer_id",src:"",alt:""}})])],1),t._v(" "),t._m(4)])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("div",{staticClass:"page-title-box"},[e("div",{staticClass:"page-title-right"},[e("ol",{staticClass:"breadcrumb m-0"},[e("li",{staticClass:"breadcrumb-item"},[e("a",{attrs:{href:"javascript: void(0);"}},[this._v("Order Request")])]),this._v(" "),e("li",{staticClass:"breadcrumb-item"},[e("a",{attrs:{href:"javascript: void(0);"}},[this._v("Pick Up")])]),this._v(" "),e("li",{staticClass:"breadcrumb-item active"},[this._v("Customer Monitoring")])])]),this._v(" "),e("h4",{staticClass:"page-title"},[this._v("Customer Monitoring")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("td",{staticClass:"font-weight-bold",attrs:{width:"25%"}},[this._v("\n                    Customer Details\n                  ")]),this._v(" "),e("td",{staticClass:"font-weight-bold",attrs:{width:"75%"}},[this._v("Order Details")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",{staticClass:"nav nav-pills navtab-bg nav-justified"},[e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link active",attrs:{href:"#recipient","data-toggle":"tab","aria-expanded":"false"}},[e("span",{staticClass:"d-inline-block d-sm-none"},[e("i",{staticClass:"fas fa-home"})]),this._v(" "),e("span",{staticClass:"d-none d-sm-inline-block"},[this._v("Recipient")])])]),this._v(" "),e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link",attrs:{href:"#customer1","data-toggle":"tab","aria-expanded":"true"}},[e("span",{staticClass:"d-inline-block d-sm-none"},[e("i",{staticClass:"far fa-user"})]),this._v(" "),e("span",{staticClass:"d-none d-sm-inline-block"},[this._v("Customer")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",{attrs:{width:"75%"}},[e("span",{staticClass:"text-danger"},[this._v("Grand Total")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-secondary waves-effect",attrs:{type:"button","data-dismiss":"modal"}},[this._v("\n            Close\n          ")])])}],!1,null,null,null);e.default=b.exports}}]);