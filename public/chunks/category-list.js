(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{ziAi:function(t,a,e){"use strict";e.r(a);var s=e("o0o1"),r=e.n(s),i=e("XuX8"),o=e.n(i),n=e("4HBT"),c=e("uUT0");o.a.component(n.HasError.name,n.HasError),o.a.component(n.AlertError.name,n.AlertError);var l={name:"EditCategoryComponent",props:["categoryid"],data:function(){return{clickSubmit:!1,categoryForm:new n.Form({category_id:null,category:null,image:null,previous_image:null})}},methods:{fetch_category_details:function(t){var a=this;axios.get("/category/fetch_category_details/"+t).then((function(t){var e=t.data;a.categoryForm.fill(e),a.categoryForm.previous_image=e.image}))},checkEditCategoryForm:function(){var t=this;this.clickSubmit=!0,this.categoryForm.image=this.$refs.image.files[0],this.categoryForm.submit("post","/category/update_category",{transformRequest:[function(t,a){return Object(c.serialize)(t)}],onUploadProgress:function(t){}}).then((function(a){var e=a.data,s=(a.status,e.message);swal({title:"Success!",text:s,type:"success",buttonsStyling:!1,confirmButtonClass:"btn btn-primary"}).then(function(){this.clickSubmit=!1,this.$parent.fetchCategoryList(),$("div#modal-edit-category").modal("hide")}.bind(t))})).catch((function(a){t.clickSubmit=!1;var e=a.response,s=e.data,r=e.status;if(401==r)Swal.fire({type:"warning",title:"Warning",text:"Session has been expired."});else if(422===r){var i=s.message;Swal.fire({type:"warning",title:"Warning",text:i})}else Swal.fire({type:"error",title:"Error",text:"Oops, something went wrong!"})}))}},watch:{categoryid:function(t){this.fetch_category_details(t),this.categoryForm.category_id=t}}},d=e("KHd+"),m=Object(d.a)(l,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"modal-dialog"},[e("div",{staticClass:"modal-content"},[t._m(0),t._v(" "),e("form",{attrs:{method:"post",enctype:"multipart/form-data"},on:{submit:function(a){return a.preventDefault(),t.checkEditCategoryForm(a)}}},[e("div",{staticClass:"modal-body p-4"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"category"}},[t._v("Category Name")]),e("span",{staticClass:"text-danger"},[t._v("*")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.categoryForm.category,expression:"categoryForm.category"}],staticClass:"form-control",class:{"is-invalid":t.categoryForm.errors.has("category")},attrs:{type:"text",id:"category",placeholder:"Category Name"},domProps:{value:t.categoryForm.category},on:{input:function(a){a.target.composing||t.$set(t.categoryForm,"category",a.target.value)}}}),t._v(" "),e("has-error",{attrs:{form:t.categoryForm,field:"category"}})],1),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"image"}},[t._v("Category Image")]),t._v(" "),e("input",{ref:"image",staticClass:"form-control",class:{"is-invalid":t.categoryForm.errors.has("image")},attrs:{type:"file",name:"image",id:"image",placeholder:"Category Image"}}),t._v(" "),e("has-error",{attrs:{form:t.categoryForm,field:"image"}})],1)])])]),t._v(" "),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-secondary waves-effect",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Close")]),t._v(" "),!1===t.clickSubmit?e("button",{staticClass:"btn btn-info waves-effect waves-light",attrs:{type:"submit"}},[t._v("Save changes")]):e("button",{staticClass:"btn btn-info waves-effect waves-light",attrs:{disabled:""}},[e("span",{staticClass:"spinner-border spinner-border-sm mr-1",attrs:{role:"status","aria-hidden":"true"}}),t._v("\n                    Loading...\n                ")])])])])])}),[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"modal-header"},[a("h4",{staticClass:"modal-title"},[this._v("Category Details")]),this._v(" "),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-hidden":"true"}},[this._v("×")])])}],!1,null,null,null).exports;Vue.component(n.HasError.name,n.HasError),Vue.component(n.AlertError.name,n.AlertError);var u={name:"AddCategoryComponent",data:function(){return{clickSubmit:!1,categoryForm:new n.Form({category:null,image:null})}},methods:{closeModal:function(){this.categoryForm.clear(),this.categoryForm.reset()},checkAddCategoryForm:function(){var t=this;this.clickSubmit=!0,this.categoryForm.image=this.$refs.image.files[0],this.categoryForm.submit("post","/category/add_category",{transformRequest:[function(t,a){return Object(c.serialize)(t)}],onUploadProgress:function(t){}}).then((function(a){var e=a.data,s=(a.status,e.message);swal({title:"Success!",text:s,type:"success",buttonsStyling:!1,confirmButtonClass:"btn btn-primary"}).then(function(){this.clickSubmit=!1,this.categoryForm.clear(),this.categoryForm.reset(),this.$refs.image.value=null,this.$parent.fetchCategoryList(),$("div#modal-add-category").modal("hide")}.bind(t))})).catch((function(a){t.clickSubmit=!1;var e=a.response,s=e.data,r=e.status;if(401==r)Swal.fire({type:"warning",title:"Warning",text:"Session has been expired."});else if(422===r){var i=s.message;Swal.fire({type:"warning",title:"Warning",text:i})}else Swal.fire({type:"error",title:"Error",text:"Oops, something went wrong!"})}))}},mounted:function(){}};function g(t,a,e,s,r,i,o){try{var n=t[i](o),c=n.value}catch(t){return void e(t)}n.done?a(c):Promise.resolve(c).then(s,r)}var v={components:{AddCategory:Object(d.a)(u,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"modal-dialog"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("h4",{staticClass:"modal-title"},[t._v("Category Details")]),t._v(" "),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-hidden":"true"},on:{click:t.closeModal}},[t._v("\n        ×\n      ")])]),t._v(" "),e("form",{attrs:{method:"post",enctype:"multipart/form-data"},on:{submit:function(a){return a.preventDefault(),t.checkAddCategoryForm(a)}}},[e("div",{staticClass:"modal-body p-4"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"category1"}},[t._v("Category Name")]),e("span",{staticClass:"text-danger"},[t._v("*")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.categoryForm.category,expression:"categoryForm.category"}],staticClass:"form-control",class:{"is-invalid":t.categoryForm.errors.has("category")},attrs:{type:"text",id:"category1",placeholder:"Category Name"},domProps:{value:t.categoryForm.category},on:{input:function(a){a.target.composing||t.$set(t.categoryForm,"category",a.target.value)}}}),t._v(" "),e("has-error",{attrs:{form:t.categoryForm,field:"category"}})],1),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"image1"}},[t._v("Category Image")]),e("span",{staticClass:"text-danger"},[t._v("*")]),t._v(" "),e("input",{ref:"image",staticClass:"form-control",class:{"is-invalid":t.categoryForm.errors.has("image")},attrs:{type:"file",name:"image",id:"image1",placeholder:"Category Image"}}),t._v(" "),e("has-error",{attrs:{form:t.categoryForm,field:"image"}})],1)])])]),t._v(" "),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-secondary waves-effect",attrs:{type:"button","data-dismiss":"modal"},on:{click:t.closeModal}},[t._v("\n          Close\n        ")]),t._v(" "),!1===t.clickSubmit?e("button",{staticClass:"btn btn-info waves-effect waves-light",attrs:{type:"submit"}},[t._v("\n          Save changes\n        ")]):e("button",{staticClass:"btn btn-info waves-effect waves-light",attrs:{disabled:""}},[e("span",{staticClass:"spinner-border spinner-border-sm mr-1",attrs:{role:"status","aria-hidden":"true"}}),t._v("\n          Loading...\n        ")])])])])])}),[],!1,null,null,null).exports,EditCategory:m},data:function(){return{table_data:[],table:{},params:{},category_id:null}},computed:{getList:function(){return this.table_data}},methods:{fetchCategoryList:function(){var t,a=this;return(t=r.a.mark((function t(){var e,s,i;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return $.fn.DataTable.isDataTable("#dt-category-list")&&(a.table.destroy(),a.table_data=[]),t.next=3,axios.get("/category/fetch_category_list");case 3:e=t.sent,s=e.data,a.table_data=s,i=a,setTimeout((function(){i.table=$("#dt-category-list").DataTable({retrieve:!0,destroy:!0,lengthMenu:[5,10,15,20,25],order:[[0,"asc"]],columnDefs:[{targets:[3],orderable:!1,width:"15%",className:"text-center"}],language:{paginate:{previous:"<i class='mdi mdi-chevron-left'>",next:"<i class='mdi mdi-chevron-right'>"}},drawCallback:function(){$(".dataTables_paginate > .pagination").addClass("pagination-rounded")}})}),100);case 8:case"end":return t.stop()}}),t)})),function(){var a=this,e=arguments;return new Promise((function(s,r){var i=t.apply(a,e);function o(t){g(i,s,r,o,n,"next",t)}function n(t){g(i,s,r,o,n,"throw",t)}o(void 0)}))})()},addCategory:function(){$("div#modal-add-category").modal({backdrop:"static",keyboard:!1,show:!0})},editCategory:function(t,a){$("div#modal-edit-category").modal({backdrop:"static",keyboard:!1,show:!0}),this.category_id=a;var e=this;$("#dt-category-list").on("click","button.btn-rounded",(function(){$(this).parents("tr").hasClass("selected")||(e.table.$("tr.selected").removeClass("selected"),$(this).parents("tr").addClass("selected"))}))},changeStatus:function(t,a,e){var s=this;this.params={id:a,status:e},Swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",type:"warning",allowOutsideClick:!1,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, change it!"}).then((function(t){t.value&&axios.post("/category/update_status",s.params).then((function(t){var a=t.data,e=(t.status,a.message);Swal.fire({type:"success",title:"Success",text:e}).then((function(t){s.fetchCategoryList()}))}))}))}},mounted:function(){this.fetchCategoryList()}},y=Object(d.a)(v,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"container-fluid"},[t._m(0),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},[e("button",{staticClass:"btn btn-primary waves-effect waves-light float-right",on:{click:t.addCategory}},[e("i",{staticClass:"fas fa-plus-circle"}),t._v("   Add Category")])])]),t._v(" "),e("hr"),t._v(" "),e("table",{staticClass:"table table-sm table-hover",attrs:{id:"dt-category-list",width:"100%"}},[t._m(1),t._v(" "),e("tbody",t._l(t.getList,(function(a,s){return e("tr",{key:s},[e("td",[t._v(t._s(a.category))]),t._v(" "),e("td",[e("img",{attrs:{src:"/storage/"+a.image,width:"90",height:"60"}})]),t._v(" "),e("td",[t._v(t._s(a.status))]),t._v(" "),e("td",[e("button",{staticClass:"btn btn-sm btn-light btn-rounded",attrs:{"data-wenk":"Edit Category"},on:{click:function(e){return t.editCategory(s,a.category_id)}}},[e("i",{staticClass:"text-primary remixicon-file-edit-line"})]),t._v(" "),"inactive"===a.status?e("button",{staticClass:"btn btn-sm btn-light btn-rounded",attrs:{"data-wenk":"Activate Category","data-wenk-pos":"left"},on:{click:function(e){return t.changeStatus(s,a.category_id,1)}}},[e("i",{staticClass:"text-success remixicon-check-fill"})]):e("button",{staticClass:"btn btn-sm btn-light btn-rounded",attrs:{"data-wenk":"Deactivate Category","data-wenk-pos":"left"},on:{click:function(e){return t.changeStatus(s,a.category_id,0)}}},[e("i",{staticClass:"text-danger remixicon-close-fill"})])])])})),0)])])])])]),t._v(" "),e("div",{staticClass:"modal fade",staticStyle:{display:"none"},attrs:{id:"modal-add-category",tabindex:"-1",role:"dialog","aria-labelledby":"myModalLabel","aria-hidden":"true"}},[e("add-category")],1),t._v(" "),e("div",{staticClass:"modal fade",staticStyle:{display:"none"},attrs:{id:"modal-edit-category",tabindex:"-1",role:"dialog","aria-labelledby":"myModalLabel","aria-hidden":"true"}},[e("edit-category",{attrs:{categoryid:t.category_id}})],1)])}),[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"page-title-box"},[a("div",{staticClass:"page-title-right"},[a("ol",{staticClass:"breadcrumb m-0"},[a("li",{staticClass:"breadcrumb-item"},[a("a",{attrs:{href:"javascript: void(0);"}},[this._v("Setup")])]),this._v(" "),a("li",{staticClass:"breadcrumb-item active"},[this._v("Category List")])])]),this._v(" "),a("h4",{staticClass:"page-title"},[this._v("Category List")])])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("thead",[a("tr",[a("th",[this._v("Category")]),this._v(" "),a("th",[this._v("Image")]),this._v(" "),a("th",[this._v("Status")]),this._v(" "),a("th",[this._v("Actions")])])])}],!1,null,null,null);a.default=y.exports}}]);