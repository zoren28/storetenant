(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{g805:function(t,a,e){"use strict";e.r(a);var s=e("o0o1"),i=e.n(s),o={name:"SelectAddonProductComponent",props:["fd_products","product_addon"],data:function(){return{clickSubmit:!1,params:{}}},computed:{getProductList:function(){return this.loadTable(),this.fd_products}},methods:{loadTable:function(){$.fn.DataTable.isDataTable("#dt-product-option-list")&&(this.table.destroy(),this.table_data=[]);var t=this;setTimeout((function(){t.table=$("#dt-product-option-list").DataTable({destroy:!0,order:[[2,"asc"]],columnDefs:[{orderable:!1,className:"select-checkbox",targets:0},{targets:[1],visible:!1,searchable:!1}],select:{style:"multi",selector:"td:first-child"},language:{paginate:{previous:"<i class='mdi mdi-chevron-left'>",next:"<i class='mdi mdi-chevron-right'>"}},drawCallback:function(){$(".dataTables_paginate > .pagination").addClass("pagination-rounded")}})}),100)},selectProductForm:function(){var t=this,a=this.table.rows(".selected").data(),e=[];$.each(a,(function(t){var s=a[t][1];e.push(s)})),this.params={product_ids:e,product_addon:this.product_addon},axios.post("/product/add_addon_sides",this.params).then((function(a){var e=a.data,s=(a.status,e.message);Swal.fire({type:"success",title:"Success",text:s,allowOutsideClick:!1}).then((function(a){$("div#modal-select-product").modal("hide"),t.$parent.fetchProductList(t.product_addon,1)}))}))}}},r=e("KHd+");function d(t,a,e,s,i,o,r){try{var d=t[o](r),n=d.value}catch(t){return void e(t)}d.done?a(n):Promise.resolve(n).then(s,i)}function n(t){return function(){var a=this,e=arguments;return new Promise((function(s,i){var o=t.apply(a,e);function r(t){d(o,s,i,r,n,"next",t)}function n(t){d(o,s,i,r,n,"throw",t)}r(void 0)}))}}var c={components:{SelectProduct:Object(r.a)(o,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"modal-dialog modal-lg"},[e("div",{staticClass:"modal-content"},[t._m(0),t._v(" "),e("form",{attrs:{method:"post",enctype:"multipart/form-data"},on:{submit:function(a){return a.preventDefault(),t.selectProductForm(a)}}},[e("div",{staticClass:"modal-body p-4"},[e("table",{staticClass:"table table-bordered table-hover",attrs:{id:"dt-product-option-list",width:"100%"}},[t._m(1),t._v(" "),e("tbody",t._l(t.getProductList,(function(a,s){return e("tr",{key:s},[e("td"),t._v(" "),e("td",[t._v(t._s(a.product_id))]),t._v(" "),e("td",[e("span",{staticClass:"font-weight-bold text-dark"},[t._v(t._s(a.product_name))])]),t._v(" "),e("td",[e("img",{attrs:{src:"storage/"+a.image,width:"90",height:"60",alt:""}})])])})),0)])]),t._v(" "),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-secondary waves-effect",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Close")]),t._v(" "),!1===t.clickSubmit?e("button",{staticClass:"btn btn-info waves-effect waves-light",attrs:{type:"submit"}},[t._v("Save changes")]):e("button",{staticClass:"btn btn-info waves-effect waves-light",attrs:{disabled:""}},[e("span",{staticClass:"spinner-border spinner-border-sm mr-1",attrs:{role:"status","aria-hidden":"true"}}),t._v("\n                    Loading...\n                ")])])])])])}),[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"modal-header"},[a("h4",{staticClass:"modal-title"},[this._v("Select Product(s)")]),this._v(" "),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-hidden":"true"}},[this._v("×")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("thead",[a("tr",[a("td"),this._v(" "),a("td"),this._v(" "),a("td",[this._v("Product Name")]),this._v(" "),a("td",[this._v("Image")])])])}],!1,null,null,null).exports},data:function(){return{clickSetup:!1,table_data:[],params:[],fd_products:[],product_addon:1}},computed:{getList:function(){return this.table_data}},methods:{fetchProductList:function(t,a){var e=this;return n(i.a.mark((function s(){var o,r;return i.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return $.fn.DataTable.isDataTable("#dt-product-list")&&(e.table.destroy(),e.table_data=[]),s.next=3,axios.get("/product/fetch_addon_sides_list/".concat(t,"/").concat(a));case 3:o=s.sent,e.table_data=o.data,r=e,setTimeout((function(){r.table=$("#dt-product-list").DataTable({destroy:!0,order:[[0,"asc"]],columnDefs:[{targets:[1],orderable:!1},{targets:[2,3],orderable:!1,width:"20%",className:"text-center"}],language:{paginate:{previous:"<i class='mdi mdi-chevron-left'>",next:"<i class='mdi mdi-chevron-right'>"}},drawCallback:function(){$(".dataTables_paginate > .pagination").addClass("pagination-rounded")}})}),100);case 7:case"end":return s.stop()}}),s)})))()},selectProduct:function(){var t=this;return n(i.a.mark((function a(){var e,s;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.clickSetup=!0,a.next=3,axios.get("/product/fetch_addon_sides_list/".concat(t.product_addon,"/0"));case 3:e=a.sent,s=e.data,t.fd_products=s,$("div#modal-select-product").modal({backdrop:"static",keyboard:!1,show:!0}),t.clickSetup=!1;case 8:case"end":return a.stop()}}),a)})))()},removeProduct:function(t){var a=this;Swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",type:"warning",allowOutsideClick:!1,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, change it!"}).then((function(e){e.value&&(a.params={product_id:t,product_addon:a.product_addon},axios.put("/product/remove_addon_sides",a.params).then((function(t){var e=t.data,s=(t.status,e.message);Swal.fire({type:"success",title:"Success",text:s}).then((function(t){a.fetchProductList(a.product_addon,1)}))})))}))}},mounted:function(){this.fetchProductList(this.product_addon,1)},watch:{product_addon:function(){this.fetchProductList(this.product_addon,1)}}},l=Object(r.a)(c,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"container-fluid"},[t._m(0),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-4"},[e("select",{directives:[{name:"model",rawName:"v-model.number",value:t.product_addon,expression:"product_addon",modifiers:{number:!0}}],staticClass:"form-control",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(a){var e="_value"in a?a._value:a.value;return t._n(e)}));t.product_addon=a.target.multiple?e:e[0]}}},[e("option",{attrs:{value:"1"}},[t._v("Addon Drinks")]),t._v(" "),e("option",{attrs:{value:"2"}},[t._v("Addon Sides")]),t._v(" "),e("option",{attrs:{value:"3"}},[t._v("Addon Dessert")])])]),t._v(" "),e("div",{staticClass:"col-md-8"},[!1===t.clickSetup?e("button",{staticClass:"btn btn-primary waves-effect waves-light float-right",on:{click:t.selectProduct}},[e("i",{staticClass:"fas fa-plus-circle"}),t._v("   Select Product")]):e("button",{staticClass:"btn btn-primary waves-effect waves-light float-right",attrs:{disabled:""}},[e("span",{staticClass:"spinner-border spinner-border-sm mr-1",attrs:{role:"status","aria-hidden":"true"}}),t._v("\n                                Loading...\n                            ")])])]),t._v(" "),e("hr"),t._v(" "),e("table",{staticClass:"table table-sm table-hover",attrs:{id:"dt-product-list",width:"100%"}},[t._m(1),t._v(" "),e("tbody",t._l(t.getList,(function(a,s){return e("tr",{key:s},[e("td",[e("span",{staticClass:"font-weight-bold text-dark"},[t._v(t._s(a.product_name))])]),t._v(" "),e("td",[e("span",{staticClass:"text-dark"},[t._v(t._s(a.description))])]),t._v(" "),e("td",[e("img",{attrs:{src:"storage/"+a.image,width:"90",height:"60"}})]),t._v(" "),e("td",[e("button",{staticClass:"btn btn-sm btn-light btn-rounded",class:"remove-button-"+a.product_id,attrs:{"data-wenk":"Remove Product"},on:{click:function(e){return t.removeProduct(a.product_id)}}},[e("i",{staticClass:"text-danger remixicon-delete-bin-2-line"})])])])})),0)])])])])]),t._v(" "),e("div",{staticClass:"modal fade",staticStyle:{display:"none"},attrs:{id:"modal-select-product",tabindex:"-1",role:"dialog","aria-labelledby":"myModalLabel","aria-hidden":"true"}},[e("select-product",{attrs:{fd_products:t.fd_products,product_addon:t.product_addon}})],1)])}),[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"page-title-box"},[a("div",{staticClass:"page-title-right"},[a("ol",{staticClass:"breadcrumb m-0"},[a("li",{staticClass:"breadcrumb-item"},[a("a",{attrs:{href:"javascript: void(0);"}},[this._v("Setup")])]),this._v(" "),a("li",{staticClass:"breadcrumb-item active"},[this._v("Product Addon")])])]),this._v(" "),a("h4",{staticClass:"page-title"},[this._v("Product Addon")])])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("thead",[a("tr",[a("th",[this._v("Product Name")]),this._v(" "),a("th",[this._v("Description")]),this._v(" "),a("th",[this._v("Image")]),this._v(" "),a("th",[this._v("Action")])])])}],!1,null,null,null);a.default=l.exports}}]);