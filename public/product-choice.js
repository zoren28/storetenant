(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"0rCE":function(t,e,a){"use strict";a.r(e);var s=a("o0o1"),i=a.n(s),c={name:"SelectProductChoiceComponent",props:["fd_products","product_choice"],data:function(){return{clickSubmit:!1,params:{},table:{}}},computed:{getProductList:function(){return this.fd_products}},methods:{loadTable:function(){$.fn.DataTable.isDataTable("#dt-product-option-list")&&(this.table.destroy(),this.table_data=[]);var t=this;setTimeout((function(){t.table=$("#dt-product-option-list").DataTable({destroy:!0,order:[[2,"asc"]],columnDefs:[{orderable:!1,className:"select-checkbox",targets:0},{targets:[1],visible:!1,searchable:!1}],select:{style:"multi",selector:"td:first-child"},language:{paginate:{previous:"<i class='mdi mdi-chevron-left'>",next:"<i class='mdi mdi-chevron-right'>"}},drawCallback:function(){$(".dataTables_paginate > .pagination").addClass("pagination-rounded")}})}),100)},selectProductForm:function(){var t=this,e=this.table.rows(".selected").data(),a=[];$.each(e,(function(t){var s=e[t][1];a.push(s)})),this.params={product_ids:a,product_choice:this.product_choice},axios.post("/product/add_choice_sides",this.params).then((function(e){var a=e.data,s=(e.status,a.message);Swal.fire({type:"success",title:"Success",text:s,allowOutsideClick:!1}).then((function(e){$("div#modal-select-product").modal("hide"),t.$parent.fetchProductList(t.product_choice,1)}))}))}},watch:{fd_products:function(){this.loadTable()}}},o=a("KHd+");function r(t,e,a,s,i,c,o){try{var r=t[c](o),n=r.value}catch(t){return void a(t)}r.done?e(n):Promise.resolve(n).then(s,i)}function n(t){return function(){var e=this,a=arguments;return new Promise((function(s,i){var c=t.apply(e,a);function o(t){r(c,s,i,o,n,"next",t)}function n(t){r(c,s,i,o,n,"throw",t)}o(void 0)}))}}var d={components:{SelectProduct:Object(o.a)(c,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-dialog modal-lg"},[a("div",{staticClass:"modal-content"},[t._m(0),t._v(" "),a("form",{attrs:{method:"post",enctype:"multipart/form-data"},on:{submit:function(e){return e.preventDefault(),t.selectProductForm(e)}}},[a("div",{staticClass:"modal-body p-4"},[a("table",{staticClass:"table table-bordered table-hover",attrs:{id:"dt-product-option-list",width:"100%"}},[t._m(1),t._v(" "),a("tbody",t._l(t.getProductList,(function(e,s){return a("tr",{key:s},[a("td"),t._v(" "),a("td",[t._v(t._s(e.product_id))]),t._v(" "),a("td",[a("span",{staticClass:"font-weight-bold text-dark"},[t._v(t._s(e.product_name))])]),t._v(" "),a("td",[a("img",{attrs:{src:"storage/"+e.image,width:"90",height:"60",alt:""}})])])})),0)])]),t._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary waves-effect",attrs:{type:"button","data-dismiss":"modal"}},[t._v("\n          Close\n        ")]),t._v(" "),!1===t.clickSubmit?a("button",{staticClass:"btn btn-info waves-effect waves-light",attrs:{type:"submit"}},[t._v("\n          Save changes\n        ")]):a("button",{staticClass:"btn btn-info waves-effect waves-light",attrs:{disabled:""}},[a("span",{staticClass:"spinner-border spinner-border-sm mr-1",attrs:{role:"status","aria-hidden":"true"}}),t._v("\n          Loading...\n        ")])])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-header"},[e("h4",{staticClass:"modal-title"},[this._v("Select Product(s)")]),this._v(" "),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-hidden":"true"}},[this._v("\n        ×\n      ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("td"),this._v(" "),e("td"),this._v(" "),e("td",[this._v("Product Name")]),this._v(" "),e("td",[this._v("Image")])])])}],!1,null,null,null).exports},data:function(){return{clickSetup:!1,table_data:[],params:[],fd_products:[],product_choice:1}},computed:{getList:function(){return this.table_data}},methods:{fetchProductList:function(t,e){var a=this;return n(i.a.mark((function s(){var c,o;return i.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return $.fn.DataTable.isDataTable("#dt-product-list")&&(a.table.destroy(),a.table_data=[]),s.next=3,axios.get("/product/fetch_product_choice/".concat(t,"/").concat(e));case 3:c=s.sent,a.table_data=c.data,o=a,setTimeout((function(){o.table=$("#dt-product-list").DataTable({destroy:!0,order:[[0,"asc"]],columnDefs:[{targets:[1],orderable:!1},{targets:[2,3],orderable:!1,width:"20%",className:"text-center"}],language:{paginate:{previous:"<i class='mdi mdi-chevron-left'>",next:"<i class='mdi mdi-chevron-right'>"}},drawCallback:function(){$(".dataTables_paginate > .pagination").addClass("pagination-rounded")}})}),100);case 7:case"end":return s.stop()}}),s)})))()},selectProduct:function(){var t=this;return n(i.a.mark((function e(){var a,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.clickSetup=!0,e.next=3,axios.get("/product/fetch_product_choice/".concat(t.product_choice,"/0"));case 3:a=e.sent,s=a.data,t.fd_products=s,$("div#modal-select-product").modal({backdrop:"static",keyboard:!1,show:!0}),t.clickSetup=!1;case 8:case"end":return e.stop()}}),e)})))()},removeProduct:function(t){var e=this;Swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",type:"warning",allowOutsideClick:!1,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, change it!"}).then((function(a){a.value&&(e.params={product_id:t,product_choice:e.product_choice},axios.put("/product/remove_choice_sides",e.params).then((function(t){var a=t.data,s=(t.status,a.message);Swal.fire({type:"success",title:"Success",text:s}).then((function(t){e.fetchProductList(e.product_choice,1)}))})))}))}},mounted:function(){this.fetchProductList(this.product_choice,1)},watch:{product_choice:function(){this.fetchProductList(this.product_choice,1)}}},l=Object(o.a)(d,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[t._m(0),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("select",{directives:[{name:"model",rawName:"v-model.number",value:t.product_choice,expression:"product_choice",modifiers:{number:!0}}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(e){var a="_value"in e?e._value:e.value;return t._n(a)}));t.product_choice=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"1"}},[t._v("Choice of Drinks")]),t._v(" "),a("option",{attrs:{value:"2"}},[t._v("Choice of Fries")]),t._v(" "),a("option",{attrs:{value:"3"}},[t._v("Choice of Sides")])])]),t._v(" "),a("div",{staticClass:"col-md-8"},[!1===t.clickSetup?a("button",{staticClass:"btn btn-primary waves-effect waves-light float-right",on:{click:t.selectProduct}},[a("i",{staticClass:"fas fa-plus-circle"}),t._v("   Select Product\n              ")]):a("button",{staticClass:"btn btn-primary waves-effect waves-light float-right",attrs:{disabled:""}},[a("span",{staticClass:"spinner-border spinner-border-sm mr-1",attrs:{role:"status","aria-hidden":"true"}}),t._v("\n                Loading...\n              ")])])]),t._v(" "),a("hr"),t._v(" "),a("table",{staticClass:"table table-sm table-hover",attrs:{id:"dt-product-list",width:"100%"}},[t._m(1),t._v(" "),a("tbody",t._l(t.getList,(function(e,s){return a("tr",{key:s},[a("td",[a("span",{staticClass:"font-weight-bold text-dark"},[t._v(t._s(e.product_name))])]),t._v(" "),a("td",[a("span",{staticClass:"text-dark"},[t._v(t._s(e.description))])]),t._v(" "),a("td",[a("img",{attrs:{src:"storage/"+e.image,width:"90",height:"60"}})]),t._v(" "),a("td",[a("button",{staticClass:"btn btn-sm btn-light btn-rounded",class:"remove-button-"+e.product_id,attrs:{"data-wenk":"Remove Product"},on:{click:function(a){return t.removeProduct(e.product_id)}}},[a("i",{staticClass:"text-danger remixicon-delete-bin-2-line"})])])])})),0)])])])])]),t._v(" "),a("div",{staticClass:"modal fade",staticStyle:{display:"none"},attrs:{id:"modal-select-product",tabindex:"-1",role:"dialog","aria-labelledby":"myModalLabel","aria-hidden":"true"}},[a("select-product",{attrs:{fd_products:t.fd_products,product_choice:t.product_choice}})],1)])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("div",{staticClass:"page-title-box"},[e("div",{staticClass:"page-title-right"},[e("ol",{staticClass:"breadcrumb m-0"},[e("li",{staticClass:"breadcrumb-item"},[e("a",{attrs:{href:"javascript: void(0);"}},[this._v("Setup")])]),this._v(" "),e("li",{staticClass:"breadcrumb-item active"},[this._v("Product Choice")])])]),this._v(" "),e("h4",{staticClass:"page-title"},[this._v("Product Choice")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",[this._v("Product Name")]),this._v(" "),e("th",[this._v("Description")]),this._v(" "),e("th",[this._v("Image")]),this._v(" "),e("th",[this._v("Action")])])])}],!1,null,null,null);e.default=l.exports}}]);